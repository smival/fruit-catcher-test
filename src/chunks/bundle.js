System.register([], function(_export, _context) { return { execute: function () {
    System.register("chunks:///_virtual/cjs-loader.mjs", [], function (exports) {
      return {
        execute: function () {
          var CjsLoader = /*#__PURE__*/function () {
            function CjsLoader() {
              this._registry = {};
              this._moduleCache = {};
            }

            /**
             * Defines a CommonJS module.
             * @param id Module ID.
             * @param factory The factory.
             * @param resolveMap An object or a function returning object which records the module specifier resolve result.
             * The later is called as "deferred resolve map" and would be invocated right before CommonJS code execution.
             */
            var _proto = CjsLoader.prototype;
            _proto.define = function define(id, factory, resolveMap) {
              this._registry[id] = {
                factory: factory,
                resolveMap: resolveMap
              };
            }

            /**
             * Requires a CommonJS module.
             * @param id Module ID.
             * @returns The module's `module.exports`.
             */;
            _proto.require = function require(id) {
              return this._require(id);
            };
            _proto.throwInvalidWrapper = function throwInvalidWrapper(requestTarget, from) {
              throw new Error("Module '" + requestTarget + "' imported from '" + from + "' is expected be an ESM-wrapped CommonJS module but it doesn't.");
            };
            _proto._require = function _require(id, parent) {
              var cachedModule = this._moduleCache[id];
              if (cachedModule) {
                return cachedModule.exports;
              }
              var module = {
                id: id,
                exports: {}
              };
              this._moduleCache[id] = module;
              this._tryModuleLoad(module, id);
              return module.exports;
            };
            _proto._resolve = function _resolve(specifier, parent) {
              return this._resolveFromInfos(specifier, parent) || this._throwUnresolved(specifier, parent);
            };
            _proto._resolveFromInfos = function _resolveFromInfos(specifier, parent) {
              var _cjsInfos$parent$reso, _cjsInfos$parent;
              if (specifier in cjsInfos) {
                return specifier;
              }
              if (!parent) {
                return;
              }
              return (_cjsInfos$parent$reso = (_cjsInfos$parent = cjsInfos[parent]) == null ? void 0 : _cjsInfos$parent.resolveCache[specifier]) != null ? _cjsInfos$parent$reso : undefined;
            };
            _proto._tryModuleLoad = function _tryModuleLoad(module, id) {
              var threw = true;
              try {
                this._load(module, id);
                threw = false;
              } finally {
                if (threw) {
                  delete this._moduleCache[id];
                }
              }
            };
            _proto._load = function _load(module, id) {
              var _this$_loadWrapper = this._loadWrapper(id),
                  factory = _this$_loadWrapper.factory,
                  resolveMap = _this$_loadWrapper.resolveMap;
              var vendorRequire = this._createRequire(module);
              var require = resolveMap ? this._createRequireWithResolveMap(typeof resolveMap === 'function' ? resolveMap() : resolveMap, vendorRequire) : vendorRequire;
              factory(module.exports, require, module);
            };
            _proto._loadWrapper = function _loadWrapper(id) {
              if (id in this._registry) {
                return this._registry[id];
              } else {
                return this._loadHostProvidedModules(id);
              }
            };
            _proto._loadHostProvidedModules = function _loadHostProvidedModules(id) {
              return {
                factory: function factory(_exports, _require, module) {
                  if (typeof require === 'undefined') {
                    throw new Error("Current environment does not provide a require() for requiring '" + id + "'.");
                  }
                  try {
                    module.exports = require(id);
                  } catch (err) {
                    throw new Error("Exception thrown when calling host defined require('" + id + "').", {
                      cause: err
                    });
                  }
                }
              };
            };
            _proto._createRequire = function _createRequire(module) {
              var _this = this;
              return function (specifier) {
                return _this._require(specifier, module);
              };
            };
            _proto._createRequireWithResolveMap = function _createRequireWithResolveMap(requireMap, originalRequire) {
              return function (specifier) {
                var resolved = requireMap[specifier];
                if (resolved) {
                  return originalRequire(resolved);
                } else {
                  throw new Error('Unresolved specifier ' + specifier);
                }
              };
            };
            _proto._throwUnresolved = function _throwUnresolved(specifier, parentUrl) {
              throw new Error("Unable to resolve " + specifier + " from " + parent + ".");
            };
            return CjsLoader;
          }();
          var loader = exports('default', new CjsLoader());
        }
      };
    });

    System.register("chunks:///_virtual/Engine.js", ['./cjs-loader.mjs'], function (exports, module) {
      var loader;
      return {
        setters: [function (module) {
          loader = module.default;
        }],
        execute: function () {
          var __cjsMetaURL = exports('__cjsMetaURL', module.meta.url);
          loader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {
            Object.defineProperty(exports, "__esModule", {
              value: true
            });
            var Engine = function () {
              function Engine() {
                this._entities = [];
                this._entityListeners = [];
                this._systems = [];
                this._systemsNeedSorting = false;
              }

              Object.defineProperty(Engine.prototype, "entities", {
                get: function get() {
                  return Object.freeze(this._entities.slice(0));
                },
                enumerable: true,
                configurable: true
              });
              Engine.prototype.notifyPriorityChange = function (system) {
                this._systemsNeedSorting = true;
              };
              Engine.prototype.addEntityListener = function (listener) {
                if (this._entityListeners.indexOf(listener) === -1) {
                  this._entityListeners.push(listener);
                }
                return this;
              };
              Engine.prototype.removeEntityListener = function (listener) {
                var index = this._entityListeners.indexOf(listener);
                if (index !== -1) {
                  this._entityListeners.splice(index, 1);
                }
                return this;
              };
              Engine.prototype.addEntity = function (entity) {
                if (this._entities.indexOf(entity) === -1) {
                  this._entities.push(entity);
                  for (var _i = 0, _a = this._entityListeners; _i < _a.length; _i++) {
                    var listener = _a[_i];
                    listener.onEntityAdded(entity);
                  }
                }
                return this;
              };
              Engine.prototype.addEntities = function () {
                var entities = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                  entities[_i] = arguments[_i];
                }
                for (var _a = 0, entities_1 = entities; _a < entities_1.length; _a++) {
                  var entity = entities_1[_a];
                  this.addEntity(entity);
                }
                return this;
              };
              Engine.prototype.removeEntity = function (entity) {
                var index = this._entities.indexOf(entity);
                if (index !== -1) {
                  this._entities.splice(index, 1);
                  for (var _i = 0, _a = this._entityListeners; _i < _a.length; _i++) {
                    var listener = _a[_i];
                    listener.onEntityRemoved(entity);
                  }
                }
              };
              Engine.prototype.removeEntities = function () {
                var entities = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                  entities[_i] = arguments[_i];
                }
                for (var _a = 0, entities_2 = entities; _a < entities_2.length; _a++) {
                  var entity = entities_2[_a];
                  this.removeEntity(entity);
                }
                return this;
              };
              Engine.prototype.addSystem = function (system) {
                var index = this._systems.indexOf(system);
                if (index === -1) {
                  this._systems.push(system);
                  system.onAttach(this);
                  this._systemsNeedSorting = true;
                }
                return this;
              };
              Engine.prototype.addSystems = function () {
                var systems = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                  systems[_i] = arguments[_i];
                }
                for (var _a = 0, systems_1 = systems; _a < systems_1.length; _a++) {
                  var system = systems_1[_a];
                  this.addSystem(system);
                }
              };
              Engine.prototype.removeSystem = function (system) {
                var index = this._systems.indexOf(system);
                if (index !== -1) {
                  this._systems.splice(index, 1);
                  system.onDetach(this);
                }
                return this;
              };
              Engine.prototype.removeSystems = function () {
                var systems = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                  systems[_i] = arguments[_i];
                }
                for (var _a = 0, systems_2 = systems; _a < systems_2.length; _a++) {
                  var system = systems_2[_a];
                  this.removeSystem(system);
                }
              };
              Engine.prototype.update = function (delta) {
                if (this._systemsNeedSorting) {
                  this._systemsNeedSorting = false;
                  this._systems.sort(function (a, b) {
                    return a.priority - b.priority;
                  });
                }
                for (var _i = 0, _a = this._systems; _i < _a.length; _i++) {
                  var system = _a[_i];
                  system.update(this, delta);
                }
              };
              return Engine;
            }();
            exports.Engine = Engine;

            // #endregion ORIGINAL CODE

            module.exports;
            module.exports.__esModule;
            module.exports.Engine;
          }, {});
        }
      };
    });

    System.register("chunks:///_virtual/Entity.js", ['./cjs-loader.mjs'], function (exports, module) {
      var loader;
      return {
        setters: [function (module) {
          loader = module.default;
        }],
        execute: function () {
          var __cjsMetaURL = exports('__cjsMetaURL', module.meta.url);
          loader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {
            Object.defineProperty(exports, "__esModule", {
              value: true
            });
            var Entity = function () {
              function Entity() {
                this._id = null;
                this._components = {};
                this._listeners = [];
                this._componentClasses = {};
              }

              Object.defineProperty(Entity.prototype, "id", {
                get: function get() {
                  if (this._id === null) {
                    throw new Error("Cannot retrieve an ID when is null.");
                  }
                  return this._id;
                },
                set: function set(value) {
                  if (value === null || value === undefined) {
                    throw new Error("Must set a non null value when setting an entity id.");
                  }
                  if (this._id !== null) {
                    throw new Error("Entity id is already set as \"" + this._id + "\".");
                  }
                  this._id = value;
                },
                enumerable: true,
                configurable: true
              });
              Entity.prototype.isNew = function () {
                return this._id === null;
              };
              Entity.prototype.listComponents = function () {
                var _this = this;
                return Object.keys(this._components).map(function (i) {
                  return _this._components[i];
                });
              };
              Entity.prototype.listComponentsWithTypes = function () {
                var _this = this;
                return Object.keys(this._components).map(function (i) {
                  return {
                    component: _this._components[i],
                    type: _this._componentClasses[i]
                  };
                });
              };
              Entity.prototype.listComponentsWithTags = function () {
                var _this = this;
                return Object.keys(this._components).map(function (tag) {
                  return Object.freeze({
                    tag: tag,
                    component: _this._components[tag]
                  });
                });
              };
              Entity.prototype.hasComponent = function (componentClass) {
                var tag = componentClass.tag || componentClass.name;
                var component = this._components[tag];
                if (!component) return false;
                if (!this.cast(component, componentClass)) {
                  throw new Error("There are multiple classes with the same tag or name \"" + tag + "\".\nAdd a different property \"tag\" to one of them.");
                }
                return true;
              };
              Entity.prototype.getComponent = function (componentClass) {
                var tag = componentClass.tag || componentClass.name;
                var component = this._components[tag];
                if (!component) {
                  throw new Error("Cannot get component \"" + tag + "\" from entity.");
                }
                if (!this.cast(component, componentClass)) {
                  throw new Error("There are multiple classes with the same tag or name \"" + tag + "\".\nAdd a different property \"tag\" to one of them.");
                }
                return component;
              };
              Entity.prototype.putComponent = function (componentClass) {
                var tag = componentClass.tag || componentClass.name;
                var component = this._components[tag];
                if (component) {
                  if (!this.cast(component, componentClass)) {
                    throw new Error("There are multiple classes with the same tag or name \"" + tag + "\".\nAdd a different property \"tag\" to one of them.");
                  }
                  delete this._components[tag];
                  delete this._componentClasses[tag];
                }
                var newComponent = new componentClass();
                this._components[tag] = newComponent;
                this._componentClasses[tag] = componentClass;
                for (var _i = 0, _a = this._listeners; _i < _a.length; _i++) {
                  var listener = _a[_i];
                  listener(this);
                }
                return newComponent;
              };
              Entity.prototype.removeComponent = function (componentClass) {
                var tag = componentClass.tag || componentClass.name;
                var component = this._components[tag];
                if (!component) {
                  throw new Error("Component of tag \"" + tag + "\".\nDoes not exists.");
                }
                if (!this.cast(component, componentClass)) {
                  throw new Error("There are multiple classes with the same tag or name \"" + tag + "\".\nAdd a different property \"tag\" to one of them.");
                }
                delete this._components[tag];
                for (var _i = 0, _a = this._listeners; _i < _a.length; _i++) {
                  var listener = _a[_i];
                  listener(this);
                }
              };
              Entity.prototype.cast = function (component, componentClass) {
                return !!(component && component instanceof componentClass);
              };
              Entity.prototype.addListener = function (listener) {
                var index = this._listeners.indexOf(listener);
                if (index === -1) {
                  this._listeners.push(listener);
                }
                return this;
              };
              Entity.prototype.removeListener = function (listener) {
                var index = this._listeners.indexOf(listener);
                if (index !== -1) {
                  this._listeners.splice(index, 1);
                }
                return this;
              };
              return Entity;
            }();
            exports.Entity = Entity;

            // #endregion ORIGINAL CODE

            module.exports;
            module.exports.__esModule;
            module.exports.Entity;
          }, {});
        }
      };
    });

    System.register("chunks:///_virtual/Family.js", ['./cjs-loader.mjs'], function (exports, module) {
      var loader;
      return {
        setters: [function (module) {
          loader = module.default;
        }],
        execute: function () {
          var __cjsMetaURL = exports('__cjsMetaURL', module.meta.url);
          loader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {
            var __extends = this && this.__extends || function () {
              var extendStatics = Object.setPrototypeOf || {
                __proto__: []
              } instanceof Array && function (d, b) {
                d.__proto__ = b;
              } || function (d, b) {
                for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
              };
              return function (d, b) {
                extendStatics(d, b);

                function __() {
                  this.constructor = d;
                }

                d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
              };
            }();
            Object.defineProperty(exports, "__esModule", {
              value: true
            });
            var AbstractFamily = function () {
              function AbstractFamily(engine, include, exclude) {
                var _this = this;
                this.includesEntity = function (entity) {
                  for (var _i = 0, _a = _this._include; _i < _a.length; _i++) {
                    var include = _a[_i];
                    if (!entity.hasComponent(include)) {
                      return false;
                    }
                  }
                  for (var _b = 0, _c = _this._exclude; _b < _c.length; _b++) {
                    var exclude = _c[_b];
                    if (entity.hasComponent(exclude)) {
                      return false;
                    }
                  }
                  return true;
                };
                this._engine = engine;
                this._include = Object.freeze(include.slice(0));
                this._exclude = Object.freeze(exclude.slice(0));
              }

              Object.defineProperty(AbstractFamily.prototype, "engine", {
                get: function get() {
                  return this._engine;
                },
                enumerable: true,
                configurable: true
              });
              return AbstractFamily;
            }();
            var CachedFamily = function (_super) {
              __extends(CachedFamily, _super);

              function CachedFamily(engine, include, exclude) {
                var _this = _super.call(this, engine, include, exclude) || this;
                _this.onEntityChanged = function (entity) {
                  var index = _this._entities.indexOf(entity);
                  if (index === -1) {
                    _this._entities.push(entity);
                    entity.addListener(_this.onEntityChanged);
                  }
                  _this._needEntityRefresh = true;
                };
                var allEntities = _this.engine.entities;
                _this._entities = allEntities.filter(_this.includesEntity);
                _this.engine.addEntityListener(_this);
                for (var _i = 0, allEntities_1 = allEntities; _i < allEntities_1.length; _i++) {
                  var entity = allEntities_1[_i];
                  entity.addListener(_this.onEntityAdded);
                }
                _this._needEntityRefresh = false;
                return _this;
              }

              Object.defineProperty(CachedFamily.prototype, "entities", {
                get: function get() {
                  if (this._needEntityRefresh) {
                    this._needEntityRefresh = false;
                    this._entities = this._entities.filter(this.includesEntity);
                  }
                  return Object.freeze(this._entities.slice(0));
                },
                enumerable: true,
                configurable: true
              });
              CachedFamily.prototype.onEntityAdded = function (entity) {
                var index = this._entities.indexOf(entity);
                if (index === -1) {
                  this._entities.push(entity);
                  this._needEntityRefresh = true;
                  entity.addListener(this.onEntityChanged);
                }
              };
              CachedFamily.prototype.onEntityRemoved = function (entity) {
                var index = this._entities.indexOf(entity);
                if (index !== -1) {
                  var entity_1 = this._entities[index];
                  this._entities.splice(index, 1);
                  entity_1.removeListener(this.onEntityChanged);
                }
              };
              return CachedFamily;
            }(AbstractFamily);
            var NonCachedFamily = function (_super) {
              __extends(NonCachedFamily, _super);

              function NonCachedFamily() {
                return _super !== null && _super.apply(this, arguments) || this;
              }

              Object.defineProperty(NonCachedFamily.prototype, "entities", {
                get: function get() {
                  return this.engine.entities.filter(this.includesEntity);
                },
                enumerable: true,
                configurable: true
              });
              return NonCachedFamily;
            }(AbstractFamily);
            var FamilyBuilder = function () {
              function FamilyBuilder(engine) {
                this._engine = engine || null;
                this._include = [];
                this._exclude = [];
                this._cached = true;
              }

              FamilyBuilder.prototype.include = function () {
                var classes = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                  classes[_i] = arguments[_i];
                }
                (_a = this._include).push.apply(_a, classes);
                return this;
                var _a;
              };
              FamilyBuilder.prototype.exclude = function () {
                var classes = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                  classes[_i] = arguments[_i];
                }
                (_a = this._exclude).push.apply(_a, classes);
                return this;
                var _a;
              };
              FamilyBuilder.prototype.changeEngine = function (engine) {
                this._engine = engine;
                return this;
              };
              FamilyBuilder.prototype.setCached = function (cached) {
                this._cached = cached;
              };
              FamilyBuilder.prototype.build = function () {
                if (!this._engine) {
                  throw new Error("Family should always belong to an engine.");
                }
                if (!this._cached) {
                  return new NonCachedFamily(this._engine, this._include, this._exclude);
                }
                return new CachedFamily(this._engine, this._include, this._exclude);
              };
              return FamilyBuilder;
            }();
            exports.FamilyBuilder = FamilyBuilder;

            // #endregion ORIGINAL CODE

            module.exports;
            module.exports.__esModule;
            module.exports.FamilyBuilder;
          }, {});
        }
      };
    });

    System.register("chunks:///_virtual/index.js", ['./cjs-loader.mjs', './index2.js'], function (exports, module) {
      var loader, __cjsMetaURL$1;
      return {
        setters: [function (module) {
          loader = module.default;
        }, function (module) {
          __cjsMetaURL$1 = module.__cjsMetaURL;
        }],
        execute: function () {
          exports('default', void 0);
          var _cjsExports;
          var __cjsMetaURL = exports('__cjsMetaURL', module.meta.url);
          loader.define(__cjsMetaURL, function (exports$1, require, module, __filename, __dirname) {
            // #region ORIGINAL CODE

            module.exports = require("./lib/index");

            // #endregion ORIGINAL CODE

            _cjsExports = exports('default', module.exports);
          }, function () {
            return {
              './lib/index': __cjsMetaURL$1
            };
          });
        }
      };
    });

    System.register("chunks:///_virtual/index.mjs_cjs=&original=.js", ['./index.js', './cjs-loader.mjs'], function (exports, module) {
      var __cjsMetaURL, loader;
      return {
        setters: [function (module) {
          __cjsMetaURL = module.__cjsMetaURL;
          var _setter = {};
          _setter.__cjsMetaURL = module.__cjsMetaURL;
          _setter.default = module.default;
          exports(_setter);
        }, function (module) {
          loader = module.default;
        }],
        execute: function () {
          // I am the facade module who provides access to the CommonJS module './index.js'~
          if (!__cjsMetaURL) {
            loader.throwInvalidWrapper('./index.js', module.meta.url);
          }
          loader.require(__cjsMetaURL);
        }
      };
    });

    System.register("chunks:///_virtual/index2.js", ['./cjs-loader.mjs', './Engine.js', './Entity.js', './Family.js', './System.js'], function (exports, module) {
      var loader, __cjsMetaURL$1, __cjsMetaURL$2, __cjsMetaURL$3, __cjsMetaURL$4;
      return {
        setters: [function (module) {
          loader = module.default;
        }, function (module) {
          __cjsMetaURL$1 = module.__cjsMetaURL;
        }, function (module) {
          __cjsMetaURL$2 = module.__cjsMetaURL;
        }, function (module) {
          __cjsMetaURL$3 = module.__cjsMetaURL;
        }, function (module) {
          __cjsMetaURL$4 = module.__cjsMetaURL;
        }],
        execute: function () {
          var __cjsMetaURL = exports('__cjsMetaURL', module.meta.url);
          loader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {
            function __export(m) {
              for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
            }

            Object.defineProperty(exports, "__esModule", {
              value: true
            });
            __export(require("./Engine"));
            __export(require("./Entity"));
            __export(require("./Family"));
            __export(require("./System"));

            // #endregion ORIGINAL CODE

            module.exports;
            module.exports.__esModule;
          }, function () {
            return {
              './Engine': __cjsMetaURL$1,
              './Entity': __cjsMetaURL$2,
              './Family': __cjsMetaURL$3,
              './System': __cjsMetaURL$4
            };
          });
        }
      };
    });

    System.register("chunks:///_virtual/rollupPluginModLoBabelHelpers.js", [], function (exports) {
      return {
        execute: function () {
          exports({
            applyDecoratedDescriptor: _applyDecoratedDescriptor,
            arrayLikeToArray: _arrayLikeToArray,
            assertThisInitialized: _assertThisInitialized,
            asyncToGenerator: _asyncToGenerator,
            construct: _construct,
            createClass: _createClass,
            createForOfIteratorHelperLoose: _createForOfIteratorHelperLoose,
            getPrototypeOf: _getPrototypeOf,
            inheritsLoose: _inheritsLoose,
            initializerDefineProperty: _initializerDefineProperty,
            isNativeFunction: _isNativeFunction,
            isNativeReflectConstruct: _isNativeReflectConstruct,
            regeneratorRuntime: _regeneratorRuntime,
            setPrototypeOf: _setPrototypeOf,
            toPrimitive: _toPrimitive,
            toPropertyKey: _toPropertyKey,
            unsupportedIterableToArray: _unsupportedIterableToArray,
            wrapNativeSuper: _wrapNativeSuper
          });

          function _regeneratorRuntime() {
            /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
            _regeneratorRuntime = exports('regeneratorRuntime', function () {
              return e;
            });
            var t,
                e = {},
                r = Object.prototype,
                n = r.hasOwnProperty,
                o = Object.defineProperty || function (t, e, r) {
                  t[e] = r.value;
                },
                i = "function" == typeof Symbol ? Symbol : {},
                a = i.iterator || "@@iterator",
                c = i.asyncIterator || "@@asyncIterator",
                u = i.toStringTag || "@@toStringTag";

            function define(t, e, r) {
              return Object.defineProperty(t, e, {
                value: r,
                enumerable: !0,
                configurable: !0,
                writable: !0
              }), t[e];
            }

            try {
              define({}, "");
            } catch (t) {
              define = function (t, e, r) {
                return t[e] = r;
              };
            }

            function wrap(t, e, r, n) {
              var i = e && e.prototype instanceof Generator ? e : Generator,
                  a = Object.create(i.prototype),
                  c = new Context(n || []);
              return o(a, "_invoke", {
                value: makeInvokeMethod(t, r, c)
              }), a;
            }

            function tryCatch(t, e, r) {
              try {
                return {
                  type: "normal",
                  arg: t.call(e, r)
                };
              } catch (t) {
                return {
                  type: "throw",
                  arg: t
                };
              }
            }

            e.wrap = wrap;
            var h = "suspendedStart",
                l = "suspendedYield",
                f = "executing",
                s = "completed",
                y = {};

            function Generator() {
            }

            function GeneratorFunction() {
            }

            function GeneratorFunctionPrototype() {
            }

            var p = {};
            define(p, a, function () {
              return this;
            });
            var d = Object.getPrototypeOf,
                v = d && d(d(values([])));
            v && v !== r && n.call(v, a) && (p = v);
            var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);

            function defineIteratorMethods(t) {
              ["next", "throw", "return"].forEach(function (e) {
                define(t, e, function (t) {
                  return this._invoke(e, t);
                });
              });
            }

            function AsyncIterator(t, e) {
              function invoke(r, o, i, a) {
                var c = tryCatch(t[r], t, o);
                if ("throw" !== c.type) {
                  var u = c.arg,
                      h = u.value;
                  return h && "object" == typeof h && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) {
                    invoke("next", t, i, a);
                  }, function (t) {
                    invoke("throw", t, i, a);
                  }) : e.resolve(h).then(function (t) {
                    u.value = t, i(u);
                  }, function (t) {
                    return invoke("throw", t, i, a);
                  });
                }
                a(c.arg);
              }

              var r;
              o(this, "_invoke", {
                value: function (t, n) {
                  function callInvokeWithMethodAndArg() {
                    return new e(function (e, r) {
                      invoke(t, n, e, r);
                    });
                  }

                  return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();
                }
              });
            }

            function makeInvokeMethod(e, r, n) {
              var o = h;
              return function (i, a) {
                if (o === f) throw new Error("Generator is already running");
                if (o === s) {
                  if ("throw" === i) throw a;
                  return {
                    value: t,
                    done: !0
                  };
                }
                for (n.method = i, n.arg = a; ;) {
                  var c = n.delegate;
                  if (c) {
                    var u = maybeInvokeDelegate(c, n);
                    if (u) {
                      if (u === y) continue;
                      return u;
                    }
                  }
                  if ("next" === n.method) n.sent = n._sent = n.arg; else if ("throw" === n.method) {
                    if (o === h) throw o = s, n.arg;
                    n.dispatchException(n.arg);
                  } else "return" === n.method && n.abrupt("return", n.arg);
                  o = f;
                  var p = tryCatch(e, r, n);
                  if ("normal" === p.type) {
                    if (o = n.done ? s : l, p.arg === y) continue;
                    return {
                      value: p.arg,
                      done: n.done
                    };
                  }
                  "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg);
                }
              };
            }

            function maybeInvokeDelegate(e, r) {
              var n = r.method,
                  o = e.iterator[n];
              if (o === t) return r.delegate = null, "throw" === n && e.iterator.return && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y;
              var i = tryCatch(o, e.iterator, r.arg);
              if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y;
              var a = i.arg;
              return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y);
            }

            function pushTryEntry(t) {
              var e = {
                tryLoc: t[0]
              };
              1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e);
            }

            function resetTryEntry(t) {
              var e = t.completion || {};
              e.type = "normal", delete e.arg, t.completion = e;
            }

            function Context(t) {
              this.tryEntries = [{
                tryLoc: "root"
              }], t.forEach(pushTryEntry, this), this.reset(!0);
            }

            function values(e) {
              if (e || "" === e) {
                var r = e[a];
                if (r) return r.call(e);
                if ("function" == typeof e.next) return e;
                if (!isNaN(e.length)) {
                  var o = -1,
                      i = function next() {
                        for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next;
                        return next.value = t, next.done = !0, next;
                      };
                  return i.next = i;
                }
              }
              throw new TypeError(typeof e + " is not iterable");
            }

            return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", {
              value: GeneratorFunctionPrototype,
              configurable: !0
            }), o(GeneratorFunctionPrototype, "constructor", {
              value: GeneratorFunction,
              configurable: !0
            }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) {
              var e = "function" == typeof t && t.constructor;
              return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name));
            }, e.mark = function (t) {
              return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t;
            }, e.awrap = function (t) {
              return {
                __await: t
              };
            }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () {
              return this;
            }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) {
              void 0 === i && (i = Promise);
              var a = new AsyncIterator(wrap(t, r, n, o), i);
              return e.isGeneratorFunction(r) ? a : a.next().then(function (t) {
                return t.done ? t.value : a.next();
              });
            }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () {
              return this;
            }), define(g, "toString", function () {
              return "[object Generator]";
            }), e.keys = function (t) {
              var e = Object(t),
                  r = [];
              for (var n in e) r.push(n);
              return r.reverse(), function next() {
                for (; r.length;) {
                  var t = r.pop();
                  if (t in e) return next.value = t, next.done = !1, next;
                }
                return next.done = !0, next;
              };
            }, e.values = values, Context.prototype = {
              constructor: Context,
              reset: function (e) {
                if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);
              },
              stop: function () {
                this.done = !0;
                var t = this.tryEntries[0].completion;
                if ("throw" === t.type) throw t.arg;
                return this.rval;
              },
              dispatchException: function (e) {
                if (this.done) throw e;
                var r = this;

                function handle(n, o) {
                  return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o;
                }

                for (var o = this.tryEntries.length - 1; o >= 0; --o) {
                  var i = this.tryEntries[o],
                      a = i.completion;
                  if ("root" === i.tryLoc) return handle("end");
                  if (i.tryLoc <= this.prev) {
                    var c = n.call(i, "catchLoc"),
                        u = n.call(i, "finallyLoc");
                    if (c && u) {
                      if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);
                      if (this.prev < i.finallyLoc) return handle(i.finallyLoc);
                    } else if (c) {
                      if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);
                    } else {
                      if (!u) throw new Error("try statement without catch or finally");
                      if (this.prev < i.finallyLoc) return handle(i.finallyLoc);
                    }
                  }
                }
              },
              abrupt: function (t, e) {
                for (var r = this.tryEntries.length - 1; r >= 0; --r) {
                  var o = this.tryEntries[r];
                  if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) {
                    var i = o;
                    break;
                  }
                }
                i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null);
                var a = i ? i.completion : {};
                return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a);
              },
              complete: function (t, e) {
                if ("throw" === t.type) throw t.arg;
                return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y;
              },
              finish: function (t) {
                for (var e = this.tryEntries.length - 1; e >= 0; --e) {
                  var r = this.tryEntries[e];
                  if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y;
                }
              },
              catch: function (t) {
                for (var e = this.tryEntries.length - 1; e >= 0; --e) {
                  var r = this.tryEntries[e];
                  if (r.tryLoc === t) {
                    var n = r.completion;
                    if ("throw" === n.type) {
                      var o = n.arg;
                      resetTryEntry(r);
                    }
                    return o;
                  }
                }
                throw new Error("illegal catch attempt");
              },
              delegateYield: function (e, r, n) {
                return this.delegate = {
                  iterator: values(e),
                  resultName: r,
                  nextLoc: n
                }, "next" === this.method && (this.arg = t), y;
              }
            }, e;
          }

          function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
            try {
              var info = gen[key](arg);
              var value = info.value;
            } catch (error) {
              reject(error);
              return;
            }
            if (info.done) {
              resolve(value);
            } else {
              Promise.resolve(value).then(_next, _throw);
            }
          }

          function _asyncToGenerator(fn) {
            return function () {
              var self = this,
                  args = arguments;
              return new Promise(function (resolve, reject) {
                var gen = fn.apply(self, args);

                function _next(value) {
                  asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
                }

                function _throw(err) {
                  asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
                }

                _next(undefined);
              });
            };
          }

          function _defineProperties(target, props) {
            for (var i = 0; i < props.length; i++) {
              var descriptor = props[i];
              descriptor.enumerable = descriptor.enumerable || false;
              descriptor.configurable = true;
              if ("value" in descriptor) descriptor.writable = true;
              Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);
            }
          }

          function _createClass(Constructor, protoProps, staticProps) {
            if (protoProps) _defineProperties(Constructor.prototype, protoProps);
            if (staticProps) _defineProperties(Constructor, staticProps);
            Object.defineProperty(Constructor, "prototype", {
              writable: false
            });
            return Constructor;
          }

          function _inheritsLoose(subClass, superClass) {
            subClass.prototype = Object.create(superClass.prototype);
            subClass.prototype.constructor = subClass;
            _setPrototypeOf(subClass, superClass);
          }

          function _getPrototypeOf(o) {
            _getPrototypeOf = exports('getPrototypeOf', Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {
              return o.__proto__ || Object.getPrototypeOf(o);
            });
            return _getPrototypeOf(o);
          }

          function _setPrototypeOf(o, p) {
            _setPrototypeOf = exports('setPrototypeOf', Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {
              o.__proto__ = p;
              return o;
            });
            return _setPrototypeOf(o, p);
          }

          function _isNativeReflectConstruct() {
            if (typeof Reflect === "undefined" || !Reflect.construct) return false;
            if (Reflect.construct.sham) return false;
            if (typeof Proxy === "function") return true;
            try {
              Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {
              }));
              return true;
            } catch (e) {
              return false;
            }
          }

          function _construct(Parent, args, Class) {
            if (_isNativeReflectConstruct()) {
              _construct = exports('construct', Reflect.construct.bind());
            } else {
              _construct = exports('construct', function _construct(Parent, args, Class) {
                var a = [null];
                a.push.apply(a, args);
                var Constructor = Function.bind.apply(Parent, a);
                var instance = new Constructor();
                if (Class) _setPrototypeOf(instance, Class.prototype);
                return instance;
              });
            }
            return _construct.apply(null, arguments);
          }

          function _isNativeFunction(fn) {
            return Function.toString.call(fn).indexOf("[native code]") !== -1;
          }

          function _wrapNativeSuper(Class) {
            var _cache = typeof Map === "function" ? new Map() : undefined;
            _wrapNativeSuper = exports('wrapNativeSuper', function _wrapNativeSuper(Class) {
              if (Class === null || !_isNativeFunction(Class)) return Class;
              if (typeof Class !== "function") {
                throw new TypeError("Super expression must either be null or a function");
              }
              if (typeof _cache !== "undefined") {
                if (_cache.has(Class)) return _cache.get(Class);
                _cache.set(Class, Wrapper);
              }

              function Wrapper() {
                return _construct(Class, arguments, _getPrototypeOf(this).constructor);
              }

              Wrapper.prototype = Object.create(Class.prototype, {
                constructor: {
                  value: Wrapper,
                  enumerable: false,
                  writable: true,
                  configurable: true
                }
              });
              return _setPrototypeOf(Wrapper, Class);
            });
            return _wrapNativeSuper(Class);
          }

          function _assertThisInitialized(self) {
            if (self === void 0) {
              throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            }
            return self;
          }

          function _unsupportedIterableToArray(o, minLen) {
            if (!o) return;
            if (typeof o === "string") return _arrayLikeToArray(o, minLen);
            var n = Object.prototype.toString.call(o).slice(8, -1);
            if (n === "Object" && o.constructor) n = o.constructor.name;
            if (n === "Map" || n === "Set") return Array.from(o);
            if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
          }

          function _arrayLikeToArray(arr, len) {
            if (len == null || len > arr.length) len = arr.length;
            for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];
            return arr2;
          }

          function _createForOfIteratorHelperLoose(o, allowArrayLike) {
            var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
            if (it) return (it = it.call(o)).next.bind(it);
            if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {
              if (it) o = it;
              var i = 0;
              return function () {
                if (i >= o.length) return {
                  done: true
                };
                return {
                  done: false,
                  value: o[i++]
                };
              };
            }
            throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
          }

          function _toPrimitive(input, hint) {
            if (typeof input !== "object" || input === null) return input;
            var prim = input[Symbol.toPrimitive];
            if (prim !== undefined) {
              var res = prim.call(input, hint || "default");
              if (typeof res !== "object") return res;
              throw new TypeError("@@toPrimitive must return a primitive value.");
            }
            return (hint === "string" ? String : Number)(input);
          }

          function _toPropertyKey(arg) {
            var key = _toPrimitive(arg, "string");
            return typeof key === "symbol" ? key : String(key);
          }

          function _initializerDefineProperty(target, property, descriptor, context) {
            if (!descriptor) return;
            Object.defineProperty(target, property, {
              enumerable: descriptor.enumerable,
              configurable: descriptor.configurable,
              writable: descriptor.writable,
              value: descriptor.initializer ? descriptor.initializer.call(context) : void 0
            });
          }

          function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {
            var desc = {};
            Object.keys(descriptor).forEach(function (key) {
              desc[key] = descriptor[key];
            });
            desc.enumerable = !!desc.enumerable;
            desc.configurable = !!desc.configurable;
            if ('value' in desc || desc.initializer) {
              desc.writable = true;
            }
            desc = decorators.slice().reverse().reduce(function (desc, decorator) {
              return decorator(target, property, desc) || desc;
            }, desc);
            if (context && desc.initializer !== void 0) {
              desc.value = desc.initializer ? desc.initializer.call(context) : void 0;
              desc.initializer = undefined;
            }
            if (desc.initializer === void 0) {
              Object.defineProperty(target, property, desc);
              desc = null;
            }
            return desc;
          }
        }
      };
    });

    System.register("chunks:///_virtual/System.js", ['./cjs-loader.mjs'], function (exports, module) {
      var loader;
      return {
        setters: [function (module) {
          loader = module.default;
        }],
        execute: function () {
          var __cjsMetaURL = exports('__cjsMetaURL', module.meta.url);
          loader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {
            Object.defineProperty(exports, "__esModule", {
              value: true
            });
            var System = function () {
              function System() {
                this._priority = 0;
                this._engines = [];
              }

              Object.defineProperty(System.prototype, "priority", {
                get: function get() {
                  return this._priority;
                },
                set: function set(value) {
                  this._priority = value;
                  for (var _i = 0, _a = this._engines; _i < _a.length; _i++) {
                    var engine = _a[_i];
                    engine.notifyPriorityChange(this);
                  }
                },
                enumerable: true,
                configurable: true
              });
              Object.defineProperty(System.prototype, "engines", {
                get: function get() {
                  return Object.freeze(this._engines.slice(0));
                },
                enumerable: true,
                configurable: true
              });
              System.prototype.onAttach = function (engine) {
                var index = this._engines.indexOf(engine);
                if (index === -1) {
                  this._engines.push(engine);
                }
              };
              System.prototype.onDetach = function (engine) {
                var index = this._engines.indexOf(engine);
                if (index !== -1) {
                  this._engines.splice(index, 1);
                }
              };
              return System;
            }();
            exports.System = System;

            // #endregion ORIGINAL CODE

            module.exports;
            module.exports.__esModule;
            module.exports.System;
          }, {});
        }
      };
    });

} }; });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2NjZTovaW50ZXJuYWwvbWwvY2NlOi9pbnRlcm5hbC9tbC9janMtbG9hZGVyLm1qcyIsIi4uL2ZpbGU6L1VzZXJzL3NtaXZhbC9Fb3RUZXN0L25vZGVfbW9kdWxlcy9Abm92YS1lbmdpbmUvZWNzL2xpYi9maWxlOi9Vc2Vycy9zbWl2YWwvRW90VGVzdC9ub2RlX21vZHVsZXMvQG5vdmEtZW5naW5lL2Vjcy9saWIvRW5naW5lLmpzIiwiLi4vZmlsZTovVXNlcnMvc21pdmFsL0VvdFRlc3Qvbm9kZV9tb2R1bGVzL0Bub3ZhLWVuZ2luZS9lY3MvbGliL2ZpbGU6L1VzZXJzL3NtaXZhbC9Fb3RUZXN0L25vZGVfbW9kdWxlcy9Abm92YS1lbmdpbmUvZWNzL2xpYi9FbnRpdHkuanMiLCIuLi9maWxlOi9Vc2Vycy9zbWl2YWwvRW90VGVzdC9ub2RlX21vZHVsZXMvQG5vdmEtZW5naW5lL2Vjcy9saWIvZmlsZTovVXNlcnMvc21pdmFsL0VvdFRlc3Qvbm9kZV9tb2R1bGVzL0Bub3ZhLWVuZ2luZS9lY3MvbGliL0ZhbWlseS5qcyIsIi4uL2ZpbGU6L1VzZXJzL3NtaXZhbC9Fb3RUZXN0L25vZGVfbW9kdWxlcy9Abm92YS1lbmdpbmUvZWNzL2ZpbGU6L1VzZXJzL3NtaXZhbC9Fb3RUZXN0L25vZGVfbW9kdWxlcy9Abm92YS1lbmdpbmUvZWNzL2luZGV4LmpzIiwiLi4vZmlsZTovVXNlcnMvc21pdmFsL0VvdFRlc3Qvbm9kZV9tb2R1bGVzL0Bub3ZhLWVuZ2luZS9lY3MvZmlsZTovVXNlcnMvc21pdmFsL0VvdFRlc3Qvbm9kZV9tb2R1bGVzL0Bub3ZhLWVuZ2luZS9lY3MvaW5kZXgubWpzP2Nqcz0mb3JpZ2luYWw9LmpzIiwiLi4vZmlsZTovVXNlcnMvc21pdmFsL0VvdFRlc3Qvbm9kZV9tb2R1bGVzL0Bub3ZhLWVuZ2luZS9lY3MvbGliL2ZpbGU6L1VzZXJzL3NtaXZhbC9Fb3RUZXN0L25vZGVfbW9kdWxlcy9Abm92YS1lbmdpbmUvZWNzL2xpYi9pbmRleC5qcyIsIi4uL2NjZTovaW50ZXJuYWwvY2NlOi9pbnRlcm5hbC9yb2xsdXBQbHVnaW5Nb2RMb0JhYmVsSGVscGVycy5qcyIsIi4uL2ZpbGU6L1VzZXJzL3NtaXZhbC9Fb3RUZXN0L25vZGVfbW9kdWxlcy9Abm92YS1lbmdpbmUvZWNzL2xpYi9maWxlOi9Vc2Vycy9zbWl2YWwvRW90VGVzdC9ub2RlX21vZHVsZXMvQG5vdmEtZW5naW5lL2Vjcy9saWIvU3lzdGVtLmpzIl0sIm5hbWVzIjpbIkNqc0xvYWRlciIsIl9yZWdpc3RyeSIsIl9tb2R1bGVDYWNoZSIsIl9wcm90byIsInByb3RvdHlwZSIsImRlZmluZSIsImlkIiwiZmFjdG9yeSIsInJlc29sdmVNYXAiLCJyZXF1aXJlIiwiX3JlcXVpcmUiLCJ0aHJvd0ludmFsaWRXcmFwcGVyIiwicmVxdWVzdFRhcmdldCIsImZyb20iLCJFcnJvciIsInBhcmVudCIsImNhY2hlZE1vZHVsZSIsImV4cG9ydHMiLCJtb2R1bGUiLCJfdHJ5TW9kdWxlTG9hZCIsIl9yZXNvbHZlIiwic3BlY2lmaWVyIiwiX3Jlc29sdmVGcm9tSW5mb3MiLCJfdGhyb3dVbnJlc29sdmVkIiwiX2Nqc0luZm9zJHBhcmVudCRyZXNvIiwiX2Nqc0luZm9zJHBhcmVudCIsImNqc0luZm9zIiwicmVzb2x2ZUNhY2hlIiwidW5kZWZpbmVkIiwidGhyZXciLCJfbG9hZCIsIl90aGlzJF9sb2FkV3JhcHBlciIsIl9sb2FkV3JhcHBlciIsInZlbmRvclJlcXVpcmUiLCJfY3JlYXRlUmVxdWlyZSIsIl9jcmVhdGVSZXF1aXJlV2l0aFJlc29sdmVNYXAiLCJfbG9hZEhvc3RQcm92aWRlZE1vZHVsZXMiLCJfZXhwb3J0cyIsImVyciIsImNhdXNlIiwiX3RoaXMiLCJyZXF1aXJlTWFwIiwib3JpZ2luYWxSZXF1aXJlIiwicmVzb2x2ZWQiLCJwYXJlbnRVcmwiLCJfX2Nqc01ldGFVUkwiLCJpbXBvcnQiLCJfX2ZpbGVuYW1lIiwiX19kaXJuYW1lIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIkVuZ2luZSIsIl9lbnRpdGllcyIsIl9lbnRpdHlMaXN0ZW5lcnMiLCJfc3lzdGVtcyIsIl9zeXN0ZW1zTmVlZFNvcnRpbmciLCJnZXQiLCJmcmVlemUiLCJzbGljZSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJub3RpZnlQcmlvcml0eUNoYW5nZSIsInN5c3RlbSIsImFkZEVudGl0eUxpc3RlbmVyIiwibGlzdGVuZXIiLCJpbmRleE9mIiwicHVzaCIsInJlbW92ZUVudGl0eUxpc3RlbmVyIiwiaW5kZXgiLCJzcGxpY2UiLCJhZGRFbnRpdHkiLCJlbnRpdHkiLCJfaSIsIl9hIiwibGVuZ3RoIiwib25FbnRpdHlBZGRlZCIsImFkZEVudGl0aWVzIiwiZW50aXRpZXMiLCJhcmd1bWVudHMiLCJlbnRpdGllc18xIiwicmVtb3ZlRW50aXR5Iiwib25FbnRpdHlSZW1vdmVkIiwicmVtb3ZlRW50aXRpZXMiLCJlbnRpdGllc18yIiwiYWRkU3lzdGVtIiwib25BdHRhY2giLCJhZGRTeXN0ZW1zIiwic3lzdGVtcyIsInN5c3RlbXNfMSIsInJlbW92ZVN5c3RlbSIsIm9uRGV0YWNoIiwicmVtb3ZlU3lzdGVtcyIsInN5c3RlbXNfMiIsInVwZGF0ZSIsImRlbHRhIiwic29ydCIsImEiLCJiIiwicHJpb3JpdHkiLCJfX2VzTW9kdWxlIiwiRW50aXR5IiwiX2lkIiwiX2NvbXBvbmVudHMiLCJfbGlzdGVuZXJzIiwiX2NvbXBvbmVudENsYXNzZXMiLCJzZXQiLCJpc05ldyIsImxpc3RDb21wb25lbnRzIiwia2V5cyIsIm1hcCIsImkiLCJsaXN0Q29tcG9uZW50c1dpdGhUeXBlcyIsImNvbXBvbmVudCIsInR5cGUiLCJsaXN0Q29tcG9uZW50c1dpdGhUYWdzIiwidGFnIiwiaGFzQ29tcG9uZW50IiwiY29tcG9uZW50Q2xhc3MiLCJuYW1lIiwiY2FzdCIsImdldENvbXBvbmVudCIsInB1dENvbXBvbmVudCIsIm5ld0NvbXBvbmVudCIsInJlbW92ZUNvbXBvbmVudCIsImFkZExpc3RlbmVyIiwicmVtb3ZlTGlzdGVuZXIiLCJfX2V4dGVuZHMiLCJleHRlbmRTdGF0aWNzIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsImQiLCJwIiwiaGFzT3duUHJvcGVydHkiLCJfXyIsImNvbnN0cnVjdG9yIiwiY3JlYXRlIiwiQWJzdHJhY3RGYW1pbHkiLCJlbmdpbmUiLCJpbmNsdWRlIiwiZXhjbHVkZSIsImluY2x1ZGVzRW50aXR5IiwiX2luY2x1ZGUiLCJfYiIsIl9jIiwiX2V4Y2x1ZGUiLCJfZW5naW5lIiwiQ2FjaGVkRmFtaWx5IiwiX3N1cGVyIiwiY2FsbCIsIm9uRW50aXR5Q2hhbmdlZCIsIl9uZWVkRW50aXR5UmVmcmVzaCIsImFsbEVudGl0aWVzIiwiZmlsdGVyIiwiYWxsRW50aXRpZXNfMSIsImVudGl0eV8xIiwiTm9uQ2FjaGVkRmFtaWx5IiwiYXBwbHkiLCJGYW1pbHlCdWlsZGVyIiwiX2NhY2hlZCIsImNsYXNzZXMiLCJjaGFuZ2VFbmdpbmUiLCJzZXRDYWNoZWQiLCJjYWNoZWQiLCJidWlsZCIsIl9janNFeHBvcnRzIiwiX3JlcSIsInJlcSIsImxvYWRlciIsIl9fZXhwb3J0IiwibSIsIl9yZXEwIiwiX3JlcTEiLCJfcmVxMiIsIl9yZWdlbmVyYXRvclJ1bnRpbWUiLCJlIiwidCIsInIiLCJuIiwibyIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiYyIsImFzeW5jSXRlcmF0b3IiLCJ1IiwidG9TdHJpbmdUYWciLCJ3cml0YWJsZSIsIndyYXAiLCJHZW5lcmF0b3IiLCJDb250ZXh0IiwibWFrZUludm9rZU1ldGhvZCIsInRyeUNhdGNoIiwiYXJnIiwiaCIsImwiLCJmIiwicyIsInkiLCJHZW5lcmF0b3JGdW5jdGlvbiIsIkdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlIiwiZ2V0UHJvdG90eXBlT2YiLCJ2IiwidmFsdWVzIiwiZyIsImRlZmluZUl0ZXJhdG9yTWV0aG9kcyIsImZvckVhY2giLCJfaW52b2tlIiwiQXN5bmNJdGVyYXRvciIsImludm9rZSIsInJlc29sdmUiLCJfX2F3YWl0IiwidGhlbiIsImNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnIiwiZG9uZSIsIm1ldGhvZCIsImRlbGVnYXRlIiwibWF5YmVJbnZva2VEZWxlZ2F0ZSIsInNlbnQiLCJfc2VudCIsImRpc3BhdGNoRXhjZXB0aW9uIiwiYWJydXB0IiwicmV0dXJuIiwiVHlwZUVycm9yIiwicmVzdWx0TmFtZSIsIm5leHQiLCJuZXh0TG9jIiwicHVzaFRyeUVudHJ5IiwidHJ5TG9jIiwiY2F0Y2hMb2MiLCJmaW5hbGx5TG9jIiwiYWZ0ZXJMb2MiLCJ0cnlFbnRyaWVzIiwicmVzZXRUcnlFbnRyeSIsImNvbXBsZXRpb24iLCJyZXNldCIsImlzTmFOIiwiZGlzcGxheU5hbWUiLCJpc0dlbmVyYXRvckZ1bmN0aW9uIiwibWFyayIsImF3cmFwIiwiYXN5bmMiLCJQcm9taXNlIiwicmV2ZXJzZSIsInBvcCIsInByZXYiLCJjaGFyQXQiLCJzdG9wIiwicnZhbCIsImhhbmRsZSIsImNvbXBsZXRlIiwiZmluaXNoIiwiY2F0Y2giLCJkZWxlZ2F0ZVlpZWxkIiwiYXN5bmNHZW5lcmF0b3JTdGVwIiwiZ2VuIiwicmVqZWN0IiwiX25leHQiLCJfdGhyb3ciLCJrZXkiLCJpbmZvIiwiZXJyb3IiLCJfYXN5bmNUb0dlbmVyYXRvciIsImZuIiwic2VsZiIsImFyZ3MiLCJfZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsIl90b1Byb3BlcnR5S2V5IiwiX2NyZWF0ZUNsYXNzIiwiQ29uc3RydWN0b3IiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJfaW5oZXJpdHNMb29zZSIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsIl9zZXRQcm90b3R5cGVPZiIsIl9nZXRQcm90b3R5cGVPZiIsImJpbmQiLCJfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0IiwiUmVmbGVjdCIsImNvbnN0cnVjdCIsInNoYW0iLCJQcm94eSIsIkJvb2xlYW4iLCJ2YWx1ZU9mIiwiX2NvbnN0cnVjdCIsIlBhcmVudCIsIkNsYXNzIiwiRnVuY3Rpb24iLCJpbnN0YW5jZSIsIl9pc05hdGl2ZUZ1bmN0aW9uIiwidG9TdHJpbmciLCJfd3JhcE5hdGl2ZVN1cGVyIiwiX2NhY2hlIiwiTWFwIiwiaGFzIiwiV3JhcHBlciIsIl9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQiLCJSZWZlcmVuY2VFcnJvciIsIl91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSIsIm1pbkxlbiIsIl9hcnJheUxpa2VUb0FycmF5IiwidGVzdCIsImFyciIsImxlbiIsImFycjIiLCJfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlIiwiYWxsb3dBcnJheUxpa2UiLCJpdCIsImlzQXJyYXkiLCJfdG9QcmltaXRpdmUiLCJpbnB1dCIsImhpbnQiLCJwcmltIiwidG9QcmltaXRpdmUiLCJyZXMiLCJTdHJpbmciLCJOdW1iZXIiLCJfaW5pdGlhbGl6ZXJEZWZpbmVQcm9wZXJ0eSIsInByb3BlcnR5IiwiY29udGV4dCIsImluaXRpYWxpemVyIiwiX2FwcGx5RGVjb3JhdGVkRGVzY3JpcHRvciIsImRlY29yYXRvcnMiLCJkZXNjIiwicmVkdWNlIiwiZGVjb3JhdG9yIiwiU3lzdGVtIiwiX3ByaW9yaXR5IiwiX2VuZ2luZXMiXSwibWFwcGluZ3MiOiI7Ozs7VUFBTUEsU0FBUztRQUNYLFNBQUFBLFlBQWM7VUFDVixJQUFJLENBQUNDLFNBQVMsR0FBRyxFQUFFO1VBQ25CLElBQUksQ0FBQ0MsWUFBWSxHQUFHLEVBQUU7Ozs7Ozs7Ozs7UUFHMUIsSUFBQUMsTUFBQSxHQUFBSCxTQUFBLENBQUFJLFNBQUE7UUFBQUQsTUFBQSxDQU9BRSxNQUFNLEdBQU4sU0FBQUEsT0FBT0MsRUFBRSxFQUFFQyxPQUFPLEVBQUVDLFVBQVUsRUFBRTtVQUM1QixJQUFJLENBQUNQLFNBQVMsQ0FBQ0ssRUFBRSxDQUFDLEdBQUc7WUFDakJDLE9BQU8sRUFBUEEsT0FBTztZQUNQQyxVQUFVLEVBQVZBO1dBQ0g7Ozs7Ozs7O1FBR0xMLE1BQUEsQ0FLQU0sT0FBTyxHQUFQLFNBQUFBLFFBQVFILEVBQUUs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RixRQUFRLEdBQUcsVUFBVWdELE1BQU0sRUFBRTtZQUMxQyxJQUFJdEUsS0FBSyxHQUFHLElBQUksQ0FBQ3VRLFFBQVEsQ0FBQzFRLE9BQU8sQ0FBQ3lFLE1BQU0sQ0FBQztZQUN6QyxJQUFJdEUsS0FBSyxLQUFLLENBQUMsQ0FBQyxFQUFFO2NBQ2QsSUFBSSxDQUFDdVEsUUFBUSxDQUFDdFEsTUFBTSxDQUFDRCxLQUFLLEVBQUUsQ0FBQyxDQUFDOztXQUVyQztVQUNELE9BQU9xUSxNQUFNO1NBQ2hCLEVBQUc7UUFDSnpULE9BQU8sQ0FBQ3lULE1BQU0sR0FBR0EsTUFBTTs7OztRQUtWeFQsTUFBTSxDQUFDRCxPQUFPO1FBQ2RDLE1BQU0sQ0FBQ0QsT0FBTyxDQUFDbUYsVUFBVTtRQUM3QmxGLE1BQU0sQ0FBQ0QsT0FBTyxDQUFDeVQsTUFBTTtNQUUvQixDQUFDLEVBQUUsRUFBRSxDQUFDIiwiZmlsZSI6ImFsbC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIENqc0xvYWRlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuX3JlZ2lzdHJ5ID0ge307XG4gICAgICAgIHRoaXMuX21vZHVsZUNhY2hlID0ge307XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVmaW5lcyBhIENvbW1vbkpTIG1vZHVsZS5cbiAgICAgKiBAcGFyYW0gaWQgTW9kdWxlIElELlxuICAgICAqIEBwYXJhbSBmYWN0b3J5IFRoZSBmYWN0b3J5LlxuICAgICAqIEBwYXJhbSByZXNvbHZlTWFwIEFuIG9iamVjdCBvciBhIGZ1bmN0aW9uIHJldHVybmluZyBvYmplY3Qgd2hpY2ggcmVjb3JkcyB0aGUgbW9kdWxlIHNwZWNpZmllciByZXNvbHZlIHJlc3VsdC5cbiAgICAgKiBUaGUgbGF0ZXIgaXMgY2FsbGVkIGFzIFwiZGVmZXJyZWQgcmVzb2x2ZSBtYXBcIiBhbmQgd291bGQgYmUgaW52b2NhdGVkIHJpZ2h0IGJlZm9yZSBDb21tb25KUyBjb2RlIGV4ZWN1dGlvbi5cbiAgICAgKi9cbiAgICBkZWZpbmUoaWQsIGZhY3RvcnksIHJlc29sdmVNYXApIHtcbiAgICAgICAgdGhpcy5fcmVnaXN0cnlbaWRdID0ge1xuICAgICAgICAgICAgZmFjdG9yeSxcbiAgICAgICAgICAgIHJlc29sdmVNYXAsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVxdWlyZXMgYSBDb21tb25KUyBtb2R1bGUuXG4gICAgICogQHBhcmFtIGlkIE1vZHVsZSBJRC5cbiAgICAgKiBAcmV0dXJucyBUaGUgbW9kdWxlJ3MgYG1vZHVsZS5leHBvcnRzYC5cbiAgICAgKi9cbiAgICByZXF1aXJlKGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1aXJlKGlkKTtcbiAgICB9XG5cbiAgICB0aHJvd0ludmFsaWRXcmFwcGVyKHJlcXVlc3RUYXJnZXQsIGZyb20pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNb2R1bGUgJyR7cmVxdWVzdFRhcmdldH0nIGltcG9ydGVkIGZyb20gJyR7ZnJvbX0nIGlzIGV4cGVjdGVkIGJlIGFuIEVTTS13cmFwcGVkIENvbW1vbkpTIG1vZHVsZSBidXQgaXQgZG9lc24ndC5gKTtcbiAgICB9XG5cbiAgICBfcmVxdWlyZShpZCwgcGFyZW50KSB7XG4gICAgICAgIGNvbnN0IGNhY2hlZE1vZHVsZSA9IHRoaXMuX21vZHVsZUNhY2hlW2lkXTtcbiAgICAgICAgaWYgKGNhY2hlZE1vZHVsZSkge1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbW9kdWxlID0geyBpZCwgZXhwb3J0czoge30gfTtcbiAgICAgICAgdGhpcy5fbW9kdWxlQ2FjaGVbaWRdID0gbW9kdWxlO1xuICAgICAgICB0aGlzLl90cnlNb2R1bGVMb2FkKG1vZHVsZSwgaWQpO1xuICAgICAgICByZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gICAgfVxuXG4gICAgX3Jlc29sdmUoc3BlY2lmaWVyLCBwYXJlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc29sdmVGcm9tSW5mb3Moc3BlY2lmaWVyLCBwYXJlbnQpIHx8IHRoaXMuX3Rocm93VW5yZXNvbHZlZChzcGVjaWZpZXIsIHBhcmVudCk7XG4gICAgfVxuXG4gICAgX3Jlc29sdmVGcm9tSW5mb3Moc3BlY2lmaWVyLCBwYXJlbnQpIHtcbiAgICAgICAgaWYgKHNwZWNpZmllciBpbiBjanNJbmZvcykge1xuICAgICAgICAgICAgcmV0dXJuIHNwZWNpZmllcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXBhcmVudCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjanNJbmZvc1twYXJlbnRdPy5yZXNvbHZlQ2FjaGVbc3BlY2lmaWVyXSA/PyB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgX3RyeU1vZHVsZUxvYWQobW9kdWxlLCBpZCkge1xuICAgICAgICBsZXQgdGhyZXcgPSB0cnVlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5fbG9hZChtb2R1bGUsIGlkKTtcbiAgICAgICAgICAgIHRocmV3ID0gZmFsc2U7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBpZiAodGhyZXcpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fbW9kdWxlQ2FjaGVbaWRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2xvYWQobW9kdWxlLCBpZCkge1xuICAgICAgICBjb25zdCB7IGZhY3RvcnksIHJlc29sdmVNYXAgfSA9IHRoaXMuX2xvYWRXcmFwcGVyKGlkKTtcbiAgICAgICAgY29uc3QgdmVuZG9yUmVxdWlyZSA9IHRoaXMuX2NyZWF0ZVJlcXVpcmUobW9kdWxlKTtcbiAgICAgICAgY29uc3QgcmVxdWlyZSA9IHJlc29sdmVNYXBcbiAgICAgICAgICAgID8gdGhpcy5fY3JlYXRlUmVxdWlyZVdpdGhSZXNvbHZlTWFwKHR5cGVvZiByZXNvbHZlTWFwID09PSAnZnVuY3Rpb24nID8gcmVzb2x2ZU1hcCgpIDogcmVzb2x2ZU1hcCwgdmVuZG9yUmVxdWlyZSlcbiAgICAgICAgICAgIDogdmVuZG9yUmVxdWlyZTtcbiAgICAgICAgZmFjdG9yeShtb2R1bGUuZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlKTtcbiAgICB9XG5cbiAgICBfbG9hZFdyYXBwZXIoaWQpIHtcbiAgICAgICAgaWYgKGlkIGluIHRoaXMuX3JlZ2lzdHJ5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVnaXN0cnlbaWRdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xvYWRIb3N0UHJvdmlkZWRNb2R1bGVzKGlkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9sb2FkSG9zdFByb3ZpZGVkTW9kdWxlcyhpZCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmFjdG9yeTogKF9leHBvcnRzLCBfcmVxdWlyZSwgbW9kdWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZXF1aXJlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEN1cnJlbnQgZW52aXJvbm1lbnQgZG9lcyBub3QgcHJvdmlkZSBhIHJlcXVpcmUoKSBmb3IgcmVxdWlyaW5nICcke2lkfScuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShpZCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhjZXB0aW9uIHRocm93biB3aGVuIGNhbGxpbmcgaG9zdCBkZWZpbmVkIHJlcXVpcmUoJyR7aWR9JykuYCwgeyBjYXVzZTogZXJyIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgX2NyZWF0ZVJlcXVpcmUobW9kdWxlKSB7XG4gICAgICAgIHJldHVybiAoc3BlY2lmaWVyKSA9PiB0aGlzLl9yZXF1aXJlKHNwZWNpZmllciwgbW9kdWxlKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlUmVxdWlyZVdpdGhSZXNvbHZlTWFwKHJlcXVpcmVNYXAsIG9yaWdpbmFsUmVxdWlyZSkge1xuICAgICAgICByZXR1cm4gKHNwZWNpZmllcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzb2x2ZWQgPSByZXF1aXJlTWFwW3NwZWNpZmllcl07XG4gICAgICAgICAgICBpZiAocmVzb2x2ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxSZXF1aXJlKHJlc29sdmVkKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnJlc29sdmVkIHNwZWNpZmllciAnICsgc3BlY2lmaWVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBfdGhyb3dVbnJlc29sdmVkKHNwZWNpZmllciwgcGFyZW50VXJsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIHJlc29sdmUgJHtzcGVjaWZpZXJ9IGZyb20gJHtwYXJlbnR9LmApO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IENqc0xvYWRlcigpO1xuIiwiaW1wb3J0IF9janNMb2FkZXIgZnJvbSAnY2NlOi9pbnRlcm5hbC9tbC9janMtbG9hZGVyLm1qcyc7XG5sZXQgX2Nqc0V4cG9ydHM7XG5sZXQgX19fZXNNb2R1bGU7XG5sZXQgX0VuZ2luZTtcbmNvbnN0IF9fY2pzTWV0YVVSTCA9IGltcG9ydC5tZXRhLnVybDtcbl9janNMb2FkZXIuZGVmaW5lKF9fY2pzTWV0YVVSTCwgZnVuY3Rpb24gKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSwgX19maWxlbmFtZSwgX19kaXJuYW1lKSB7XG4vLyAjcmVnaW9uIE9SSUdJTkFMIENPREVcblxuXG4gXCJ1c2Ugc3RyaWN0XCI7XHJcbiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbiB2YXIgRW5naW5lID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICBmdW5jdGlvbiBFbmdpbmUoKSB7XHJcbiAgICAgICAgIHRoaXMuX2VudGl0aWVzID0gW107XHJcbiAgICAgICAgIHRoaXMuX2VudGl0eUxpc3RlbmVycyA9IFtdO1xyXG4gICAgICAgICB0aGlzLl9zeXN0ZW1zID0gW107XHJcbiAgICAgICAgIHRoaXMuX3N5c3RlbXNOZWVkU29ydGluZyA9IGZhbHNlO1xyXG4gICAgIH1cclxuICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRW5naW5lLnByb3RvdHlwZSwgXCJlbnRpdGllc1wiLCB7XHJcbiAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5mcmVlemUodGhpcy5fZW50aXRpZXMuc2xpY2UoMCkpO1xyXG4gICAgICAgICB9LFxyXG4gICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICB9KTtcclxuICAgICBFbmdpbmUucHJvdG90eXBlLm5vdGlmeVByaW9yaXR5Q2hhbmdlID0gZnVuY3Rpb24gKHN5c3RlbSkge1xyXG4gICAgICAgICB0aGlzLl9zeXN0ZW1zTmVlZFNvcnRpbmcgPSB0cnVlO1xyXG4gICAgIH07XHJcbiAgICAgRW5naW5lLnByb3RvdHlwZS5hZGRFbnRpdHlMaXN0ZW5lciA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xyXG4gICAgICAgICBpZiAodGhpcy5fZW50aXR5TGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgdGhpcy5fZW50aXR5TGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgIH07XHJcbiAgICAgRW5naW5lLnByb3RvdHlwZS5yZW1vdmVFbnRpdHlMaXN0ZW5lciA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xyXG4gICAgICAgICB2YXIgaW5kZXggPSB0aGlzLl9lbnRpdHlMaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XHJcbiAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgIHRoaXMuX2VudGl0eUxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgIH07XHJcbiAgICAgRW5naW5lLnByb3RvdHlwZS5hZGRFbnRpdHkgPSBmdW5jdGlvbiAoZW50aXR5KSB7XHJcbiAgICAgICAgIGlmICh0aGlzLl9lbnRpdGllcy5pbmRleE9mKGVudGl0eSkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICB0aGlzLl9lbnRpdGllcy5wdXNoKGVudGl0eSk7XHJcbiAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5fZW50aXR5TGlzdGVuZXJzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgIHZhciBsaXN0ZW5lciA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgICBsaXN0ZW5lci5vbkVudGl0eUFkZGVkKGVudGl0eSk7XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgfTtcclxuICAgICBFbmdpbmUucHJvdG90eXBlLmFkZEVudGl0aWVzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICB2YXIgZW50aXRpZXMgPSBbXTtcclxuICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgIGVudGl0aWVzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgZm9yICh2YXIgX2EgPSAwLCBlbnRpdGllc18xID0gZW50aXRpZXM7IF9hIDwgZW50aXRpZXNfMS5sZW5ndGg7IF9hKyspIHtcclxuICAgICAgICAgICAgIHZhciBlbnRpdHkgPSBlbnRpdGllc18xW19hXTtcclxuICAgICAgICAgICAgIHRoaXMuYWRkRW50aXR5KGVudGl0eSk7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgfTtcclxuICAgICBFbmdpbmUucHJvdG90eXBlLnJlbW92ZUVudGl0eSA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcclxuICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5fZW50aXRpZXMuaW5kZXhPZihlbnRpdHkpO1xyXG4gICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgICAgICB0aGlzLl9lbnRpdGllcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuX2VudGl0eUxpc3RlbmVyczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgICB2YXIgbGlzdGVuZXIgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICAgbGlzdGVuZXIub25FbnRpdHlSZW1vdmVkKGVudGl0eSk7XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgIH1cclxuICAgICB9O1xyXG4gICAgIEVuZ2luZS5wcm90b3R5cGUucmVtb3ZlRW50aXRpZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgIHZhciBlbnRpdGllcyA9IFtdO1xyXG4gICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgZW50aXRpZXNbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICBmb3IgKHZhciBfYSA9IDAsIGVudGl0aWVzXzIgPSBlbnRpdGllczsgX2EgPCBlbnRpdGllc18yLmxlbmd0aDsgX2ErKykge1xyXG4gICAgICAgICAgICAgdmFyIGVudGl0eSA9IGVudGl0aWVzXzJbX2FdO1xyXG4gICAgICAgICAgICAgdGhpcy5yZW1vdmVFbnRpdHkoZW50aXR5KTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICB9O1xyXG4gICAgIEVuZ2luZS5wcm90b3R5cGUuYWRkU3lzdGVtID0gZnVuY3Rpb24gKHN5c3RlbSkge1xyXG4gICAgICAgICB2YXIgaW5kZXggPSB0aGlzLl9zeXN0ZW1zLmluZGV4T2Yoc3lzdGVtKTtcclxuICAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xyXG4gICAgICAgICAgICAgdGhpcy5fc3lzdGVtcy5wdXNoKHN5c3RlbSk7XHJcbiAgICAgICAgICAgICBzeXN0ZW0ub25BdHRhY2godGhpcyk7XHJcbiAgICAgICAgICAgICB0aGlzLl9zeXN0ZW1zTmVlZFNvcnRpbmcgPSB0cnVlO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgIH07XHJcbiAgICAgRW5naW5lLnByb3RvdHlwZS5hZGRTeXN0ZW1zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICB2YXIgc3lzdGVtcyA9IFtdO1xyXG4gICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgc3lzdGVtc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGZvciAodmFyIF9hID0gMCwgc3lzdGVtc18xID0gc3lzdGVtczsgX2EgPCBzeXN0ZW1zXzEubGVuZ3RoOyBfYSsrKSB7XHJcbiAgICAgICAgICAgICB2YXIgc3lzdGVtID0gc3lzdGVtc18xW19hXTtcclxuICAgICAgICAgICAgIHRoaXMuYWRkU3lzdGVtKHN5c3RlbSk7XHJcbiAgICAgICAgIH1cclxuICAgICB9O1xyXG4gICAgIEVuZ2luZS5wcm90b3R5cGUucmVtb3ZlU3lzdGVtID0gZnVuY3Rpb24gKHN5c3RlbSkge1xyXG4gICAgICAgICB2YXIgaW5kZXggPSB0aGlzLl9zeXN0ZW1zLmluZGV4T2Yoc3lzdGVtKTtcclxuICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgdGhpcy5fc3lzdGVtcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgc3lzdGVtLm9uRGV0YWNoKHRoaXMpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgIH07XHJcbiAgICAgRW5naW5lLnByb3RvdHlwZS5yZW1vdmVTeXN0ZW1zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICB2YXIgc3lzdGVtcyA9IFtdO1xyXG4gICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgc3lzdGVtc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGZvciAodmFyIF9hID0gMCwgc3lzdGVtc18yID0gc3lzdGVtczsgX2EgPCBzeXN0ZW1zXzIubGVuZ3RoOyBfYSsrKSB7XHJcbiAgICAgICAgICAgICB2YXIgc3lzdGVtID0gc3lzdGVtc18yW19hXTtcclxuICAgICAgICAgICAgIHRoaXMucmVtb3ZlU3lzdGVtKHN5c3RlbSk7XHJcbiAgICAgICAgIH1cclxuICAgICB9O1xyXG4gICAgIEVuZ2luZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGRlbHRhKSB7XHJcbiAgICAgICAgIGlmICh0aGlzLl9zeXN0ZW1zTmVlZFNvcnRpbmcpIHtcclxuICAgICAgICAgICAgIHRoaXMuX3N5c3RlbXNOZWVkU29ydGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgdGhpcy5fc3lzdGVtcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhLnByaW9yaXR5IC0gYi5wcmlvcml0eTsgfSk7XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuX3N5c3RlbXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICB2YXIgc3lzdGVtID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgc3lzdGVtLnVwZGF0ZSh0aGlzLCBkZWx0YSk7XHJcbiAgICAgICAgIH1cclxuICAgICB9O1xyXG4gICAgIHJldHVybiBFbmdpbmU7XHJcbiB9KCkpO1xyXG4gZXhwb3J0cy5FbmdpbmUgPSBFbmdpbmU7XHJcbiAvLyMgc291cmNlTWFwcGluZ1VSTD1FbmdpbmUuanMubWFwXG5cbi8vICNlbmRyZWdpb24gT1JJR0lOQUwgQ09ERVxuXG5fY2pzRXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzO1xuX19fZXNNb2R1bGUgPSBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlO1xuX0VuZ2luZSA9IG1vZHVsZS5leHBvcnRzLkVuZ2luZTtcblxufSwge30pO1xuZXhwb3J0IHsgX2Nqc0V4cG9ydHMgYXMgZGVmYXVsdCB9O1xuZXhwb3J0IHsgX19janNNZXRhVVJMIH1cbiIsImltcG9ydCBfY2pzTG9hZGVyIGZyb20gJ2NjZTovaW50ZXJuYWwvbWwvY2pzLWxvYWRlci5tanMnO1xubGV0IF9janNFeHBvcnRzO1xubGV0IF9fX2VzTW9kdWxlO1xubGV0IF9FbnRpdHk7XG5jb25zdCBfX2Nqc01ldGFVUkwgPSBpbXBvcnQubWV0YS51cmw7XG5fY2pzTG9hZGVyLmRlZmluZShfX2Nqc01ldGFVUkwsIGZ1bmN0aW9uIChleHBvcnRzLCByZXF1aXJlLCBtb2R1bGUsIF9fZmlsZW5hbWUsIF9fZGlybmFtZSkge1xuLy8gI3JlZ2lvbiBPUklHSU5BTCBDT0RFXG5cblxuIFwidXNlIHN0cmljdFwiO1xyXG4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4gdmFyIEVudGl0eSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICAgZnVuY3Rpb24gRW50aXR5KCkge1xyXG4gICAgICAgICB0aGlzLl9pZCA9IG51bGw7XHJcbiAgICAgICAgIHRoaXMuX2NvbXBvbmVudHMgPSB7fTtcclxuICAgICAgICAgdGhpcy5fbGlzdGVuZXJzID0gW107XHJcbiAgICAgICAgIHRoaXMuX2NvbXBvbmVudENsYXNzZXMgPSB7fTtcclxuICAgICB9XHJcbiAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEVudGl0eS5wcm90b3R5cGUsIFwiaWRcIiwge1xyXG4gICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgIGlmICh0aGlzLl9pZCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCByZXRyaWV2ZSBhbiBJRCB3aGVuIGlzIG51bGwuXCIpO1xyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lkO1xyXG4gICAgICAgICB9LFxyXG4gICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IHNldCBhIG5vbiBudWxsIHZhbHVlIHdoZW4gc2V0dGluZyBhbiBlbnRpdHkgaWQuXCIpO1xyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgaWYgKHRoaXMuX2lkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRW50aXR5IGlkIGlzIGFscmVhZHkgc2V0IGFzIFxcXCJcIiArIHRoaXMuX2lkICsgXCJcXFwiLlwiKTtcclxuICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgIHRoaXMuX2lkID0gdmFsdWU7XHJcbiAgICAgICAgIH0sXHJcbiAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgIH0pO1xyXG4gICAgIEVudGl0eS5wcm90b3R5cGUuaXNOZXcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgIHJldHVybiB0aGlzLl9pZCA9PT0gbnVsbDtcclxuICAgICB9O1xyXG4gICAgIEVudGl0eS5wcm90b3R5cGUubGlzdENvbXBvbmVudHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLl9jb21wb25lbnRzKS5tYXAoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIF90aGlzLl9jb21wb25lbnRzW2ldOyB9KTtcclxuICAgICB9O1xyXG4gICAgIEVudGl0eS5wcm90b3R5cGUubGlzdENvbXBvbmVudHNXaXRoVHlwZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLl9jb21wb25lbnRzKS5tYXAoZnVuY3Rpb24gKGkpIHsgcmV0dXJuICh7XHJcbiAgICAgICAgICAgICBjb21wb25lbnQ6IF90aGlzLl9jb21wb25lbnRzW2ldLFxyXG4gICAgICAgICAgICAgdHlwZTogX3RoaXMuX2NvbXBvbmVudENsYXNzZXNbaV1cclxuICAgICAgICAgfSk7IH0pO1xyXG4gICAgIH07XHJcbiAgICAgRW50aXR5LnByb3RvdHlwZS5saXN0Q29tcG9uZW50c1dpdGhUYWdzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5fY29tcG9uZW50cykubWFwKGZ1bmN0aW9uICh0YWcpIHtcclxuICAgICAgICAgICAgIHJldHVybiBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgICAgICB0YWc6IHRhZyxcclxuICAgICAgICAgICAgICAgICBjb21wb25lbnQ6IF90aGlzLl9jb21wb25lbnRzW3RhZ11cclxuICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICB9KTtcclxuICAgICB9O1xyXG4gICAgIEVudGl0eS5wcm90b3R5cGUuaGFzQ29tcG9uZW50ID0gZnVuY3Rpb24gKGNvbXBvbmVudENsYXNzKSB7XHJcbiAgICAgICAgIHZhciB0YWcgPSBjb21wb25lbnRDbGFzcy50YWcgfHwgY29tcG9uZW50Q2xhc3MubmFtZTtcclxuICAgICAgICAgdmFyIGNvbXBvbmVudCA9IHRoaXMuX2NvbXBvbmVudHNbdGFnXTtcclxuICAgICAgICAgaWYgKCFjb21wb25lbnQpXHJcbiAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgIGlmICghdGhpcy5jYXN0KGNvbXBvbmVudCwgY29tcG9uZW50Q2xhc3MpKSB7XHJcbiAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGVyZSBhcmUgbXVsdGlwbGUgY2xhc3NlcyB3aXRoIHRoZSBzYW1lIHRhZyBvciBuYW1lIFxcXCJcIiArIHRhZyArIFwiXFxcIi5cXG5BZGQgYSBkaWZmZXJlbnQgcHJvcGVydHkgXFxcInRhZ1xcXCIgdG8gb25lIG9mIHRoZW0uXCIpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgIH07XHJcbiAgICAgRW50aXR5LnByb3RvdHlwZS5nZXRDb21wb25lbnQgPSBmdW5jdGlvbiAoY29tcG9uZW50Q2xhc3MpIHtcclxuICAgICAgICAgdmFyIHRhZyA9IGNvbXBvbmVudENsYXNzLnRhZyB8fCBjb21wb25lbnRDbGFzcy5uYW1lO1xyXG4gICAgICAgICB2YXIgY29tcG9uZW50ID0gdGhpcy5fY29tcG9uZW50c1t0YWddO1xyXG4gICAgICAgICBpZiAoIWNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGdldCBjb21wb25lbnQgXFxcIlwiICsgdGFnICsgXCJcXFwiIGZyb20gZW50aXR5LlwiKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICBpZiAoIXRoaXMuY2FzdChjb21wb25lbnQsIGNvbXBvbmVudENsYXNzKSkge1xyXG4gICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlcmUgYXJlIG11bHRpcGxlIGNsYXNzZXMgd2l0aCB0aGUgc2FtZSB0YWcgb3IgbmFtZSBcXFwiXCIgKyB0YWcgKyBcIlxcXCIuXFxuQWRkIGEgZGlmZmVyZW50IHByb3BlcnR5IFxcXCJ0YWdcXFwiIHRvIG9uZSBvZiB0aGVtLlwiKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICByZXR1cm4gY29tcG9uZW50O1xyXG4gICAgIH07XHJcbiAgICAgRW50aXR5LnByb3RvdHlwZS5wdXRDb21wb25lbnQgPSBmdW5jdGlvbiAoY29tcG9uZW50Q2xhc3MpIHtcclxuICAgICAgICAgdmFyIHRhZyA9IGNvbXBvbmVudENsYXNzLnRhZyB8fCBjb21wb25lbnRDbGFzcy5uYW1lO1xyXG4gICAgICAgICB2YXIgY29tcG9uZW50ID0gdGhpcy5fY29tcG9uZW50c1t0YWddO1xyXG4gICAgICAgICBpZiAoY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgICBpZiAoIXRoaXMuY2FzdChjb21wb25lbnQsIGNvbXBvbmVudENsYXNzKSkge1xyXG4gICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZXJlIGFyZSBtdWx0aXBsZSBjbGFzc2VzIHdpdGggdGhlIHNhbWUgdGFnIG9yIG5hbWUgXFxcIlwiICsgdGFnICsgXCJcXFwiLlxcbkFkZCBhIGRpZmZlcmVudCBwcm9wZXJ0eSBcXFwidGFnXFxcIiB0byBvbmUgb2YgdGhlbS5cIik7XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICBkZWxldGUgdGhpcy5fY29tcG9uZW50c1t0YWddO1xyXG4gICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2NvbXBvbmVudENsYXNzZXNbdGFnXTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICB2YXIgbmV3Q29tcG9uZW50ID0gbmV3IGNvbXBvbmVudENsYXNzKCk7XHJcbiAgICAgICAgIHRoaXMuX2NvbXBvbmVudHNbdGFnXSA9IG5ld0NvbXBvbmVudDtcclxuICAgICAgICAgdGhpcy5fY29tcG9uZW50Q2xhc3Nlc1t0YWddID0gY29tcG9uZW50Q2xhc3M7XHJcbiAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLl9saXN0ZW5lcnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICB2YXIgbGlzdGVuZXIgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICBsaXN0ZW5lcih0aGlzKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICByZXR1cm4gbmV3Q29tcG9uZW50O1xyXG4gICAgIH07XHJcbiAgICAgRW50aXR5LnByb3RvdHlwZS5yZW1vdmVDb21wb25lbnQgPSBmdW5jdGlvbiAoY29tcG9uZW50Q2xhc3MpIHtcclxuICAgICAgICAgdmFyIHRhZyA9IGNvbXBvbmVudENsYXNzLnRhZyB8fCBjb21wb25lbnRDbGFzcy5uYW1lO1xyXG4gICAgICAgICB2YXIgY29tcG9uZW50ID0gdGhpcy5fY29tcG9uZW50c1t0YWddO1xyXG4gICAgICAgICBpZiAoIWNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29tcG9uZW50IG9mIHRhZyBcXFwiXCIgKyB0YWcgKyBcIlxcXCIuXFxuRG9lcyBub3QgZXhpc3RzLlwiKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICBpZiAoIXRoaXMuY2FzdChjb21wb25lbnQsIGNvbXBvbmVudENsYXNzKSkge1xyXG4gICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlcmUgYXJlIG11bHRpcGxlIGNsYXNzZXMgd2l0aCB0aGUgc2FtZSB0YWcgb3IgbmFtZSBcXFwiXCIgKyB0YWcgKyBcIlxcXCIuXFxuQWRkIGEgZGlmZmVyZW50IHByb3BlcnR5IFxcXCJ0YWdcXFwiIHRvIG9uZSBvZiB0aGVtLlwiKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICBkZWxldGUgdGhpcy5fY29tcG9uZW50c1t0YWddO1xyXG4gICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5fbGlzdGVuZXJzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgdmFyIGxpc3RlbmVyID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgbGlzdGVuZXIodGhpcyk7XHJcbiAgICAgICAgIH1cclxuICAgICB9O1xyXG4gICAgIEVudGl0eS5wcm90b3R5cGUuY2FzdCA9IGZ1bmN0aW9uIChjb21wb25lbnQsIGNvbXBvbmVudENsYXNzKSB7XHJcbiAgICAgICAgIHJldHVybiAhIShjb21wb25lbnQgJiYgY29tcG9uZW50IGluc3RhbmNlb2YgY29tcG9uZW50Q2xhc3MpO1xyXG4gICAgIH07XHJcbiAgICAgRW50aXR5LnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uIChsaXN0ZW5lcikge1xyXG4gICAgICAgICB2YXIgaW5kZXggPSB0aGlzLl9saXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XHJcbiAgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgIHRoaXMuX2xpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICB9O1xyXG4gICAgIEVudGl0eS5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbiAobGlzdGVuZXIpIHtcclxuICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5fbGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xyXG4gICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgICAgICB0aGlzLl9saXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICB9O1xyXG4gICAgIHJldHVybiBFbnRpdHk7XHJcbiB9KCkpO1xyXG4gZXhwb3J0cy5FbnRpdHkgPSBFbnRpdHk7XHJcbiAvLyMgc291cmNlTWFwcGluZ1VSTD1FbnRpdHkuanMubWFwXG5cbi8vICNlbmRyZWdpb24gT1JJR0lOQUwgQ09ERVxuXG5fY2pzRXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzO1xuX19fZXNNb2R1bGUgPSBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlO1xuX0VudGl0eSA9IG1vZHVsZS5leHBvcnRzLkVudGl0eTtcblxufSwge30pO1xuZXhwb3J0IHsgX2Nqc0V4cG9ydHMgYXMgZGVmYXVsdCB9O1xuZXhwb3J0IHsgX19janNNZXRhVVJMIH1cbiIsImltcG9ydCBfY2pzTG9hZGVyIGZyb20gJ2NjZTovaW50ZXJuYWwvbWwvY2pzLWxvYWRlci5tanMnO1xubGV0IF9janNFeHBvcnRzO1xubGV0IF9fX2VzTW9kdWxlO1xubGV0IF9GYW1pbHlCdWlsZGVyO1xuY29uc3QgX19janNNZXRhVVJMID0gaW1wb3J0Lm1ldGEudXJsO1xuX2Nqc0xvYWRlci5kZWZpbmUoX19janNNZXRhVVJMLCBmdW5jdGlvbiAoZXhwb3J0cywgcmVxdWlyZSwgbW9kdWxlLCBfX2ZpbGVuYW1lLCBfX2Rpcm5hbWUpIHtcbi8vICNyZWdpb24gT1JJR0lOQUwgQ09ERVxuXG5cbiBcInVzZSBzdHJpY3RcIjtcclxuIHZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgIH07XHJcbiB9KSgpO1xyXG4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4gdmFyIEFic3RyYWN0RmFtaWx5ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICBmdW5jdGlvbiBBYnN0cmFjdEZhbWlseShlbmdpbmUsIGluY2x1ZGUsIGV4Y2x1ZGUpIHtcclxuICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgdGhpcy5pbmNsdWRlc0VudGl0eSA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcclxuICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBfdGhpcy5faW5jbHVkZTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgICB2YXIgaW5jbHVkZSA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgICBpZiAoIWVudGl0eS5oYXNDb21wb25lbnQoaW5jbHVkZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgIGZvciAodmFyIF9iID0gMCwgX2MgPSBfdGhpcy5fZXhjbHVkZTsgX2IgPCBfYy5sZW5ndGg7IF9iKyspIHtcclxuICAgICAgICAgICAgICAgICB2YXIgZXhjbHVkZSA9IF9jW19iXTtcclxuICAgICAgICAgICAgICAgICBpZiAoZW50aXR5Lmhhc0NvbXBvbmVudChleGNsdWRlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgIH07XHJcbiAgICAgICAgIHRoaXMuX2VuZ2luZSA9IGVuZ2luZTtcclxuICAgICAgICAgdGhpcy5faW5jbHVkZSA9IE9iamVjdC5mcmVlemUoaW5jbHVkZS5zbGljZSgwKSk7XHJcbiAgICAgICAgIHRoaXMuX2V4Y2x1ZGUgPSBPYmplY3QuZnJlZXplKGV4Y2x1ZGUuc2xpY2UoMCkpO1xyXG4gICAgIH1cclxuICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQWJzdHJhY3RGYW1pbHkucHJvdG90eXBlLCBcImVuZ2luZVwiLCB7XHJcbiAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZTtcclxuICAgICAgICAgfSxcclxuICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgfSk7XHJcbiAgICAgcmV0dXJuIEFic3RyYWN0RmFtaWx5O1xyXG4gfSgpKTtcclxuIHZhciBDYWNoZWRGYW1pbHkgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgIF9fZXh0ZW5kcyhDYWNoZWRGYW1pbHksIF9zdXBlcik7XHJcbiAgICAgZnVuY3Rpb24gQ2FjaGVkRmFtaWx5KGVuZ2luZSwgaW5jbHVkZSwgZXhjbHVkZSkge1xyXG4gICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBlbmdpbmUsIGluY2x1ZGUsIGV4Y2x1ZGUpIHx8IHRoaXM7XHJcbiAgICAgICAgIF90aGlzLm9uRW50aXR5Q2hhbmdlZCA9IGZ1bmN0aW9uIChlbnRpdHkpIHtcclxuICAgICAgICAgICAgIHZhciBpbmRleCA9IF90aGlzLl9lbnRpdGllcy5pbmRleE9mKGVudGl0eSk7XHJcbiAgICAgICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgX3RoaXMuX2VudGl0aWVzLnB1c2goZW50aXR5KTtcclxuICAgICAgICAgICAgICAgICBlbnRpdHkuYWRkTGlzdGVuZXIoX3RoaXMub25FbnRpdHlDaGFuZ2VkKTtcclxuICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgIF90aGlzLl9uZWVkRW50aXR5UmVmcmVzaCA9IHRydWU7XHJcbiAgICAgICAgIH07XHJcbiAgICAgICAgIHZhciBhbGxFbnRpdGllcyA9IF90aGlzLmVuZ2luZS5lbnRpdGllcztcclxuICAgICAgICAgX3RoaXMuX2VudGl0aWVzID0gYWxsRW50aXRpZXMuZmlsdGVyKF90aGlzLmluY2x1ZGVzRW50aXR5KTtcclxuICAgICAgICAgX3RoaXMuZW5naW5lLmFkZEVudGl0eUxpc3RlbmVyKF90aGlzKTtcclxuICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBhbGxFbnRpdGllc18xID0gYWxsRW50aXRpZXM7IF9pIDwgYWxsRW50aXRpZXNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgIHZhciBlbnRpdHkgPSBhbGxFbnRpdGllc18xW19pXTtcclxuICAgICAgICAgICAgIGVudGl0eS5hZGRMaXN0ZW5lcihfdGhpcy5vbkVudGl0eUFkZGVkKTtcclxuICAgICAgICAgfVxyXG4gICAgICAgICBfdGhpcy5fbmVlZEVudGl0eVJlZnJlc2ggPSBmYWxzZTtcclxuICAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgIH1cclxuICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2FjaGVkRmFtaWx5LnByb3RvdHlwZSwgXCJlbnRpdGllc1wiLCB7XHJcbiAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgaWYgKHRoaXMuX25lZWRFbnRpdHlSZWZyZXNoKSB7XHJcbiAgICAgICAgICAgICAgICAgdGhpcy5fbmVlZEVudGl0eVJlZnJlc2ggPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICB0aGlzLl9lbnRpdGllcyA9IHRoaXMuX2VudGl0aWVzLmZpbHRlcih0aGlzLmluY2x1ZGVzRW50aXR5KTtcclxuICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgIHJldHVybiBPYmplY3QuZnJlZXplKHRoaXMuX2VudGl0aWVzLnNsaWNlKDApKTtcclxuICAgICAgICAgfSxcclxuICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgfSk7XHJcbiAgICAgQ2FjaGVkRmFtaWx5LnByb3RvdHlwZS5vbkVudGl0eUFkZGVkID0gZnVuY3Rpb24gKGVudGl0eSkge1xyXG4gICAgICAgICB2YXIgaW5kZXggPSB0aGlzLl9lbnRpdGllcy5pbmRleE9mKGVudGl0eSk7XHJcbiAgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgIHRoaXMuX2VudGl0aWVzLnB1c2goZW50aXR5KTtcclxuICAgICAgICAgICAgIHRoaXMuX25lZWRFbnRpdHlSZWZyZXNoID0gdHJ1ZTtcclxuICAgICAgICAgICAgIGVudGl0eS5hZGRMaXN0ZW5lcih0aGlzLm9uRW50aXR5Q2hhbmdlZCk7XHJcbiAgICAgICAgIH1cclxuICAgICB9O1xyXG4gICAgIENhY2hlZEZhbWlseS5wcm90b3R5cGUub25FbnRpdHlSZW1vdmVkID0gZnVuY3Rpb24gKGVudGl0eSkge1xyXG4gICAgICAgICB2YXIgaW5kZXggPSB0aGlzLl9lbnRpdGllcy5pbmRleE9mKGVudGl0eSk7XHJcbiAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgIHZhciBlbnRpdHlfMSA9IHRoaXMuX2VudGl0aWVzW2luZGV4XTtcclxuICAgICAgICAgICAgIHRoaXMuX2VudGl0aWVzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgICBlbnRpdHlfMS5yZW1vdmVMaXN0ZW5lcih0aGlzLm9uRW50aXR5Q2hhbmdlZCk7XHJcbiAgICAgICAgIH1cclxuICAgICB9O1xyXG4gICAgIHJldHVybiBDYWNoZWRGYW1pbHk7XHJcbiB9KEFic3RyYWN0RmFtaWx5KSk7XHJcbiB2YXIgTm9uQ2FjaGVkRmFtaWx5ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgICBfX2V4dGVuZHMoTm9uQ2FjaGVkRmFtaWx5LCBfc3VwZXIpO1xyXG4gICAgIGZ1bmN0aW9uIE5vbkNhY2hlZEZhbWlseSgpIHtcclxuICAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgIH1cclxuICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTm9uQ2FjaGVkRmFtaWx5LnByb3RvdHlwZSwgXCJlbnRpdGllc1wiLCB7XHJcbiAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgcmV0dXJuIHRoaXMuZW5naW5lLmVudGl0aWVzLmZpbHRlcih0aGlzLmluY2x1ZGVzRW50aXR5KTtcclxuICAgICAgICAgfSxcclxuICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgfSk7XHJcbiAgICAgcmV0dXJuIE5vbkNhY2hlZEZhbWlseTtcclxuIH0oQWJzdHJhY3RGYW1pbHkpKTtcclxuIHZhciBGYW1pbHlCdWlsZGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICBmdW5jdGlvbiBGYW1pbHlCdWlsZGVyKGVuZ2luZSkge1xyXG4gICAgICAgICB0aGlzLl9lbmdpbmUgPSBlbmdpbmUgfHwgbnVsbDtcclxuICAgICAgICAgdGhpcy5faW5jbHVkZSA9IFtdO1xyXG4gICAgICAgICB0aGlzLl9leGNsdWRlID0gW107XHJcbiAgICAgICAgIHRoaXMuX2NhY2hlZCA9IHRydWU7XHJcbiAgICAgfVxyXG4gICAgIEZhbWlseUJ1aWxkZXIucHJvdG90eXBlLmluY2x1ZGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgIHZhciBjbGFzc2VzID0gW107XHJcbiAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICBjbGFzc2VzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgIH1cclxuICAgICAgICAgKF9hID0gdGhpcy5faW5jbHVkZSkucHVzaC5hcHBseShfYSwgY2xhc3Nlcyk7XHJcbiAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgICB2YXIgX2E7XHJcbiAgICAgfTtcclxuICAgICBGYW1pbHlCdWlsZGVyLnByb3RvdHlwZS5leGNsdWRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICB2YXIgY2xhc3NlcyA9IFtdO1xyXG4gICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgY2xhc3Nlc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIChfYSA9IHRoaXMuX2V4Y2x1ZGUpLnB1c2guYXBwbHkoX2EsIGNsYXNzZXMpO1xyXG4gICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgdmFyIF9hO1xyXG4gICAgIH07XHJcbiAgICAgRmFtaWx5QnVpbGRlci5wcm90b3R5cGUuY2hhbmdlRW5naW5lID0gZnVuY3Rpb24gKGVuZ2luZSkge1xyXG4gICAgICAgICB0aGlzLl9lbmdpbmUgPSBlbmdpbmU7XHJcbiAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgIH07XHJcbiAgICAgRmFtaWx5QnVpbGRlci5wcm90b3R5cGUuc2V0Q2FjaGVkID0gZnVuY3Rpb24gKGNhY2hlZCkge1xyXG4gICAgICAgICB0aGlzLl9jYWNoZWQgPSBjYWNoZWQ7XHJcbiAgICAgfTtcclxuICAgICBGYW1pbHlCdWlsZGVyLnByb3RvdHlwZS5idWlsZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgaWYgKCF0aGlzLl9lbmdpbmUpIHtcclxuICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhbWlseSBzaG91bGQgYWx3YXlzIGJlbG9uZyB0byBhbiBlbmdpbmUuXCIpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIGlmICghdGhpcy5fY2FjaGVkKSB7XHJcbiAgICAgICAgICAgICByZXR1cm4gbmV3IE5vbkNhY2hlZEZhbWlseSh0aGlzLl9lbmdpbmUsIHRoaXMuX2luY2x1ZGUsIHRoaXMuX2V4Y2x1ZGUpO1xyXG4gICAgICAgICB9XHJcbiAgICAgICAgIHJldHVybiBuZXcgQ2FjaGVkRmFtaWx5KHRoaXMuX2VuZ2luZSwgdGhpcy5faW5jbHVkZSwgdGhpcy5fZXhjbHVkZSk7XHJcbiAgICAgfTtcclxuICAgICByZXR1cm4gRmFtaWx5QnVpbGRlcjtcclxuIH0oKSk7XHJcbiBleHBvcnRzLkZhbWlseUJ1aWxkZXIgPSBGYW1pbHlCdWlsZGVyO1xyXG4gLy8jIHNvdXJjZU1hcHBpbmdVUkw9RmFtaWx5LmpzLm1hcFxuXG4vLyAjZW5kcmVnaW9uIE9SSUdJTkFMIENPREVcblxuX2Nqc0V4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cztcbl9fX2VzTW9kdWxlID0gbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZTtcbl9GYW1pbHlCdWlsZGVyID0gbW9kdWxlLmV4cG9ydHMuRmFtaWx5QnVpbGRlcjtcblxufSwge30pO1xuZXhwb3J0IHsgX2Nqc0V4cG9ydHMgYXMgZGVmYXVsdCB9O1xuZXhwb3J0IHsgX19janNNZXRhVVJMIH1cbiIsImltcG9ydCBfY2pzTG9hZGVyIGZyb20gJ2NjZTovaW50ZXJuYWwvbWwvY2pzLWxvYWRlci5tanMnO1xuaW1wb3J0IHsgX19janNNZXRhVVJMIGFzIF9yZXF9IGZyb20gJy4vbGliL2luZGV4JztcbmxldCBfY2pzRXhwb3J0cztcbmNvbnN0IF9fY2pzTWV0YVVSTCA9IGltcG9ydC5tZXRhLnVybDtcbl9janNMb2FkZXIuZGVmaW5lKF9fY2pzTWV0YVVSTCwgZnVuY3Rpb24gKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSwgX19maWxlbmFtZSwgX19kaXJuYW1lKSB7XG4vLyAjcmVnaW9uIE9SSUdJTkFMIENPREVcblxuXG4gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi9saWIvaW5kZXhcIik7XG5cbi8vICNlbmRyZWdpb24gT1JJR0lOQUwgQ09ERVxuXG5fY2pzRXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzO1xuXG5cbn0sICgpID0+ICh7XG4gICcuL2xpYi9pbmRleCc6IF9yZXEsXG59KSk7XG5leHBvcnQgeyBfY2pzRXhwb3J0cyBhcyBkZWZhdWx0IH07XG5leHBvcnQgeyBfX2Nqc01ldGFVUkwgfVxuIiwiLy8gSSBhbSB0aGUgZmFjYWRlIG1vZHVsZSB3aG8gcHJvdmlkZXMgYWNjZXNzIHRvIHRoZSBDb21tb25KUyBtb2R1bGUgJy4vaW5kZXguanMnflxuaW1wb3J0IHsgX19janNNZXRhVVJMIGFzIHJlcSB9IGZyb20gJy4vaW5kZXguanMnO1xuaW1wb3J0IGxvYWRlciBmcm9tICdjY2U6L2ludGVybmFsL21sL2Nqcy1sb2FkZXIubWpzJztcbmlmICghcmVxKSB7XG4gICAgbG9hZGVyLnRocm93SW52YWxpZFdyYXBwZXIoJy4vaW5kZXguanMnLCBpbXBvcnQubWV0YS51cmwpO1xufVxubG9hZGVyLnJlcXVpcmUocmVxKTtcbmV4cG9ydCAqIGZyb20gJy4vaW5kZXguanMnO1xuaW1wb3J0IHsgZGVmYXVsdCBhcyBkIH0gZnJvbSAnLi9pbmRleC5qcydcbmV4cG9ydCB7IGQgYXMgZGVmYXVsdCB9OyIsImltcG9ydCBfY2pzTG9hZGVyIGZyb20gJ2NjZTovaW50ZXJuYWwvbWwvY2pzLWxvYWRlci5tanMnO1xuaW1wb3J0IHsgX19janNNZXRhVVJMIGFzIF9yZXF9IGZyb20gJy4vRW5naW5lJztcbmltcG9ydCB7IF9fY2pzTWV0YVVSTCBhcyBfcmVxMH0gZnJvbSAnLi9FbnRpdHknO1xuaW1wb3J0IHsgX19janNNZXRhVVJMIGFzIF9yZXExfSBmcm9tICcuL0ZhbWlseSc7XG5pbXBvcnQgeyBfX2Nqc01ldGFVUkwgYXMgX3JlcTJ9IGZyb20gJy4vU3lzdGVtJztcbmxldCBfY2pzRXhwb3J0cztcbmxldCBfX19lc01vZHVsZTtcbmNvbnN0IF9fY2pzTWV0YVVSTCA9IGltcG9ydC5tZXRhLnVybDtcbl9janNMb2FkZXIuZGVmaW5lKF9fY2pzTWV0YVVSTCwgZnVuY3Rpb24gKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSwgX19maWxlbmFtZSwgX19kaXJuYW1lKSB7XG4vLyAjcmVnaW9uIE9SSUdJTkFMIENPREVcblxuXG4gXCJ1c2Ugc3RyaWN0XCI7XHJcbiBmdW5jdGlvbiBfX2V4cG9ydChtKSB7XHJcbiAgICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG4gfVxyXG4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4gX19leHBvcnQocmVxdWlyZShcIi4vRW5naW5lXCIpKTtcclxuIF9fZXhwb3J0KHJlcXVpcmUoXCIuL0VudGl0eVwiKSk7XHJcbiBfX2V4cG9ydChyZXF1aXJlKFwiLi9GYW1pbHlcIikpO1xyXG4gX19leHBvcnQocmVxdWlyZShcIi4vU3lzdGVtXCIpKTtcclxuIC8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuXG4vLyAjZW5kcmVnaW9uIE9SSUdJTkFMIENPREVcblxuX2Nqc0V4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cztcbl9fX2VzTW9kdWxlID0gbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZTtcblxufSwgKCkgPT4gKHtcbiAgJy4vRW5naW5lJzogX3JlcSxcbiAgJy4vRW50aXR5JzogX3JlcTAsXG4gICcuL0ZhbWlseSc6IF9yZXExLFxuICAnLi9TeXN0ZW0nOiBfcmVxMixcbn0pKTtcbmV4cG9ydCB7IF9janNFeHBvcnRzIGFzIGRlZmF1bHQgfTtcbmV4cG9ydCB7IF9fY2pzTWV0YVVSTCB9XG4iLCJleHBvcnQgeyBfQXN5bmNHZW5lcmF0b3IgYXMgQXN5bmNHZW5lcmF0b3IsIF9PdmVybG9hZFlpZWxkIGFzIE92ZXJsb2FkWWllbGQsIF9hcHBseURlY3MgYXMgYXBwbHlEZWNzLCBfYXBwbHlEZWNzMjIwMyBhcyBhcHBseURlY3MyMjAzLCBfYXBwbHlEZWNzMjIwM1IgYXMgYXBwbHlEZWNzMjIwM1IsIF9hcHBseURlY3MyMzAxIGFzIGFwcGx5RGVjczIzMDEsIF9hcHBseURlY3MyMzA1IGFzIGFwcGx5RGVjczIzMDUsIF9hc3luY0dlbmVyYXRvckRlbGVnYXRlIGFzIGFzeW5jR2VuZXJhdG9yRGVsZWdhdGUsIF9hc3luY0l0ZXJhdG9yIGFzIGFzeW5jSXRlcmF0b3IsIF9hd2FpdEFzeW5jR2VuZXJhdG9yIGFzIGF3YWl0QXN5bmNHZW5lcmF0b3IsIF9jaGVja0luUkhTIGFzIGNoZWNrSW5SSFMsIF9kZWZpbmVBY2Nlc3NvciBhcyBkZWZpbmVBY2Nlc3NvciwgX2Rpc3Bvc2UgYXMgZGlzcG9zZSwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0IGFzIGl0ZXJhYmxlVG9BcnJheUxpbWl0LCBfaXRlcmFibGVUb0FycmF5TGltaXRMb29zZSBhcyBpdGVyYWJsZVRvQXJyYXlMaW1pdExvb3NlLCBfanN4IGFzIGpzeCwgX29iamVjdFNwcmVhZDIgYXMgb2JqZWN0U3ByZWFkMiwgX3JlZ2VuZXJhdG9yUnVudGltZSBhcyByZWdlbmVyYXRvclJ1bnRpbWUsIF90eXBlb2YgYXMgdHlwZW9mLCBfdXNpbmcgYXMgdXNpbmcsIF93cmFwUmVnRXhwIGFzIHdyYXBSZWdFeHAsIF9Bd2FpdFZhbHVlIGFzIEF3YWl0VmFsdWUsIF93cmFwQXN5bmNHZW5lcmF0b3IgYXMgd3JhcEFzeW5jR2VuZXJhdG9yLCBfYXN5bmNUb0dlbmVyYXRvciBhcyBhc3luY1RvR2VuZXJhdG9yLCBfY2xhc3NDYWxsQ2hlY2sgYXMgY2xhc3NDYWxsQ2hlY2ssIF9jcmVhdGVDbGFzcyBhcyBjcmVhdGVDbGFzcywgX2RlZmluZUVudW1lcmFibGVQcm9wZXJ0aWVzIGFzIGRlZmluZUVudW1lcmFibGVQcm9wZXJ0aWVzLCBfZGVmYXVsdHMgYXMgZGVmYXVsdHMsIF9kZWZpbmVQcm9wZXJ0eSBhcyBkZWZpbmVQcm9wZXJ0eSwgX2V4dGVuZHMgYXMgZXh0ZW5kcywgX29iamVjdFNwcmVhZCBhcyBvYmplY3RTcHJlYWQsIF9pbmhlcml0cyBhcyBpbmhlcml0cywgX2luaGVyaXRzTG9vc2UgYXMgaW5oZXJpdHNMb29zZSwgX2dldFByb3RvdHlwZU9mIGFzIGdldFByb3RvdHlwZU9mLCBfc2V0UHJvdG90eXBlT2YgYXMgc2V0UHJvdG90eXBlT2YsIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgYXMgaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0LCBfY29uc3RydWN0IGFzIGNvbnN0cnVjdCwgX2lzTmF0aXZlRnVuY3Rpb24gYXMgaXNOYXRpdmVGdW5jdGlvbiwgX3dyYXBOYXRpdmVTdXBlciBhcyB3cmFwTmF0aXZlU3VwZXIsIF9pbnN0YW5jZW9mIGFzIGluc3RhbmNlb2YsIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgYXMgaW50ZXJvcFJlcXVpcmVEZWZhdWx0LCBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCBhcyBpbnRlcm9wUmVxdWlyZVdpbGRjYXJkLCBfbmV3QXJyb3dDaGVjayBhcyBuZXdBcnJvd0NoZWNrLCBfb2JqZWN0RGVzdHJ1Y3R1cmluZ0VtcHR5IGFzIG9iamVjdERlc3RydWN0dXJpbmdFbXB0eSwgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UgYXMgb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZSwgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzIGFzIG9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzLCBfYXNzZXJ0VGhpc0luaXRpYWxpemVkIGFzIGFzc2VydFRoaXNJbml0aWFsaXplZCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4gYXMgcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiwgX2NyZWF0ZVN1cGVyIGFzIGNyZWF0ZVN1cGVyLCBfc3VwZXJQcm9wQmFzZSBhcyBzdXBlclByb3BCYXNlLCBfZ2V0IGFzIGdldCwgX3NldCBhcyBzZXQsIF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwgYXMgdGFnZ2VkVGVtcGxhdGVMaXRlcmFsLCBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsTG9vc2UgYXMgdGFnZ2VkVGVtcGxhdGVMaXRlcmFsTG9vc2UsIF9yZWFkT25seUVycm9yIGFzIHJlYWRPbmx5RXJyb3IsIF93cml0ZU9ubHlFcnJvciBhcyB3cml0ZU9ubHlFcnJvciwgX2NsYXNzTmFtZVREWkVycm9yIGFzIGNsYXNzTmFtZVREWkVycm9yLCBfdGVtcG9yYWxVbmRlZmluZWQgYXMgdGVtcG9yYWxVbmRlZmluZWQsIF90ZHogYXMgdGR6LCBfdGVtcG9yYWxSZWYgYXMgdGVtcG9yYWxSZWYsIF9zbGljZWRUb0FycmF5IGFzIHNsaWNlZFRvQXJyYXksIF9zbGljZWRUb0FycmF5TG9vc2UgYXMgc2xpY2VkVG9BcnJheUxvb3NlLCBfdG9BcnJheSBhcyB0b0FycmF5LCBfdG9Db25zdW1hYmxlQXJyYXkgYXMgdG9Db25zdW1hYmxlQXJyYXksIF9hcnJheVdpdGhvdXRIb2xlcyBhcyBhcnJheVdpdGhvdXRIb2xlcywgX2FycmF5V2l0aEhvbGVzIGFzIGFycmF5V2l0aEhvbGVzLCBfbWF5YmVBcnJheUxpa2UgYXMgbWF5YmVBcnJheUxpa2UsIF9pdGVyYWJsZVRvQXJyYXkgYXMgaXRlcmFibGVUb0FycmF5LCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkgYXMgdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXksIF9hcnJheUxpa2VUb0FycmF5IGFzIGFycmF5TGlrZVRvQXJyYXksIF9ub25JdGVyYWJsZVNwcmVhZCBhcyBub25JdGVyYWJsZVNwcmVhZCwgX25vbkl0ZXJhYmxlUmVzdCBhcyBub25JdGVyYWJsZVJlc3QsIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGFzIGNyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIsIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UgYXMgY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlckxvb3NlLCBfc2tpcEZpcnN0R2VuZXJhdG9yTmV4dCBhcyBza2lwRmlyc3RHZW5lcmF0b3JOZXh0LCBfdG9QcmltaXRpdmUgYXMgdG9QcmltaXRpdmUsIF90b1Byb3BlcnR5S2V5IGFzIHRvUHJvcGVydHlLZXksIF9pbml0aWFsaXplcldhcm5pbmdIZWxwZXIgYXMgaW5pdGlhbGl6ZXJXYXJuaW5nSGVscGVyLCBfaW5pdGlhbGl6ZXJEZWZpbmVQcm9wZXJ0eSBhcyBpbml0aWFsaXplckRlZmluZVByb3BlcnR5LCBfYXBwbHlEZWNvcmF0ZWREZXNjcmlwdG9yIGFzIGFwcGx5RGVjb3JhdGVkRGVzY3JpcHRvciwgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkgYXMgY2xhc3NQcml2YXRlRmllbGRMb29zZUtleSwgX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlIGFzIGNsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlLCBfY2xhc3NQcml2YXRlRmllbGRHZXQgYXMgY2xhc3NQcml2YXRlRmllbGRHZXQsIF9jbGFzc1ByaXZhdGVGaWVsZFNldCBhcyBjbGFzc1ByaXZhdGVGaWVsZFNldCwgX2NsYXNzUHJpdmF0ZUZpZWxkRGVzdHJ1Y3R1cmVTZXQgYXMgY2xhc3NQcml2YXRlRmllbGREZXN0cnVjdHVyZVNldCwgX2NsYXNzRXh0cmFjdEZpZWxkRGVzY3JpcHRvciBhcyBjbGFzc0V4dHJhY3RGaWVsZERlc2NyaXB0b3IsIF9jbGFzc1N0YXRpY1ByaXZhdGVGaWVsZFNwZWNHZXQgYXMgY2xhc3NTdGF0aWNQcml2YXRlRmllbGRTcGVjR2V0LCBfY2xhc3NTdGF0aWNQcml2YXRlRmllbGRTcGVjU2V0IGFzIGNsYXNzU3RhdGljUHJpdmF0ZUZpZWxkU3BlY1NldCwgX2NsYXNzU3RhdGljUHJpdmF0ZU1ldGhvZEdldCBhcyBjbGFzc1N0YXRpY1ByaXZhdGVNZXRob2RHZXQsIF9jbGFzc1N0YXRpY1ByaXZhdGVNZXRob2RTZXQgYXMgY2xhc3NTdGF0aWNQcml2YXRlTWV0aG9kU2V0LCBfY2xhc3NBcHBseURlc2NyaXB0b3JHZXQgYXMgY2xhc3NBcHBseURlc2NyaXB0b3JHZXQsIF9jbGFzc0FwcGx5RGVzY3JpcHRvclNldCBhcyBjbGFzc0FwcGx5RGVzY3JpcHRvclNldCwgX2NsYXNzQXBwbHlEZXNjcmlwdG9yRGVzdHJ1Y3R1cmVTZXQgYXMgY2xhc3NBcHBseURlc2NyaXB0b3JEZXN0cnVjdHVyZVNldCwgX2NsYXNzU3RhdGljUHJpdmF0ZUZpZWxkRGVzdHJ1Y3R1cmVTZXQgYXMgY2xhc3NTdGF0aWNQcml2YXRlRmllbGREZXN0cnVjdHVyZVNldCwgX2NsYXNzQ2hlY2tQcml2YXRlU3RhdGljQWNjZXNzIGFzIGNsYXNzQ2hlY2tQcml2YXRlU3RhdGljQWNjZXNzLCBfY2xhc3NDaGVja1ByaXZhdGVTdGF0aWNGaWVsZERlc2NyaXB0b3IgYXMgY2xhc3NDaGVja1ByaXZhdGVTdGF0aWNGaWVsZERlc2NyaXB0b3IsIF9kZWNvcmF0ZSBhcyBkZWNvcmF0ZSwgX2NsYXNzUHJpdmF0ZU1ldGhvZEdldCBhcyBjbGFzc1ByaXZhdGVNZXRob2RHZXQsIF9jaGVja1ByaXZhdGVSZWRlY2xhcmF0aW9uIGFzIGNoZWNrUHJpdmF0ZVJlZGVjbGFyYXRpb24sIF9jbGFzc1ByaXZhdGVGaWVsZEluaXRTcGVjIGFzIGNsYXNzUHJpdmF0ZUZpZWxkSW5pdFNwZWMsIF9jbGFzc1ByaXZhdGVNZXRob2RJbml0U3BlYyBhcyBjbGFzc1ByaXZhdGVNZXRob2RJbml0U3BlYywgX2NsYXNzUHJpdmF0ZU1ldGhvZFNldCBhcyBjbGFzc1ByaXZhdGVNZXRob2RTZXQsIF9pZGVudGl0eSBhcyBpZGVudGl0eSB9O1xuZnVuY3Rpb24gX0FzeW5jR2VuZXJhdG9yKGUpIHtcbiAgdmFyIHIsIHQ7XG4gIGZ1bmN0aW9uIHJlc3VtZShyLCB0KSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBuID0gZVtyXSh0KSxcbiAgICAgICAgbyA9IG4udmFsdWUsXG4gICAgICAgIHUgPSBvIGluc3RhbmNlb2YgX092ZXJsb2FkWWllbGQ7XG4gICAgICBQcm9taXNlLnJlc29sdmUodSA/IG8udiA6IG8pLnRoZW4oZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgaWYgKHUpIHtcbiAgICAgICAgICB2YXIgaSA9IFwicmV0dXJuXCIgPT09IHIgPyBcInJldHVyblwiIDogXCJuZXh0XCI7XG4gICAgICAgICAgaWYgKCFvLmsgfHwgdC5kb25lKSByZXR1cm4gcmVzdW1lKGksIHQpO1xuICAgICAgICAgIHQgPSBlW2ldKHQpLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHNldHRsZShuLmRvbmUgPyBcInJldHVyblwiIDogXCJub3JtYWxcIiwgdCk7XG4gICAgICB9LCBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXN1bWUoXCJ0aHJvd1wiLCBlKTtcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHNldHRsZShcInRocm93XCIsIGUpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBzZXR0bGUoZSwgbikge1xuICAgIHN3aXRjaCAoZSkge1xuICAgICAgY2FzZSBcInJldHVyblwiOlxuICAgICAgICByLnJlc29sdmUoe1xuICAgICAgICAgIHZhbHVlOiBuLFxuICAgICAgICAgIGRvbmU6ICEwXG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJ0aHJvd1wiOlxuICAgICAgICByLnJlamVjdChuKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByLnJlc29sdmUoe1xuICAgICAgICAgIHZhbHVlOiBuLFxuICAgICAgICAgIGRvbmU6ICExXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAociA9IHIubmV4dCkgPyByZXN1bWUoci5rZXksIHIuYXJnKSA6IHQgPSBudWxsO1xuICB9XG4gIHRoaXMuX2ludm9rZSA9IGZ1bmN0aW9uIChlLCBuKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChvLCB1KSB7XG4gICAgICB2YXIgaSA9IHtcbiAgICAgICAga2V5OiBlLFxuICAgICAgICBhcmc6IG4sXG4gICAgICAgIHJlc29sdmU6IG8sXG4gICAgICAgIHJlamVjdDogdSxcbiAgICAgICAgbmV4dDogbnVsbFxuICAgICAgfTtcbiAgICAgIHQgPyB0ID0gdC5uZXh0ID0gaSA6IChyID0gdCA9IGksIHJlc3VtZShlLCBuKSk7XG4gICAgfSk7XG4gIH0sIFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgZS5yZXR1cm4gJiYgKHRoaXMucmV0dXJuID0gdm9pZCAwKTtcbn1cbl9Bc3luY0dlbmVyYXRvci5wcm90b3R5cGVbXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgU3ltYm9sLmFzeW5jSXRlcmF0b3IgfHwgXCJAQGFzeW5jSXRlcmF0b3JcIl0gPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzO1xufSwgX0FzeW5jR2VuZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKGUpIHtcbiAgcmV0dXJuIHRoaXMuX2ludm9rZShcIm5leHRcIiwgZSk7XG59LCBfQXN5bmNHZW5lcmF0b3IucHJvdG90eXBlLnRocm93ID0gZnVuY3Rpb24gKGUpIHtcbiAgcmV0dXJuIHRoaXMuX2ludm9rZShcInRocm93XCIsIGUpO1xufSwgX0FzeW5jR2VuZXJhdG9yLnByb3RvdHlwZS5yZXR1cm4gPSBmdW5jdGlvbiAoZSkge1xuICByZXR1cm4gdGhpcy5faW52b2tlKFwicmV0dXJuXCIsIGUpO1xufTtcbmZ1bmN0aW9uIF9PdmVybG9hZFlpZWxkKHQsIGUpIHtcbiAgdGhpcy52ID0gdCwgdGhpcy5rID0gZTtcbn1cbmZ1bmN0aW9uIG9sZF9jcmVhdGVNZXRhZGF0YU1ldGhvZHNGb3JQcm9wZXJ0eShlLCB0LCBhLCByKSB7XG4gIHJldHVybiB7XG4gICAgZ2V0TWV0YWRhdGE6IGZ1bmN0aW9uIChvKSB7XG4gICAgICBvbGRfYXNzZXJ0Tm90RmluaXNoZWQociwgXCJnZXRNZXRhZGF0YVwiKSwgb2xkX2Fzc2VydE1ldGFkYXRhS2V5KG8pO1xuICAgICAgdmFyIGkgPSBlW29dO1xuICAgICAgaWYgKHZvaWQgMCAhPT0gaSkgaWYgKDEgPT09IHQpIHtcbiAgICAgICAgdmFyIG4gPSBpLnB1YmxpYztcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gbikgcmV0dXJuIG5bYV07XG4gICAgICB9IGVsc2UgaWYgKDIgPT09IHQpIHtcbiAgICAgICAgdmFyIGwgPSBpLnByaXZhdGU7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IGwpIHJldHVybiBsLmdldChhKTtcbiAgICAgIH0gZWxzZSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoaSwgXCJjb25zdHJ1Y3RvclwiKSkgcmV0dXJuIGkuY29uc3RydWN0b3I7XG4gICAgfSxcbiAgICBzZXRNZXRhZGF0YTogZnVuY3Rpb24gKG8sIGkpIHtcbiAgICAgIG9sZF9hc3NlcnROb3RGaW5pc2hlZChyLCBcInNldE1ldGFkYXRhXCIpLCBvbGRfYXNzZXJ0TWV0YWRhdGFLZXkobyk7XG4gICAgICB2YXIgbiA9IGVbb107XG4gICAgICBpZiAodm9pZCAwID09PSBuICYmIChuID0gZVtvXSA9IHt9KSwgMSA9PT0gdCkge1xuICAgICAgICB2YXIgbCA9IG4ucHVibGljO1xuICAgICAgICB2b2lkIDAgPT09IGwgJiYgKGwgPSBuLnB1YmxpYyA9IHt9KSwgbFthXSA9IGk7XG4gICAgICB9IGVsc2UgaWYgKDIgPT09IHQpIHtcbiAgICAgICAgdmFyIHMgPSBuLnByaXY7XG4gICAgICAgIHZvaWQgMCA9PT0gcyAmJiAocyA9IG4ucHJpdmF0ZSA9IG5ldyBNYXAoKSksIHMuc2V0KGEsIGkpO1xuICAgICAgfSBlbHNlIG4uY29uc3RydWN0b3IgPSBpO1xuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIG9sZF9jb252ZXJ0TWV0YWRhdGFNYXBUb0ZpbmFsKGUsIHQpIHtcbiAgdmFyIGEgPSBlW1N5bWJvbC5tZXRhZGF0YSB8fCBTeW1ib2wuZm9yKFwiU3ltYm9sLm1ldGFkYXRhXCIpXSxcbiAgICByID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyh0KTtcbiAgaWYgKDAgIT09IHIubGVuZ3RoKSB7XG4gICAgZm9yICh2YXIgbyA9IDA7IG8gPCByLmxlbmd0aDsgbysrKSB7XG4gICAgICB2YXIgaSA9IHJbb10sXG4gICAgICAgIG4gPSB0W2ldLFxuICAgICAgICBsID0gYSA/IGFbaV0gOiBudWxsLFxuICAgICAgICBzID0gbi5wdWJsaWMsXG4gICAgICAgIGMgPSBsID8gbC5wdWJsaWMgOiBudWxsO1xuICAgICAgcyAmJiBjICYmIE9iamVjdC5zZXRQcm90b3R5cGVPZihzLCBjKTtcbiAgICAgIHZhciBkID0gbi5wcml2YXRlO1xuICAgICAgaWYgKGQpIHtcbiAgICAgICAgdmFyIHUgPSBBcnJheS5mcm9tKGQudmFsdWVzKCkpLFxuICAgICAgICAgIGYgPSBsID8gbC5wcml2YXRlIDogbnVsbDtcbiAgICAgICAgZiAmJiAodSA9IHUuY29uY2F0KGYpKSwgbi5wcml2YXRlID0gdTtcbiAgICAgIH1cbiAgICAgIGwgJiYgT2JqZWN0LnNldFByb3RvdHlwZU9mKG4sIGwpO1xuICAgIH1cbiAgICBhICYmIE9iamVjdC5zZXRQcm90b3R5cGVPZih0LCBhKSwgZVtTeW1ib2wubWV0YWRhdGEgfHwgU3ltYm9sLmZvcihcIlN5bWJvbC5tZXRhZGF0YVwiKV0gPSB0O1xuICB9XG59XG5mdW5jdGlvbiBvbGRfY3JlYXRlQWRkSW5pdGlhbGl6ZXJNZXRob2QoZSwgdCkge1xuICByZXR1cm4gZnVuY3Rpb24gKGEpIHtcbiAgICBvbGRfYXNzZXJ0Tm90RmluaXNoZWQodCwgXCJhZGRJbml0aWFsaXplclwiKSwgb2xkX2Fzc2VydENhbGxhYmxlKGEsIFwiQW4gaW5pdGlhbGl6ZXJcIiksIGUucHVzaChhKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIG9sZF9tZW1iZXJEZWMoZSwgdCwgYSwgciwgbywgaSwgbiwgbCwgcykge1xuICB2YXIgYztcbiAgc3dpdGNoIChpKSB7XG4gICAgY2FzZSAxOlxuICAgICAgYyA9IFwiYWNjZXNzb3JcIjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMjpcbiAgICAgIGMgPSBcIm1ldGhvZFwiO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzOlxuICAgICAgYyA9IFwiZ2V0dGVyXCI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDQ6XG4gICAgICBjID0gXCJzZXR0ZXJcIjtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBjID0gXCJmaWVsZFwiO1xuICB9XG4gIHZhciBkLFxuICAgIHUsXG4gICAgZiA9IHtcbiAgICAgIGtpbmQ6IGMsXG4gICAgICBuYW1lOiBsID8gXCIjXCIgKyB0IDogdCxcbiAgICAgIGlzU3RhdGljOiBuLFxuICAgICAgaXNQcml2YXRlOiBsXG4gICAgfSxcbiAgICBwID0ge1xuICAgICAgdjogITFcbiAgICB9O1xuICBpZiAoMCAhPT0gaSAmJiAoZi5hZGRJbml0aWFsaXplciA9IG9sZF9jcmVhdGVBZGRJbml0aWFsaXplck1ldGhvZChvLCBwKSksIGwpIHtcbiAgICBkID0gMiwgdSA9IFN5bWJvbCh0KTtcbiAgICB2YXIgdiA9IHt9O1xuICAgIDAgPT09IGkgPyAodi5nZXQgPSBhLmdldCwgdi5zZXQgPSBhLnNldCkgOiAyID09PSBpID8gdi5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gYS52YWx1ZTtcbiAgICB9IDogKDEgIT09IGkgJiYgMyAhPT0gaSB8fCAodi5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gYS5nZXQuY2FsbCh0aGlzKTtcbiAgICB9KSwgMSAhPT0gaSAmJiA0ICE9PSBpIHx8ICh2LnNldCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBhLnNldC5jYWxsKHRoaXMsIGUpO1xuICAgIH0pKSwgZi5hY2Nlc3MgPSB2O1xuICB9IGVsc2UgZCA9IDEsIHUgPSB0O1xuICB0cnkge1xuICAgIHJldHVybiBlKHMsIE9iamVjdC5hc3NpZ24oZiwgb2xkX2NyZWF0ZU1ldGFkYXRhTWV0aG9kc0ZvclByb3BlcnR5KHIsIGQsIHUsIHApKSk7XG4gIH0gZmluYWxseSB7XG4gICAgcC52ID0gITA7XG4gIH1cbn1cbmZ1bmN0aW9uIG9sZF9hc3NlcnROb3RGaW5pc2hlZChlLCB0KSB7XG4gIGlmIChlLnYpIHRocm93IG5ldyBFcnJvcihcImF0dGVtcHRlZCB0byBjYWxsIFwiICsgdCArIFwiIGFmdGVyIGRlY29yYXRpb24gd2FzIGZpbmlzaGVkXCIpO1xufVxuZnVuY3Rpb24gb2xkX2Fzc2VydE1ldGFkYXRhS2V5KGUpIHtcbiAgaWYgKFwic3ltYm9sXCIgIT0gdHlwZW9mIGUpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJNZXRhZGF0YSBrZXlzIG11c3QgYmUgc3ltYm9scywgcmVjZWl2ZWQ6IFwiICsgZSk7XG59XG5mdW5jdGlvbiBvbGRfYXNzZXJ0Q2FsbGFibGUoZSwgdCkge1xuICBpZiAoXCJmdW5jdGlvblwiICE9IHR5cGVvZiBlKSB0aHJvdyBuZXcgVHlwZUVycm9yKHQgKyBcIiBtdXN0IGJlIGEgZnVuY3Rpb25cIik7XG59XG5mdW5jdGlvbiBvbGRfYXNzZXJ0VmFsaWRSZXR1cm5WYWx1ZShlLCB0KSB7XG4gIHZhciBhID0gdHlwZW9mIHQ7XG4gIGlmICgxID09PSBlKSB7XG4gICAgaWYgKFwib2JqZWN0XCIgIT09IGEgfHwgbnVsbCA9PT0gdCkgdGhyb3cgbmV3IFR5cGVFcnJvcihcImFjY2Vzc29yIGRlY29yYXRvcnMgbXVzdCByZXR1cm4gYW4gb2JqZWN0IHdpdGggZ2V0LCBzZXQsIG9yIGluaXQgcHJvcGVydGllcyBvciB2b2lkIDBcIik7XG4gICAgdm9pZCAwICE9PSB0LmdldCAmJiBvbGRfYXNzZXJ0Q2FsbGFibGUodC5nZXQsIFwiYWNjZXNzb3IuZ2V0XCIpLCB2b2lkIDAgIT09IHQuc2V0ICYmIG9sZF9hc3NlcnRDYWxsYWJsZSh0LnNldCwgXCJhY2Nlc3Nvci5zZXRcIiksIHZvaWQgMCAhPT0gdC5pbml0ICYmIG9sZF9hc3NlcnRDYWxsYWJsZSh0LmluaXQsIFwiYWNjZXNzb3IuaW5pdFwiKSwgdm9pZCAwICE9PSB0LmluaXRpYWxpemVyICYmIG9sZF9hc3NlcnRDYWxsYWJsZSh0LmluaXRpYWxpemVyLCBcImFjY2Vzc29yLmluaXRpYWxpemVyXCIpO1xuICB9IGVsc2UgaWYgKFwiZnVuY3Rpb25cIiAhPT0gYSkge1xuICAgIHZhciByO1xuICAgIHRocm93IHIgPSAwID09PSBlID8gXCJmaWVsZFwiIDogMTAgPT09IGUgPyBcImNsYXNzXCIgOiBcIm1ldGhvZFwiLCBuZXcgVHlwZUVycm9yKHIgKyBcIiBkZWNvcmF0b3JzIG11c3QgcmV0dXJuIGEgZnVuY3Rpb24gb3Igdm9pZCAwXCIpO1xuICB9XG59XG5mdW5jdGlvbiBvbGRfZ2V0SW5pdChlKSB7XG4gIHZhciB0O1xuICByZXR1cm4gbnVsbCA9PSAodCA9IGUuaW5pdCkgJiYgKHQgPSBlLmluaXRpYWxpemVyKSAmJiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBjb25zb2xlICYmIGNvbnNvbGUud2FybihcIi5pbml0aWFsaXplciBoYXMgYmVlbiByZW5hbWVkIHRvIC5pbml0IGFzIG9mIE1hcmNoIDIwMjJcIiksIHQ7XG59XG5mdW5jdGlvbiBvbGRfYXBwbHlNZW1iZXJEZWMoZSwgdCwgYSwgciwgbywgaSwgbiwgbCwgcykge1xuICB2YXIgYyxcbiAgICBkLFxuICAgIHUsXG4gICAgZixcbiAgICBwLFxuICAgIHYsXG4gICAgaCA9IGFbMF07XG4gIGlmIChuID8gYyA9IDAgPT09IG8gfHwgMSA9PT0gbyA/IHtcbiAgICBnZXQ6IGFbM10sXG4gICAgc2V0OiBhWzRdXG4gIH0gOiAzID09PSBvID8ge1xuICAgIGdldDogYVszXVxuICB9IDogNCA9PT0gbyA/IHtcbiAgICBzZXQ6IGFbM11cbiAgfSA6IHtcbiAgICB2YWx1ZTogYVszXVxuICB9IDogMCAhPT0gbyAmJiAoYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcikpLCAxID09PSBvID8gdSA9IHtcbiAgICBnZXQ6IGMuZ2V0LFxuICAgIHNldDogYy5zZXRcbiAgfSA6IDIgPT09IG8gPyB1ID0gYy52YWx1ZSA6IDMgPT09IG8gPyB1ID0gYy5nZXQgOiA0ID09PSBvICYmICh1ID0gYy5zZXQpLCBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGgpIHZvaWQgMCAhPT0gKGYgPSBvbGRfbWVtYmVyRGVjKGgsIHIsIGMsIGwsIHMsIG8sIGksIG4sIHUpKSAmJiAob2xkX2Fzc2VydFZhbGlkUmV0dXJuVmFsdWUobywgZiksIDAgPT09IG8gPyBkID0gZiA6IDEgPT09IG8gPyAoZCA9IG9sZF9nZXRJbml0KGYpLCBwID0gZi5nZXQgfHwgdS5nZXQsIHYgPSBmLnNldCB8fCB1LnNldCwgdSA9IHtcbiAgICBnZXQ6IHAsXG4gICAgc2V0OiB2XG4gIH0pIDogdSA9IGYpO2Vsc2UgZm9yICh2YXIgeSA9IGgubGVuZ3RoIC0gMTsgeSA+PSAwOyB5LS0pIHtcbiAgICB2YXIgYjtcbiAgICBpZiAodm9pZCAwICE9PSAoZiA9IG9sZF9tZW1iZXJEZWMoaFt5XSwgciwgYywgbCwgcywgbywgaSwgbiwgdSkpKSBvbGRfYXNzZXJ0VmFsaWRSZXR1cm5WYWx1ZShvLCBmKSwgMCA9PT0gbyA/IGIgPSBmIDogMSA9PT0gbyA/IChiID0gb2xkX2dldEluaXQoZiksIHAgPSBmLmdldCB8fCB1LmdldCwgdiA9IGYuc2V0IHx8IHUuc2V0LCB1ID0ge1xuICAgICAgZ2V0OiBwLFxuICAgICAgc2V0OiB2XG4gICAgfSkgOiB1ID0gZiwgdm9pZCAwICE9PSBiICYmICh2b2lkIDAgPT09IGQgPyBkID0gYiA6IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZCA/IGQgPSBbZCwgYl0gOiBkLnB1c2goYikpO1xuICB9XG4gIGlmICgwID09PSBvIHx8IDEgPT09IG8pIHtcbiAgICBpZiAodm9pZCAwID09PSBkKSBkID0gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgIHJldHVybiB0O1xuICAgIH07ZWxzZSBpZiAoXCJmdW5jdGlvblwiICE9IHR5cGVvZiBkKSB7XG4gICAgICB2YXIgZyA9IGQ7XG4gICAgICBkID0gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgZm9yICh2YXIgYSA9IHQsIHIgPSAwOyByIDwgZy5sZW5ndGg7IHIrKykgYSA9IGdbcl0uY2FsbChlLCBhKTtcbiAgICAgICAgcmV0dXJuIGE7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgbSA9IGQ7XG4gICAgICBkID0gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIG0uY2FsbChlLCB0KTtcbiAgICAgIH07XG4gICAgfVxuICAgIGUucHVzaChkKTtcbiAgfVxuICAwICE9PSBvICYmICgxID09PSBvID8gKGMuZ2V0ID0gdS5nZXQsIGMuc2V0ID0gdS5zZXQpIDogMiA9PT0gbyA/IGMudmFsdWUgPSB1IDogMyA9PT0gbyA/IGMuZ2V0ID0gdSA6IDQgPT09IG8gJiYgKGMuc2V0ID0gdSksIG4gPyAxID09PSBvID8gKGUucHVzaChmdW5jdGlvbiAoZSwgdCkge1xuICAgIHJldHVybiB1LmdldC5jYWxsKGUsIHQpO1xuICB9KSwgZS5wdXNoKGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgcmV0dXJuIHUuc2V0LmNhbGwoZSwgdCk7XG4gIH0pKSA6IDIgPT09IG8gPyBlLnB1c2godSkgOiBlLnB1c2goZnVuY3Rpb24gKGUsIHQpIHtcbiAgICByZXR1cm4gdS5jYWxsKGUsIHQpO1xuICB9KSA6IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCByLCBjKSk7XG59XG5mdW5jdGlvbiBvbGRfYXBwbHlNZW1iZXJEZWNzKGUsIHQsIGEsIHIsIG8pIHtcbiAgZm9yICh2YXIgaSwgbiwgbCA9IG5ldyBNYXAoKSwgcyA9IG5ldyBNYXAoKSwgYyA9IDA7IGMgPCBvLmxlbmd0aDsgYysrKSB7XG4gICAgdmFyIGQgPSBvW2NdO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGQpKSB7XG4gICAgICB2YXIgdSxcbiAgICAgICAgZixcbiAgICAgICAgcCxcbiAgICAgICAgdiA9IGRbMV0sXG4gICAgICAgIGggPSBkWzJdLFxuICAgICAgICB5ID0gZC5sZW5ndGggPiAzLFxuICAgICAgICBiID0gdiA+PSA1O1xuICAgICAgaWYgKGIgPyAodSA9IHQsIGYgPSByLCAwICE9PSAodiAtPSA1KSAmJiAocCA9IG4gPSBuIHx8IFtdKSkgOiAodSA9IHQucHJvdG90eXBlLCBmID0gYSwgMCAhPT0gdiAmJiAocCA9IGkgPSBpIHx8IFtdKSksIDAgIT09IHYgJiYgIXkpIHtcbiAgICAgICAgdmFyIGcgPSBiID8gcyA6IGwsXG4gICAgICAgICAgbSA9IGcuZ2V0KGgpIHx8IDA7XG4gICAgICAgIGlmICghMCA9PT0gbSB8fCAzID09PSBtICYmIDQgIT09IHYgfHwgNCA9PT0gbSAmJiAzICE9PSB2KSB0aHJvdyBuZXcgRXJyb3IoXCJBdHRlbXB0ZWQgdG8gZGVjb3JhdGUgYSBwdWJsaWMgbWV0aG9kL2FjY2Vzc29yIHRoYXQgaGFzIHRoZSBzYW1lIG5hbWUgYXMgYSBwcmV2aW91c2x5IGRlY29yYXRlZCBwdWJsaWMgbWV0aG9kL2FjY2Vzc29yLiBUaGlzIGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIGJ5IHRoZSBkZWNvcmF0b3JzIHBsdWdpbi4gUHJvcGVydHkgbmFtZSB3YXM6IFwiICsgaCk7XG4gICAgICAgICFtICYmIHYgPiAyID8gZy5zZXQoaCwgdikgOiBnLnNldChoLCAhMCk7XG4gICAgICB9XG4gICAgICBvbGRfYXBwbHlNZW1iZXJEZWMoZSwgdSwgZCwgaCwgdiwgYiwgeSwgZiwgcCk7XG4gICAgfVxuICB9XG4gIG9sZF9wdXNoSW5pdGlhbGl6ZXJzKGUsIGkpLCBvbGRfcHVzaEluaXRpYWxpemVycyhlLCBuKTtcbn1cbmZ1bmN0aW9uIG9sZF9wdXNoSW5pdGlhbGl6ZXJzKGUsIHQpIHtcbiAgdCAmJiBlLnB1c2goZnVuY3Rpb24gKGUpIHtcbiAgICBmb3IgKHZhciBhID0gMDsgYSA8IHQubGVuZ3RoOyBhKyspIHRbYV0uY2FsbChlKTtcbiAgICByZXR1cm4gZTtcbiAgfSk7XG59XG5mdW5jdGlvbiBvbGRfYXBwbHlDbGFzc0RlY3MoZSwgdCwgYSwgcikge1xuICBpZiAoci5sZW5ndGggPiAwKSB7XG4gICAgZm9yICh2YXIgbyA9IFtdLCBpID0gdCwgbiA9IHQubmFtZSwgbCA9IHIubGVuZ3RoIC0gMTsgbCA+PSAwOyBsLS0pIHtcbiAgICAgIHZhciBzID0ge1xuICAgICAgICB2OiAhMVxuICAgICAgfTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBjID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICBraW5kOiBcImNsYXNzXCIsXG4gICAgICAgICAgICBuYW1lOiBuLFxuICAgICAgICAgICAgYWRkSW5pdGlhbGl6ZXI6IG9sZF9jcmVhdGVBZGRJbml0aWFsaXplck1ldGhvZChvLCBzKVxuICAgICAgICAgIH0sIG9sZF9jcmVhdGVNZXRhZGF0YU1ldGhvZHNGb3JQcm9wZXJ0eShhLCAwLCBuLCBzKSksXG4gICAgICAgICAgZCA9IHJbbF0oaSwgYyk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBzLnYgPSAhMDtcbiAgICAgIH1cbiAgICAgIHZvaWQgMCAhPT0gZCAmJiAob2xkX2Fzc2VydFZhbGlkUmV0dXJuVmFsdWUoMTAsIGQpLCBpID0gZCk7XG4gICAgfVxuICAgIGUucHVzaChpLCBmdW5jdGlvbiAoKSB7XG4gICAgICBmb3IgKHZhciBlID0gMDsgZSA8IG8ubGVuZ3RoOyBlKyspIG9bZV0uY2FsbChpKTtcbiAgICB9KTtcbiAgfVxufVxuZnVuY3Rpb24gX2FwcGx5RGVjcyhlLCB0LCBhKSB7XG4gIHZhciByID0gW10sXG4gICAgbyA9IHt9LFxuICAgIGkgPSB7fTtcbiAgcmV0dXJuIG9sZF9hcHBseU1lbWJlckRlY3MociwgZSwgaSwgbywgdCksIG9sZF9jb252ZXJ0TWV0YWRhdGFNYXBUb0ZpbmFsKGUucHJvdG90eXBlLCBpKSwgb2xkX2FwcGx5Q2xhc3NEZWNzKHIsIGUsIG8sIGEpLCBvbGRfY29udmVydE1ldGFkYXRhTWFwVG9GaW5hbChlLCBvKSwgcjtcbn1cbmZ1bmN0aW9uIGFwcGx5RGVjczIyMDNGYWN0b3J5KCkge1xuICBmdW5jdGlvbiBjcmVhdGVBZGRJbml0aWFsaXplck1ldGhvZChlLCB0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAhZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgaWYgKGUudikgdGhyb3cgbmV3IEVycm9yKFwiYXR0ZW1wdGVkIHRvIGNhbGwgXCIgKyB0ICsgXCIgYWZ0ZXIgZGVjb3JhdGlvbiB3YXMgZmluaXNoZWRcIik7XG4gICAgICB9KHQsIFwiYWRkSW5pdGlhbGl6ZXJcIiksIGFzc2VydENhbGxhYmxlKHIsIFwiQW4gaW5pdGlhbGl6ZXJcIiksIGUucHVzaChyKTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIG1lbWJlckRlYyhlLCB0LCByLCBhLCBuLCBpLCBzLCBvKSB7XG4gICAgdmFyIGM7XG4gICAgc3dpdGNoIChuKSB7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIGMgPSBcImFjY2Vzc29yXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBjID0gXCJtZXRob2RcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM6XG4gICAgICAgIGMgPSBcImdldHRlclwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNDpcbiAgICAgICAgYyA9IFwic2V0dGVyXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYyA9IFwiZmllbGRcIjtcbiAgICB9XG4gICAgdmFyIGwsXG4gICAgICB1LFxuICAgICAgZiA9IHtcbiAgICAgICAga2luZDogYyxcbiAgICAgICAgbmFtZTogcyA/IFwiI1wiICsgdCA6IHQsXG4gICAgICAgIHN0YXRpYzogaSxcbiAgICAgICAgcHJpdmF0ZTogc1xuICAgICAgfSxcbiAgICAgIHAgPSB7XG4gICAgICAgIHY6ICExXG4gICAgICB9O1xuICAgIDAgIT09IG4gJiYgKGYuYWRkSW5pdGlhbGl6ZXIgPSBjcmVhdGVBZGRJbml0aWFsaXplck1ldGhvZChhLCBwKSksIDAgPT09IG4gPyBzID8gKGwgPSByLmdldCwgdSA9IHIuc2V0KSA6IChsID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXNbdF07XG4gICAgfSwgdSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzW3RdID0gZTtcbiAgICB9KSA6IDIgPT09IG4gPyBsID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHIudmFsdWU7XG4gICAgfSA6ICgxICE9PSBuICYmIDMgIT09IG4gfHwgKGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gci5nZXQuY2FsbCh0aGlzKTtcbiAgICB9KSwgMSAhPT0gbiAmJiA0ICE9PSBuIHx8ICh1ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHIuc2V0LmNhbGwodGhpcywgZSk7XG4gICAgfSkpLCBmLmFjY2VzcyA9IGwgJiYgdSA/IHtcbiAgICAgIGdldDogbCxcbiAgICAgIHNldDogdVxuICAgIH0gOiBsID8ge1xuICAgICAgZ2V0OiBsXG4gICAgfSA6IHtcbiAgICAgIHNldDogdVxuICAgIH07XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBlKG8sIGYpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBwLnYgPSAhMDtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gYXNzZXJ0Q2FsbGFibGUoZSwgdCkge1xuICAgIGlmIChcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIGUpIHRocm93IG5ldyBUeXBlRXJyb3IodCArIFwiIG11c3QgYmUgYSBmdW5jdGlvblwiKTtcbiAgfVxuICBmdW5jdGlvbiBhc3NlcnRWYWxpZFJldHVyblZhbHVlKGUsIHQpIHtcbiAgICB2YXIgciA9IHR5cGVvZiB0O1xuICAgIGlmICgxID09PSBlKSB7XG4gICAgICBpZiAoXCJvYmplY3RcIiAhPT0gciB8fCBudWxsID09PSB0KSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYWNjZXNzb3IgZGVjb3JhdG9ycyBtdXN0IHJldHVybiBhbiBvYmplY3Qgd2l0aCBnZXQsIHNldCwgb3IgaW5pdCBwcm9wZXJ0aWVzIG9yIHZvaWQgMFwiKTtcbiAgICAgIHZvaWQgMCAhPT0gdC5nZXQgJiYgYXNzZXJ0Q2FsbGFibGUodC5nZXQsIFwiYWNjZXNzb3IuZ2V0XCIpLCB2b2lkIDAgIT09IHQuc2V0ICYmIGFzc2VydENhbGxhYmxlKHQuc2V0LCBcImFjY2Vzc29yLnNldFwiKSwgdm9pZCAwICE9PSB0LmluaXQgJiYgYXNzZXJ0Q2FsbGFibGUodC5pbml0LCBcImFjY2Vzc29yLmluaXRcIik7XG4gICAgfSBlbHNlIGlmIChcImZ1bmN0aW9uXCIgIT09IHIpIHtcbiAgICAgIHZhciBhO1xuICAgICAgdGhyb3cgYSA9IDAgPT09IGUgPyBcImZpZWxkXCIgOiAxMCA9PT0gZSA/IFwiY2xhc3NcIiA6IFwibWV0aG9kXCIsIG5ldyBUeXBlRXJyb3IoYSArIFwiIGRlY29yYXRvcnMgbXVzdCByZXR1cm4gYSBmdW5jdGlvbiBvciB2b2lkIDBcIik7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGFwcGx5TWVtYmVyRGVjKGUsIHQsIHIsIGEsIG4sIGksIHMsIG8pIHtcbiAgICB2YXIgYyxcbiAgICAgIGwsXG4gICAgICB1LFxuICAgICAgZixcbiAgICAgIHAsXG4gICAgICBkLFxuICAgICAgaCA9IHJbMF07XG4gICAgaWYgKHMgPyBjID0gMCA9PT0gbiB8fCAxID09PSBuID8ge1xuICAgICAgZ2V0OiByWzNdLFxuICAgICAgc2V0OiByWzRdXG4gICAgfSA6IDMgPT09IG4gPyB7XG4gICAgICBnZXQ6IHJbM11cbiAgICB9IDogNCA9PT0gbiA/IHtcbiAgICAgIHNldDogclszXVxuICAgIH0gOiB7XG4gICAgICB2YWx1ZTogclszXVxuICAgIH0gOiAwICE9PSBuICYmIChjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCBhKSksIDEgPT09IG4gPyB1ID0ge1xuICAgICAgZ2V0OiBjLmdldCxcbiAgICAgIHNldDogYy5zZXRcbiAgICB9IDogMiA9PT0gbiA/IHUgPSBjLnZhbHVlIDogMyA9PT0gbiA/IHUgPSBjLmdldCA6IDQgPT09IG4gJiYgKHUgPSBjLnNldCksIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgaCkgdm9pZCAwICE9PSAoZiA9IG1lbWJlckRlYyhoLCBhLCBjLCBvLCBuLCBpLCBzLCB1KSkgJiYgKGFzc2VydFZhbGlkUmV0dXJuVmFsdWUobiwgZiksIDAgPT09IG4gPyBsID0gZiA6IDEgPT09IG4gPyAobCA9IGYuaW5pdCwgcCA9IGYuZ2V0IHx8IHUuZ2V0LCBkID0gZi5zZXQgfHwgdS5zZXQsIHUgPSB7XG4gICAgICBnZXQ6IHAsXG4gICAgICBzZXQ6IGRcbiAgICB9KSA6IHUgPSBmKTtlbHNlIGZvciAodmFyIHYgPSBoLmxlbmd0aCAtIDE7IHYgPj0gMDsgdi0tKSB7XG4gICAgICB2YXIgZztcbiAgICAgIGlmICh2b2lkIDAgIT09IChmID0gbWVtYmVyRGVjKGhbdl0sIGEsIGMsIG8sIG4sIGksIHMsIHUpKSkgYXNzZXJ0VmFsaWRSZXR1cm5WYWx1ZShuLCBmKSwgMCA9PT0gbiA/IGcgPSBmIDogMSA9PT0gbiA/IChnID0gZi5pbml0LCBwID0gZi5nZXQgfHwgdS5nZXQsIGQgPSBmLnNldCB8fCB1LnNldCwgdSA9IHtcbiAgICAgICAgZ2V0OiBwLFxuICAgICAgICBzZXQ6IGRcbiAgICAgIH0pIDogdSA9IGYsIHZvaWQgMCAhPT0gZyAmJiAodm9pZCAwID09PSBsID8gbCA9IGcgOiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGwgPyBsID0gW2wsIGddIDogbC5wdXNoKGcpKTtcbiAgICB9XG4gICAgaWYgKDAgPT09IG4gfHwgMSA9PT0gbikge1xuICAgICAgaWYgKHZvaWQgMCA9PT0gbCkgbCA9IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgIHJldHVybiB0O1xuICAgICAgfTtlbHNlIGlmIChcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIGwpIHtcbiAgICAgICAgdmFyIHkgPSBsO1xuICAgICAgICBsID0gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICBmb3IgKHZhciByID0gdCwgYSA9IDA7IGEgPCB5Lmxlbmd0aDsgYSsrKSByID0geVthXS5jYWxsKGUsIHIpO1xuICAgICAgICAgIHJldHVybiByO1xuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG0gPSBsO1xuICAgICAgICBsID0gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICByZXR1cm4gbS5jYWxsKGUsIHQpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgZS5wdXNoKGwpO1xuICAgIH1cbiAgICAwICE9PSBuICYmICgxID09PSBuID8gKGMuZ2V0ID0gdS5nZXQsIGMuc2V0ID0gdS5zZXQpIDogMiA9PT0gbiA/IGMudmFsdWUgPSB1IDogMyA9PT0gbiA/IGMuZ2V0ID0gdSA6IDQgPT09IG4gJiYgKGMuc2V0ID0gdSksIHMgPyAxID09PSBuID8gKGUucHVzaChmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgcmV0dXJuIHUuZ2V0LmNhbGwoZSwgdCk7XG4gICAgfSksIGUucHVzaChmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgcmV0dXJuIHUuc2V0LmNhbGwoZSwgdCk7XG4gICAgfSkpIDogMiA9PT0gbiA/IGUucHVzaCh1KSA6IGUucHVzaChmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgcmV0dXJuIHUuY2FsbChlLCB0KTtcbiAgICB9KSA6IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBhLCBjKSk7XG4gIH1cbiAgZnVuY3Rpb24gcHVzaEluaXRpYWxpemVycyhlLCB0KSB7XG4gICAgdCAmJiBlLnB1c2goZnVuY3Rpb24gKGUpIHtcbiAgICAgIGZvciAodmFyIHIgPSAwOyByIDwgdC5sZW5ndGg7IHIrKykgdFtyXS5jYWxsKGUpO1xuICAgICAgcmV0dXJuIGU7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uIChlLCB0LCByKSB7XG4gICAgdmFyIGEgPSBbXTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGUsIHQsIHIpIHtcbiAgICAgIGZvciAodmFyIGEsIG4sIGkgPSBuZXcgTWFwKCksIHMgPSBuZXcgTWFwKCksIG8gPSAwOyBvIDwgci5sZW5ndGg7IG8rKykge1xuICAgICAgICB2YXIgYyA9IHJbb107XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGMpKSB7XG4gICAgICAgICAgdmFyIGwsXG4gICAgICAgICAgICB1LFxuICAgICAgICAgICAgZiA9IGNbMV0sXG4gICAgICAgICAgICBwID0gY1syXSxcbiAgICAgICAgICAgIGQgPSBjLmxlbmd0aCA+IDMsXG4gICAgICAgICAgICBoID0gZiA+PSA1O1xuICAgICAgICAgIGlmIChoID8gKGwgPSB0LCAwICE9IChmIC09IDUpICYmICh1ID0gbiA9IG4gfHwgW10pKSA6IChsID0gdC5wcm90b3R5cGUsIDAgIT09IGYgJiYgKHUgPSBhID0gYSB8fCBbXSkpLCAwICE9PSBmICYmICFkKSB7XG4gICAgICAgICAgICB2YXIgdiA9IGggPyBzIDogaSxcbiAgICAgICAgICAgICAgZyA9IHYuZ2V0KHApIHx8IDA7XG4gICAgICAgICAgICBpZiAoITAgPT09IGcgfHwgMyA9PT0gZyAmJiA0ICE9PSBmIHx8IDQgPT09IGcgJiYgMyAhPT0gZikgdGhyb3cgbmV3IEVycm9yKFwiQXR0ZW1wdGVkIHRvIGRlY29yYXRlIGEgcHVibGljIG1ldGhvZC9hY2Nlc3NvciB0aGF0IGhhcyB0aGUgc2FtZSBuYW1lIGFzIGEgcHJldmlvdXNseSBkZWNvcmF0ZWQgcHVibGljIG1ldGhvZC9hY2Nlc3Nvci4gVGhpcyBpcyBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBieSB0aGUgZGVjb3JhdG9ycyBwbHVnaW4uIFByb3BlcnR5IG5hbWUgd2FzOiBcIiArIHApO1xuICAgICAgICAgICAgIWcgJiYgZiA+IDIgPyB2LnNldChwLCBmKSA6IHYuc2V0KHAsICEwKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYXBwbHlNZW1iZXJEZWMoZSwgbCwgYywgcCwgZiwgaCwgZCwgdSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHB1c2hJbml0aWFsaXplcnMoZSwgYSksIHB1c2hJbml0aWFsaXplcnMoZSwgbik7XG4gICAgfShhLCBlLCB0KSwgZnVuY3Rpb24gKGUsIHQsIHIpIHtcbiAgICAgIGlmIChyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9yICh2YXIgYSA9IFtdLCBuID0gdCwgaSA9IHQubmFtZSwgcyA9IHIubGVuZ3RoIC0gMTsgcyA+PSAwOyBzLS0pIHtcbiAgICAgICAgICB2YXIgbyA9IHtcbiAgICAgICAgICAgIHY6ICExXG4gICAgICAgICAgfTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIGMgPSByW3NdKG4sIHtcbiAgICAgICAgICAgICAga2luZDogXCJjbGFzc1wiLFxuICAgICAgICAgICAgICBuYW1lOiBpLFxuICAgICAgICAgICAgICBhZGRJbml0aWFsaXplcjogY3JlYXRlQWRkSW5pdGlhbGl6ZXJNZXRob2QoYSwgbylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBvLnYgPSAhMDtcbiAgICAgICAgICB9XG4gICAgICAgICAgdm9pZCAwICE9PSBjICYmIChhc3NlcnRWYWxpZFJldHVyblZhbHVlKDEwLCBjKSwgbiA9IGMpO1xuICAgICAgICB9XG4gICAgICAgIGUucHVzaChuLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZm9yICh2YXIgZSA9IDA7IGUgPCBhLmxlbmd0aDsgZSsrKSBhW2VdLmNhbGwobik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0oYSwgZSwgciksIGE7XG4gIH07XG59XG52YXIgYXBwbHlEZWNzMjIwM0ltcGw7XG5mdW5jdGlvbiBfYXBwbHlEZWNzMjIwMyhlLCB0LCByKSB7XG4gIHJldHVybiAoYXBwbHlEZWNzMjIwM0ltcGwgPSBhcHBseURlY3MyMjAzSW1wbCB8fCBhcHBseURlY3MyMjAzRmFjdG9yeSgpKShlLCB0LCByKTtcbn1cbmZ1bmN0aW9uIGFwcGx5RGVjczIyMDNSRmFjdG9yeSgpIHtcbiAgZnVuY3Rpb24gY3JlYXRlQWRkSW5pdGlhbGl6ZXJNZXRob2QoZSwgdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocikge1xuICAgICAgIWZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgIGlmIChlLnYpIHRocm93IG5ldyBFcnJvcihcImF0dGVtcHRlZCB0byBjYWxsIFwiICsgdCArIFwiIGFmdGVyIGRlY29yYXRpb24gd2FzIGZpbmlzaGVkXCIpO1xuICAgICAgfSh0LCBcImFkZEluaXRpYWxpemVyXCIpLCBhc3NlcnRDYWxsYWJsZShyLCBcIkFuIGluaXRpYWxpemVyXCIpLCBlLnB1c2gocik7XG4gICAgfTtcbiAgfVxuICBmdW5jdGlvbiBtZW1iZXJEZWMoZSwgdCwgciwgbiwgYSwgaSwgcywgbykge1xuICAgIHZhciBjO1xuICAgIHN3aXRjaCAoYSkge1xuICAgICAgY2FzZSAxOlxuICAgICAgICBjID0gXCJhY2Nlc3NvclwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgYyA9IFwibWV0aG9kXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICBjID0gXCJnZXR0ZXJcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDQ6XG4gICAgICAgIGMgPSBcInNldHRlclwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGMgPSBcImZpZWxkXCI7XG4gICAgfVxuICAgIHZhciBsLFxuICAgICAgdSxcbiAgICAgIGYgPSB7XG4gICAgICAgIGtpbmQ6IGMsXG4gICAgICAgIG5hbWU6IHMgPyBcIiNcIiArIHQgOiB0LFxuICAgICAgICBzdGF0aWM6IGksXG4gICAgICAgIHByaXZhdGU6IHNcbiAgICAgIH0sXG4gICAgICBwID0ge1xuICAgICAgICB2OiAhMVxuICAgICAgfTtcbiAgICAwICE9PSBhICYmIChmLmFkZEluaXRpYWxpemVyID0gY3JlYXRlQWRkSW5pdGlhbGl6ZXJNZXRob2QobiwgcCkpLCAwID09PSBhID8gcyA/IChsID0gci5nZXQsIHUgPSByLnNldCkgOiAobCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzW3RdO1xuICAgIH0sIHUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpc1t0XSA9IGU7XG4gICAgfSkgOiAyID09PSBhID8gbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiByLnZhbHVlO1xuICAgIH0gOiAoMSAhPT0gYSAmJiAzICE9PSBhIHx8IChsID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHIuZ2V0LmNhbGwodGhpcyk7XG4gICAgfSksIDEgIT09IGEgJiYgNCAhPT0gYSB8fCAodSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICByLnNldC5jYWxsKHRoaXMsIGUpO1xuICAgIH0pKSwgZi5hY2Nlc3MgPSBsICYmIHUgPyB7XG4gICAgICBnZXQ6IGwsXG4gICAgICBzZXQ6IHVcbiAgICB9IDogbCA/IHtcbiAgICAgIGdldDogbFxuICAgIH0gOiB7XG4gICAgICBzZXQ6IHVcbiAgICB9O1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZShvLCBmKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgcC52ID0gITA7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGFzc2VydENhbGxhYmxlKGUsIHQpIHtcbiAgICBpZiAoXCJmdW5jdGlvblwiICE9IHR5cGVvZiBlKSB0aHJvdyBuZXcgVHlwZUVycm9yKHQgKyBcIiBtdXN0IGJlIGEgZnVuY3Rpb25cIik7XG4gIH1cbiAgZnVuY3Rpb24gYXNzZXJ0VmFsaWRSZXR1cm5WYWx1ZShlLCB0KSB7XG4gICAgdmFyIHIgPSB0eXBlb2YgdDtcbiAgICBpZiAoMSA9PT0gZSkge1xuICAgICAgaWYgKFwib2JqZWN0XCIgIT09IHIgfHwgbnVsbCA9PT0gdCkgdGhyb3cgbmV3IFR5cGVFcnJvcihcImFjY2Vzc29yIGRlY29yYXRvcnMgbXVzdCByZXR1cm4gYW4gb2JqZWN0IHdpdGggZ2V0LCBzZXQsIG9yIGluaXQgcHJvcGVydGllcyBvciB2b2lkIDBcIik7XG4gICAgICB2b2lkIDAgIT09IHQuZ2V0ICYmIGFzc2VydENhbGxhYmxlKHQuZ2V0LCBcImFjY2Vzc29yLmdldFwiKSwgdm9pZCAwICE9PSB0LnNldCAmJiBhc3NlcnRDYWxsYWJsZSh0LnNldCwgXCJhY2Nlc3Nvci5zZXRcIiksIHZvaWQgMCAhPT0gdC5pbml0ICYmIGFzc2VydENhbGxhYmxlKHQuaW5pdCwgXCJhY2Nlc3Nvci5pbml0XCIpO1xuICAgIH0gZWxzZSBpZiAoXCJmdW5jdGlvblwiICE9PSByKSB7XG4gICAgICB2YXIgbjtcbiAgICAgIHRocm93IG4gPSAwID09PSBlID8gXCJmaWVsZFwiIDogMTAgPT09IGUgPyBcImNsYXNzXCIgOiBcIm1ldGhvZFwiLCBuZXcgVHlwZUVycm9yKG4gKyBcIiBkZWNvcmF0b3JzIG11c3QgcmV0dXJuIGEgZnVuY3Rpb24gb3Igdm9pZCAwXCIpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBhcHBseU1lbWJlckRlYyhlLCB0LCByLCBuLCBhLCBpLCBzLCBvKSB7XG4gICAgdmFyIGMsXG4gICAgICBsLFxuICAgICAgdSxcbiAgICAgIGYsXG4gICAgICBwLFxuICAgICAgZCxcbiAgICAgIGggPSByWzBdO1xuICAgIGlmIChzID8gYyA9IDAgPT09IGEgfHwgMSA9PT0gYSA/IHtcbiAgICAgIGdldDogclszXSxcbiAgICAgIHNldDogcls0XVxuICAgIH0gOiAzID09PSBhID8ge1xuICAgICAgZ2V0OiByWzNdXG4gICAgfSA6IDQgPT09IGEgPyB7XG4gICAgICBzZXQ6IHJbM11cbiAgICB9IDoge1xuICAgICAgdmFsdWU6IHJbM11cbiAgICB9IDogMCAhPT0gYSAmJiAoYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgbikpLCAxID09PSBhID8gdSA9IHtcbiAgICAgIGdldDogYy5nZXQsXG4gICAgICBzZXQ6IGMuc2V0XG4gICAgfSA6IDIgPT09IGEgPyB1ID0gYy52YWx1ZSA6IDMgPT09IGEgPyB1ID0gYy5nZXQgOiA0ID09PSBhICYmICh1ID0gYy5zZXQpLCBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGgpIHZvaWQgMCAhPT0gKGYgPSBtZW1iZXJEZWMoaCwgbiwgYywgbywgYSwgaSwgcywgdSkpICYmIChhc3NlcnRWYWxpZFJldHVyblZhbHVlKGEsIGYpLCAwID09PSBhID8gbCA9IGYgOiAxID09PSBhID8gKGwgPSBmLmluaXQsIHAgPSBmLmdldCB8fCB1LmdldCwgZCA9IGYuc2V0IHx8IHUuc2V0LCB1ID0ge1xuICAgICAgZ2V0OiBwLFxuICAgICAgc2V0OiBkXG4gICAgfSkgOiB1ID0gZik7ZWxzZSBmb3IgKHZhciB2ID0gaC5sZW5ndGggLSAxOyB2ID49IDA7IHYtLSkge1xuICAgICAgdmFyIGc7XG4gICAgICBpZiAodm9pZCAwICE9PSAoZiA9IG1lbWJlckRlYyhoW3ZdLCBuLCBjLCBvLCBhLCBpLCBzLCB1KSkpIGFzc2VydFZhbGlkUmV0dXJuVmFsdWUoYSwgZiksIDAgPT09IGEgPyBnID0gZiA6IDEgPT09IGEgPyAoZyA9IGYuaW5pdCwgcCA9IGYuZ2V0IHx8IHUuZ2V0LCBkID0gZi5zZXQgfHwgdS5zZXQsIHUgPSB7XG4gICAgICAgIGdldDogcCxcbiAgICAgICAgc2V0OiBkXG4gICAgICB9KSA6IHUgPSBmLCB2b2lkIDAgIT09IGcgJiYgKHZvaWQgMCA9PT0gbCA/IGwgPSBnIDogXCJmdW5jdGlvblwiID09IHR5cGVvZiBsID8gbCA9IFtsLCBnXSA6IGwucHVzaChnKSk7XG4gICAgfVxuICAgIGlmICgwID09PSBhIHx8IDEgPT09IGEpIHtcbiAgICAgIGlmICh2b2lkIDAgPT09IGwpIGwgPSBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICByZXR1cm4gdDtcbiAgICAgIH07ZWxzZSBpZiAoXCJmdW5jdGlvblwiICE9IHR5cGVvZiBsKSB7XG4gICAgICAgIHZhciB5ID0gbDtcbiAgICAgICAgbCA9IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgZm9yICh2YXIgciA9IHQsIG4gPSAwOyBuIDwgeS5sZW5ndGg7IG4rKykgciA9IHlbbl0uY2FsbChlLCByKTtcbiAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBtID0gbDtcbiAgICAgICAgbCA9IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgICAgcmV0dXJuIG0uY2FsbChlLCB0KTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGUucHVzaChsKTtcbiAgICB9XG4gICAgMCAhPT0gYSAmJiAoMSA9PT0gYSA/IChjLmdldCA9IHUuZ2V0LCBjLnNldCA9IHUuc2V0KSA6IDIgPT09IGEgPyBjLnZhbHVlID0gdSA6IDMgPT09IGEgPyBjLmdldCA9IHUgOiA0ID09PSBhICYmIChjLnNldCA9IHUpLCBzID8gMSA9PT0gYSA/IChlLnB1c2goZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgIHJldHVybiB1LmdldC5jYWxsKGUsIHQpO1xuICAgIH0pLCBlLnB1c2goZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgIHJldHVybiB1LnNldC5jYWxsKGUsIHQpO1xuICAgIH0pKSA6IDIgPT09IGEgPyBlLnB1c2godSkgOiBlLnB1c2goZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgIHJldHVybiB1LmNhbGwoZSwgdCk7XG4gICAgfSkgOiBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgbiwgYykpO1xuICB9XG4gIGZ1bmN0aW9uIGFwcGx5TWVtYmVyRGVjcyhlLCB0KSB7XG4gICAgZm9yICh2YXIgciwgbiwgYSA9IFtdLCBpID0gbmV3IE1hcCgpLCBzID0gbmV3IE1hcCgpLCBvID0gMDsgbyA8IHQubGVuZ3RoOyBvKyspIHtcbiAgICAgIHZhciBjID0gdFtvXTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGMpKSB7XG4gICAgICAgIHZhciBsLFxuICAgICAgICAgIHUsXG4gICAgICAgICAgZiA9IGNbMV0sXG4gICAgICAgICAgcCA9IGNbMl0sXG4gICAgICAgICAgZCA9IGMubGVuZ3RoID4gMyxcbiAgICAgICAgICBoID0gZiA+PSA1O1xuICAgICAgICBpZiAoaCA/IChsID0gZSwgMCAhPT0gKGYgLT0gNSkgJiYgKHUgPSBuID0gbiB8fCBbXSkpIDogKGwgPSBlLnByb3RvdHlwZSwgMCAhPT0gZiAmJiAodSA9IHIgPSByIHx8IFtdKSksIDAgIT09IGYgJiYgIWQpIHtcbiAgICAgICAgICB2YXIgdiA9IGggPyBzIDogaSxcbiAgICAgICAgICAgIGcgPSB2LmdldChwKSB8fCAwO1xuICAgICAgICAgIGlmICghMCA9PT0gZyB8fCAzID09PSBnICYmIDQgIT09IGYgfHwgNCA9PT0gZyAmJiAzICE9PSBmKSB0aHJvdyBuZXcgRXJyb3IoXCJBdHRlbXB0ZWQgdG8gZGVjb3JhdGUgYSBwdWJsaWMgbWV0aG9kL2FjY2Vzc29yIHRoYXQgaGFzIHRoZSBzYW1lIG5hbWUgYXMgYSBwcmV2aW91c2x5IGRlY29yYXRlZCBwdWJsaWMgbWV0aG9kL2FjY2Vzc29yLiBUaGlzIGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIGJ5IHRoZSBkZWNvcmF0b3JzIHBsdWdpbi4gUHJvcGVydHkgbmFtZSB3YXM6IFwiICsgcCk7XG4gICAgICAgICAgIWcgJiYgZiA+IDIgPyB2LnNldChwLCBmKSA6IHYuc2V0KHAsICEwKTtcbiAgICAgICAgfVxuICAgICAgICBhcHBseU1lbWJlckRlYyhhLCBsLCBjLCBwLCBmLCBoLCBkLCB1KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHB1c2hJbml0aWFsaXplcnMoYSwgciksIHB1c2hJbml0aWFsaXplcnMoYSwgbiksIGE7XG4gIH1cbiAgZnVuY3Rpb24gcHVzaEluaXRpYWxpemVycyhlLCB0KSB7XG4gICAgdCAmJiBlLnB1c2goZnVuY3Rpb24gKGUpIHtcbiAgICAgIGZvciAodmFyIHIgPSAwOyByIDwgdC5sZW5ndGg7IHIrKykgdFtyXS5jYWxsKGUpO1xuICAgICAgcmV0dXJuIGU7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uIChlLCB0LCByKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGU6IGFwcGx5TWVtYmVyRGVjcyhlLCB0KSxcbiAgICAgIGdldCBjKCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICBpZiAodC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKHZhciByID0gW10sIG4gPSBlLCBhID0gZS5uYW1lLCBpID0gdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICB2YXIgcyA9IHtcbiAgICAgICAgICAgICAgICB2OiAhMVxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBvID0gdFtpXShuLCB7XG4gICAgICAgICAgICAgICAgICBraW5kOiBcImNsYXNzXCIsXG4gICAgICAgICAgICAgICAgICBuYW1lOiBhLFxuICAgICAgICAgICAgICAgICAgYWRkSW5pdGlhbGl6ZXI6IGNyZWF0ZUFkZEluaXRpYWxpemVyTWV0aG9kKHIsIHMpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgcy52ID0gITA7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdm9pZCAwICE9PSBvICYmIChhc3NlcnRWYWxpZFJldHVyblZhbHVlKDEwLCBvKSwgbiA9IG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFtuLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIGUgPSAwOyBlIDwgci5sZW5ndGg7IGUrKykgcltlXS5jYWxsKG4pO1xuICAgICAgICAgICAgfV07XG4gICAgICAgICAgfVxuICAgICAgICB9KGUsIHIpO1xuICAgICAgfVxuICAgIH07XG4gIH07XG59XG5mdW5jdGlvbiBfYXBwbHlEZWNzMjIwM1IoZSwgdCwgcikge1xuICByZXR1cm4gKF9hcHBseURlY3MyMjAzUiA9IGFwcGx5RGVjczIyMDNSRmFjdG9yeSgpKShlLCB0LCByKTtcbn1cbmZ1bmN0aW9uIGFwcGx5RGVjczIzMDFGYWN0b3J5KCkge1xuICBmdW5jdGlvbiBjcmVhdGVBZGRJbml0aWFsaXplck1ldGhvZChlLCB0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyKSB7XG4gICAgICAhZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgaWYgKGUudikgdGhyb3cgbmV3IEVycm9yKFwiYXR0ZW1wdGVkIHRvIGNhbGwgXCIgKyB0ICsgXCIgYWZ0ZXIgZGVjb3JhdGlvbiB3YXMgZmluaXNoZWRcIik7XG4gICAgICB9KHQsIFwiYWRkSW5pdGlhbGl6ZXJcIiksIGFzc2VydENhbGxhYmxlKHIsIFwiQW4gaW5pdGlhbGl6ZXJcIiksIGUucHVzaChyKTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIGFzc2VydEluc3RhbmNlSWZQcml2YXRlKGUsIHQpIHtcbiAgICBpZiAoIWUodCkpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJBdHRlbXB0ZWQgdG8gYWNjZXNzIHByaXZhdGUgZWxlbWVudCBvbiBub24taW5zdGFuY2VcIik7XG4gIH1cbiAgZnVuY3Rpb24gbWVtYmVyRGVjKGUsIHQsIHIsIG4sIGEsIGksIHMsIG8sIGMpIHtcbiAgICB2YXIgdTtcbiAgICBzd2l0Y2ggKGEpIHtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgdSA9IFwiYWNjZXNzb3JcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIHUgPSBcIm1ldGhvZFwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgdSA9IFwiZ2V0dGVyXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA0OlxuICAgICAgICB1ID0gXCJzZXR0ZXJcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB1ID0gXCJmaWVsZFwiO1xuICAgIH1cbiAgICB2YXIgbCxcbiAgICAgIGYsXG4gICAgICBwID0ge1xuICAgICAgICBraW5kOiB1LFxuICAgICAgICBuYW1lOiBzID8gXCIjXCIgKyB0IDogdCxcbiAgICAgICAgc3RhdGljOiBpLFxuICAgICAgICBwcml2YXRlOiBzXG4gICAgICB9LFxuICAgICAgZCA9IHtcbiAgICAgICAgdjogITFcbiAgICAgIH07XG4gICAgaWYgKDAgIT09IGEgJiYgKHAuYWRkSW5pdGlhbGl6ZXIgPSBjcmVhdGVBZGRJbml0aWFsaXplck1ldGhvZChuLCBkKSksIHMgfHwgMCAhPT0gYSAmJiAyICE9PSBhKSB7XG4gICAgICBpZiAoMiA9PT0gYSkgbCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBhc3NlcnRJbnN0YW5jZUlmUHJpdmF0ZShjLCBlKSwgci52YWx1ZTtcbiAgICAgIH07ZWxzZSB7XG4gICAgICAgIHZhciBoID0gMCA9PT0gYSB8fCAxID09PSBhO1xuICAgICAgICAoaCB8fCAzID09PSBhKSAmJiAobCA9IHMgPyBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHJldHVybiBhc3NlcnRJbnN0YW5jZUlmUHJpdmF0ZShjLCBlKSwgci5nZXQuY2FsbChlKTtcbiAgICAgICAgfSA6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgcmV0dXJuIHIuZ2V0LmNhbGwoZSk7XG4gICAgICAgIH0pLCAoaCB8fCA0ID09PSBhKSAmJiAoZiA9IHMgPyBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgIGFzc2VydEluc3RhbmNlSWZQcml2YXRlKGMsIGUpLCByLnNldC5jYWxsKGUsIHQpO1xuICAgICAgICB9IDogZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICByLnNldC5jYWxsKGUsIHQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2UgbCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICByZXR1cm4gZVt0XTtcbiAgICB9LCAwID09PSBhICYmIChmID0gZnVuY3Rpb24gKGUsIHIpIHtcbiAgICAgIGVbdF0gPSByO1xuICAgIH0pO1xuICAgIHZhciB2ID0gcyA/IGMuYmluZCgpIDogZnVuY3Rpb24gKGUpIHtcbiAgICAgIHJldHVybiB0IGluIGU7XG4gICAgfTtcbiAgICBwLmFjY2VzcyA9IGwgJiYgZiA/IHtcbiAgICAgIGdldDogbCxcbiAgICAgIHNldDogZixcbiAgICAgIGhhczogdlxuICAgIH0gOiBsID8ge1xuICAgICAgZ2V0OiBsLFxuICAgICAgaGFzOiB2XG4gICAgfSA6IHtcbiAgICAgIHNldDogZixcbiAgICAgIGhhczogdlxuICAgIH07XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBlKG8sIHApO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBkLnYgPSAhMDtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gYXNzZXJ0Q2FsbGFibGUoZSwgdCkge1xuICAgIGlmIChcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIGUpIHRocm93IG5ldyBUeXBlRXJyb3IodCArIFwiIG11c3QgYmUgYSBmdW5jdGlvblwiKTtcbiAgfVxuICBmdW5jdGlvbiBhc3NlcnRWYWxpZFJldHVyblZhbHVlKGUsIHQpIHtcbiAgICB2YXIgciA9IHR5cGVvZiB0O1xuICAgIGlmICgxID09PSBlKSB7XG4gICAgICBpZiAoXCJvYmplY3RcIiAhPT0gciB8fCBudWxsID09PSB0KSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYWNjZXNzb3IgZGVjb3JhdG9ycyBtdXN0IHJldHVybiBhbiBvYmplY3Qgd2l0aCBnZXQsIHNldCwgb3IgaW5pdCBwcm9wZXJ0aWVzIG9yIHZvaWQgMFwiKTtcbiAgICAgIHZvaWQgMCAhPT0gdC5nZXQgJiYgYXNzZXJ0Q2FsbGFibGUodC5nZXQsIFwiYWNjZXNzb3IuZ2V0XCIpLCB2b2lkIDAgIT09IHQuc2V0ICYmIGFzc2VydENhbGxhYmxlKHQuc2V0LCBcImFjY2Vzc29yLnNldFwiKSwgdm9pZCAwICE9PSB0LmluaXQgJiYgYXNzZXJ0Q2FsbGFibGUodC5pbml0LCBcImFjY2Vzc29yLmluaXRcIik7XG4gICAgfSBlbHNlIGlmIChcImZ1bmN0aW9uXCIgIT09IHIpIHtcbiAgICAgIHZhciBuO1xuICAgICAgdGhyb3cgbiA9IDAgPT09IGUgPyBcImZpZWxkXCIgOiAxMCA9PT0gZSA/IFwiY2xhc3NcIiA6IFwibWV0aG9kXCIsIG5ldyBUeXBlRXJyb3IobiArIFwiIGRlY29yYXRvcnMgbXVzdCByZXR1cm4gYSBmdW5jdGlvbiBvciB2b2lkIDBcIik7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGN1cnJ5VGhpczIoZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAodCkge1xuICAgICAgZSh0aGlzLCB0KTtcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIGFwcGx5TWVtYmVyRGVjKGUsIHQsIHIsIG4sIGEsIGksIHMsIG8sIGMpIHtcbiAgICB2YXIgdSxcbiAgICAgIGwsXG4gICAgICBmLFxuICAgICAgcCxcbiAgICAgIGQsXG4gICAgICBoLFxuICAgICAgdixcbiAgICAgIGcgPSByWzBdO1xuICAgIGlmIChzID8gdSA9IDAgPT09IGEgfHwgMSA9PT0gYSA/IHtcbiAgICAgIGdldDogKHAgPSByWzNdLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBwKHRoaXMpO1xuICAgICAgfSksXG4gICAgICBzZXQ6IGN1cnJ5VGhpczIocls0XSlcbiAgICB9IDogMyA9PT0gYSA/IHtcbiAgICAgIGdldDogclszXVxuICAgIH0gOiA0ID09PSBhID8ge1xuICAgICAgc2V0OiByWzNdXG4gICAgfSA6IHtcbiAgICAgIHZhbHVlOiByWzNdXG4gICAgfSA6IDAgIT09IGEgJiYgKHUgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIG4pKSwgMSA9PT0gYSA/IGYgPSB7XG4gICAgICBnZXQ6IHUuZ2V0LFxuICAgICAgc2V0OiB1LnNldFxuICAgIH0gOiAyID09PSBhID8gZiA9IHUudmFsdWUgOiAzID09PSBhID8gZiA9IHUuZ2V0IDogNCA9PT0gYSAmJiAoZiA9IHUuc2V0KSwgXCJmdW5jdGlvblwiID09IHR5cGVvZiBnKSB2b2lkIDAgIT09IChkID0gbWVtYmVyRGVjKGcsIG4sIHUsIG8sIGEsIGksIHMsIGYsIGMpKSAmJiAoYXNzZXJ0VmFsaWRSZXR1cm5WYWx1ZShhLCBkKSwgMCA9PT0gYSA/IGwgPSBkIDogMSA9PT0gYSA/IChsID0gZC5pbml0LCBoID0gZC5nZXQgfHwgZi5nZXQsIHYgPSBkLnNldCB8fCBmLnNldCwgZiA9IHtcbiAgICAgIGdldDogaCxcbiAgICAgIHNldDogdlxuICAgIH0pIDogZiA9IGQpO2Vsc2UgZm9yICh2YXIgeSA9IGcubGVuZ3RoIC0gMTsgeSA+PSAwOyB5LS0pIHtcbiAgICAgIHZhciBtO1xuICAgICAgaWYgKHZvaWQgMCAhPT0gKGQgPSBtZW1iZXJEZWMoZ1t5XSwgbiwgdSwgbywgYSwgaSwgcywgZiwgYykpKSBhc3NlcnRWYWxpZFJldHVyblZhbHVlKGEsIGQpLCAwID09PSBhID8gbSA9IGQgOiAxID09PSBhID8gKG0gPSBkLmluaXQsIGggPSBkLmdldCB8fCBmLmdldCwgdiA9IGQuc2V0IHx8IGYuc2V0LCBmID0ge1xuICAgICAgICBnZXQ6IGgsXG4gICAgICAgIHNldDogdlxuICAgICAgfSkgOiBmID0gZCwgdm9pZCAwICE9PSBtICYmICh2b2lkIDAgPT09IGwgPyBsID0gbSA6IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgbCA/IGwgPSBbbCwgbV0gOiBsLnB1c2gobSkpO1xuICAgIH1cbiAgICBpZiAoMCA9PT0gYSB8fCAxID09PSBhKSB7XG4gICAgICBpZiAodm9pZCAwID09PSBsKSBsID0gZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgICB9O2Vsc2UgaWYgKFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgbCkge1xuICAgICAgICB2YXIgYiA9IGw7XG4gICAgICAgIGwgPSBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgIGZvciAodmFyIHIgPSB0LCBuID0gMDsgbiA8IGIubGVuZ3RoOyBuKyspIHIgPSBiW25dLmNhbGwoZSwgcik7XG4gICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgSSA9IGw7XG4gICAgICAgIGwgPSBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgIHJldHVybiBJLmNhbGwoZSwgdCk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBlLnB1c2gobCk7XG4gICAgfVxuICAgIDAgIT09IGEgJiYgKDEgPT09IGEgPyAodS5nZXQgPSBmLmdldCwgdS5zZXQgPSBmLnNldCkgOiAyID09PSBhID8gdS52YWx1ZSA9IGYgOiAzID09PSBhID8gdS5nZXQgPSBmIDogNCA9PT0gYSAmJiAodS5zZXQgPSBmKSwgcyA/IDEgPT09IGEgPyAoZS5wdXNoKGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICByZXR1cm4gZi5nZXQuY2FsbChlLCB0KTtcbiAgICB9KSwgZS5wdXNoKGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICByZXR1cm4gZi5zZXQuY2FsbChlLCB0KTtcbiAgICB9KSkgOiAyID09PSBhID8gZS5wdXNoKGYpIDogZS5wdXNoKGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICByZXR1cm4gZi5jYWxsKGUsIHQpO1xuICAgIH0pIDogT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIG4sIHUpKTtcbiAgfVxuICBmdW5jdGlvbiBhcHBseU1lbWJlckRlY3MoZSwgdCwgcikge1xuICAgIGZvciAodmFyIG4sIGEsIGksIHMgPSBbXSwgbyA9IG5ldyBNYXAoKSwgYyA9IG5ldyBNYXAoKSwgdSA9IDA7IHUgPCB0Lmxlbmd0aDsgdSsrKSB7XG4gICAgICB2YXIgbCA9IHRbdV07XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShsKSkge1xuICAgICAgICB2YXIgZixcbiAgICAgICAgICBwLFxuICAgICAgICAgIGQgPSBsWzFdLFxuICAgICAgICAgIGggPSBsWzJdLFxuICAgICAgICAgIHYgPSBsLmxlbmd0aCA+IDMsXG4gICAgICAgICAgZyA9IGQgPj0gNSxcbiAgICAgICAgICB5ID0gcjtcbiAgICAgICAgaWYgKGcgPyAoZiA9IGUsIDAgIT09IChkIC09IDUpICYmIChwID0gYSA9IGEgfHwgW10pLCB2ICYmICFpICYmIChpID0gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICByZXR1cm4gX2NoZWNrSW5SSFModCkgPT09IGU7XG4gICAgICAgIH0pLCB5ID0gaSkgOiAoZiA9IGUucHJvdG90eXBlLCAwICE9PSBkICYmIChwID0gbiA9IG4gfHwgW10pKSwgMCAhPT0gZCAmJiAhdikge1xuICAgICAgICAgIHZhciBtID0gZyA/IGMgOiBvLFxuICAgICAgICAgICAgYiA9IG0uZ2V0KGgpIHx8IDA7XG4gICAgICAgICAgaWYgKCEwID09PSBiIHx8IDMgPT09IGIgJiYgNCAhPT0gZCB8fCA0ID09PSBiICYmIDMgIT09IGQpIHRocm93IG5ldyBFcnJvcihcIkF0dGVtcHRlZCB0byBkZWNvcmF0ZSBhIHB1YmxpYyBtZXRob2QvYWNjZXNzb3IgdGhhdCBoYXMgdGhlIHNhbWUgbmFtZSBhcyBhIHByZXZpb3VzbHkgZGVjb3JhdGVkIHB1YmxpYyBtZXRob2QvYWNjZXNzb3IuIFRoaXMgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgYnkgdGhlIGRlY29yYXRvcnMgcGx1Z2luLiBQcm9wZXJ0eSBuYW1lIHdhczogXCIgKyBoKTtcbiAgICAgICAgICAhYiAmJiBkID4gMiA/IG0uc2V0KGgsIGQpIDogbS5zZXQoaCwgITApO1xuICAgICAgICB9XG4gICAgICAgIGFwcGx5TWVtYmVyRGVjKHMsIGYsIGwsIGgsIGQsIGcsIHYsIHAsIHkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcHVzaEluaXRpYWxpemVycyhzLCBuKSwgcHVzaEluaXRpYWxpemVycyhzLCBhKSwgcztcbiAgfVxuICBmdW5jdGlvbiBwdXNoSW5pdGlhbGl6ZXJzKGUsIHQpIHtcbiAgICB0ICYmIGUucHVzaChmdW5jdGlvbiAoZSkge1xuICAgICAgZm9yICh2YXIgciA9IDA7IHIgPCB0Lmxlbmd0aDsgcisrKSB0W3JdLmNhbGwoZSk7XG4gICAgICByZXR1cm4gZTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gKGUsIHQsIHIsIG4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgZTogYXBwbHlNZW1iZXJEZWNzKGUsIHQsIG4pLFxuICAgICAgZ2V0IGMoKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICAgIGlmICh0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvciAodmFyIHIgPSBbXSwgbiA9IGUsIGEgPSBlLm5hbWUsIGkgPSB0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgIHZhciBzID0ge1xuICAgICAgICAgICAgICAgIHY6ICExXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIG8gPSB0W2ldKG4sIHtcbiAgICAgICAgICAgICAgICAgIGtpbmQ6IFwiY2xhc3NcIixcbiAgICAgICAgICAgICAgICAgIG5hbWU6IGEsXG4gICAgICAgICAgICAgICAgICBhZGRJbml0aWFsaXplcjogY3JlYXRlQWRkSW5pdGlhbGl6ZXJNZXRob2QociwgcylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBzLnYgPSAhMDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB2b2lkIDAgIT09IG8gJiYgKGFzc2VydFZhbGlkUmV0dXJuVmFsdWUoMTAsIG8pLCBuID0gbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gW24sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IDA7IGUgPCByLmxlbmd0aDsgZSsrKSByW2VdLmNhbGwobik7XG4gICAgICAgICAgICB9XTtcbiAgICAgICAgICB9XG4gICAgICAgIH0oZSwgcik7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcbn1cbmZ1bmN0aW9uIF9hcHBseURlY3MyMzAxKGUsIHQsIHIsIG4pIHtcbiAgcmV0dXJuIChfYXBwbHlEZWNzMjMwMSA9IGFwcGx5RGVjczIzMDFGYWN0b3J5KCkpKGUsIHQsIHIsIG4pO1xufVxuZnVuY3Rpb24gY3JlYXRlQWRkSW5pdGlhbGl6ZXJNZXRob2QoZSwgdCkge1xuICByZXR1cm4gZnVuY3Rpb24gKHIpIHtcbiAgICBhc3NlcnROb3RGaW5pc2hlZCh0LCBcImFkZEluaXRpYWxpemVyXCIpLCBhc3NlcnRDYWxsYWJsZShyLCBcIkFuIGluaXRpYWxpemVyXCIpLCBlLnB1c2gocik7XG4gIH07XG59XG5mdW5jdGlvbiBhc3NlcnRJbnN0YW5jZUlmUHJpdmF0ZShlLCB0KSB7XG4gIGlmICghZSh0KSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkF0dGVtcHRlZCB0byBhY2Nlc3MgcHJpdmF0ZSBlbGVtZW50IG9uIG5vbi1pbnN0YW5jZVwiKTtcbn1cbmZ1bmN0aW9uIG1lbWJlckRlYyhlLCB0LCByLCBuLCBhLCBpLCBzLCBvLCBjLCBsKSB7XG4gIHZhciB1O1xuICBzd2l0Y2ggKGkpIHtcbiAgICBjYXNlIDE6XG4gICAgICB1ID0gXCJhY2Nlc3NvclwiO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAyOlxuICAgICAgdSA9IFwibWV0aG9kXCI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM6XG4gICAgICB1ID0gXCJnZXR0ZXJcIjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgNDpcbiAgICAgIHUgPSBcInNldHRlclwiO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHUgPSBcImZpZWxkXCI7XG4gIH1cbiAgdmFyIGYsXG4gICAgZCxcbiAgICBwID0ge1xuICAgICAga2luZDogdSxcbiAgICAgIG5hbWU6IG8gPyBcIiNcIiArIHIgOiByLFxuICAgICAgc3RhdGljOiBzLFxuICAgICAgcHJpdmF0ZTogb1xuICAgIH0sXG4gICAgaCA9IHtcbiAgICAgIHY6ICExXG4gICAgfTtcbiAgaWYgKDAgIT09IGkgJiYgKHAuYWRkSW5pdGlhbGl6ZXIgPSBjcmVhdGVBZGRJbml0aWFsaXplck1ldGhvZChhLCBoKSksIG8gfHwgMCAhPT0gaSAmJiAyICE9PSBpKSB7XG4gICAgaWYgKDIgPT09IGkpIGYgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgcmV0dXJuIGFzc2VydEluc3RhbmNlSWZQcml2YXRlKGwsIGUpLCBuLnZhbHVlO1xuICAgIH07ZWxzZSB7XG4gICAgICB2YXIgdiA9IDAgPT09IGkgfHwgMSA9PT0gaTtcbiAgICAgICh2IHx8IDMgPT09IGkpICYmIChmID0gbyA/IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBhc3NlcnRJbnN0YW5jZUlmUHJpdmF0ZShsLCBlKSwgbi5nZXQuY2FsbChlKTtcbiAgICAgIH0gOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gbi5nZXQuY2FsbChlKTtcbiAgICAgIH0pLCAodiB8fCA0ID09PSBpKSAmJiAoZCA9IG8gPyBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICBhc3NlcnRJbnN0YW5jZUlmUHJpdmF0ZShsLCBlKSwgbi5zZXQuY2FsbChlLCB0KTtcbiAgICAgIH0gOiBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICBuLnNldC5jYWxsKGUsIHQpO1xuICAgICAgfSk7XG4gICAgfVxuICB9IGVsc2UgZiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgcmV0dXJuIGVbcl07XG4gIH0sIDAgPT09IGkgJiYgKGQgPSBmdW5jdGlvbiAoZSwgdCkge1xuICAgIGVbcl0gPSB0O1xuICB9KTtcbiAgdmFyIHkgPSBvID8gbC5iaW5kKCkgOiBmdW5jdGlvbiAoZSkge1xuICAgIHJldHVybiByIGluIGU7XG4gIH07XG4gIHAuYWNjZXNzID0gZiAmJiBkID8ge1xuICAgIGdldDogZixcbiAgICBzZXQ6IGQsXG4gICAgaGFzOiB5XG4gIH0gOiBmID8ge1xuICAgIGdldDogZixcbiAgICBoYXM6IHlcbiAgfSA6IHtcbiAgICBzZXQ6IGQsXG4gICAgaGFzOiB5XG4gIH07XG4gIHRyeSB7XG4gICAgcmV0dXJuIGUuY2FsbCh0LCBjLCBwKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBoLnYgPSAhMDtcbiAgfVxufVxuZnVuY3Rpb24gYXNzZXJ0Tm90RmluaXNoZWQoZSwgdCkge1xuICBpZiAoZS52KSB0aHJvdyBuZXcgRXJyb3IoXCJhdHRlbXB0ZWQgdG8gY2FsbCBcIiArIHQgKyBcIiBhZnRlciBkZWNvcmF0aW9uIHdhcyBmaW5pc2hlZFwiKTtcbn1cbmZ1bmN0aW9uIGFzc2VydENhbGxhYmxlKGUsIHQpIHtcbiAgaWYgKFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgZSkgdGhyb3cgbmV3IFR5cGVFcnJvcih0ICsgXCIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO1xufVxuZnVuY3Rpb24gYXNzZXJ0VmFsaWRSZXR1cm5WYWx1ZShlLCB0KSB7XG4gIHZhciByID0gdHlwZW9mIHQ7XG4gIGlmICgxID09PSBlKSB7XG4gICAgaWYgKFwib2JqZWN0XCIgIT09IHIgfHwgbnVsbCA9PT0gdCkgdGhyb3cgbmV3IFR5cGVFcnJvcihcImFjY2Vzc29yIGRlY29yYXRvcnMgbXVzdCByZXR1cm4gYW4gb2JqZWN0IHdpdGggZ2V0LCBzZXQsIG9yIGluaXQgcHJvcGVydGllcyBvciB2b2lkIDBcIik7XG4gICAgdm9pZCAwICE9PSB0LmdldCAmJiBhc3NlcnRDYWxsYWJsZSh0LmdldCwgXCJhY2Nlc3Nvci5nZXRcIiksIHZvaWQgMCAhPT0gdC5zZXQgJiYgYXNzZXJ0Q2FsbGFibGUodC5zZXQsIFwiYWNjZXNzb3Iuc2V0XCIpLCB2b2lkIDAgIT09IHQuaW5pdCAmJiBhc3NlcnRDYWxsYWJsZSh0LmluaXQsIFwiYWNjZXNzb3IuaW5pdFwiKTtcbiAgfSBlbHNlIGlmIChcImZ1bmN0aW9uXCIgIT09IHIpIHtcbiAgICB2YXIgbjtcbiAgICB0aHJvdyBuID0gMCA9PT0gZSA/IFwiZmllbGRcIiA6IDUgPT09IGUgPyBcImNsYXNzXCIgOiBcIm1ldGhvZFwiLCBuZXcgVHlwZUVycm9yKG4gKyBcIiBkZWNvcmF0b3JzIG11c3QgcmV0dXJuIGEgZnVuY3Rpb24gb3Igdm9pZCAwXCIpO1xuICB9XG59XG5mdW5jdGlvbiBjdXJyeVRoaXMxKGUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZSh0aGlzKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGN1cnJ5VGhpczIoZSkge1xuICByZXR1cm4gZnVuY3Rpb24gKHQpIHtcbiAgICBlKHRoaXMsIHQpO1xuICB9O1xufVxuZnVuY3Rpb24gYXBwbHlNZW1iZXJEZWMoZSwgdCwgciwgbiwgYSwgaSwgcywgbywgYywgbCkge1xuICB2YXIgdSxcbiAgICBmLFxuICAgIGQsXG4gICAgcCxcbiAgICBoLFxuICAgIHYsXG4gICAgeSA9IHJbMF07XG4gIG4gfHwgQXJyYXkuaXNBcnJheSh5KSB8fCAoeSA9IFt5XSksIG8gPyB1ID0gMCA9PT0gaSB8fCAxID09PSBpID8ge1xuICAgIGdldDogY3VycnlUaGlzMShyWzNdKSxcbiAgICBzZXQ6IGN1cnJ5VGhpczIocls0XSlcbiAgfSA6IDMgPT09IGkgPyB7XG4gICAgZ2V0OiByWzNdXG4gIH0gOiA0ID09PSBpID8ge1xuICAgIHNldDogclszXVxuICB9IDoge1xuICAgIHZhbHVlOiByWzNdXG4gIH0gOiAwICE9PSBpICYmICh1ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCBhKSksIDEgPT09IGkgPyBkID0ge1xuICAgIGdldDogdS5nZXQsXG4gICAgc2V0OiB1LnNldFxuICB9IDogMiA9PT0gaSA/IGQgPSB1LnZhbHVlIDogMyA9PT0gaSA/IGQgPSB1LmdldCA6IDQgPT09IGkgJiYgKGQgPSB1LnNldCk7XG4gIGZvciAodmFyIGcgPSBuID8gMiA6IDEsIG0gPSB5Lmxlbmd0aCAtIDE7IG0gPj0gMDsgbSAtPSBnKSB7XG4gICAgdmFyIGI7XG4gICAgaWYgKHZvaWQgMCAhPT0gKHAgPSBtZW1iZXJEZWMoeVttXSwgbiA/IHlbbSAtIDFdIDogdm9pZCAwLCBhLCB1LCBjLCBpLCBzLCBvLCBkLCBsKSkpIGFzc2VydFZhbGlkUmV0dXJuVmFsdWUoaSwgcCksIDAgPT09IGkgPyBiID0gcCA6IDEgPT09IGkgPyAoYiA9IHAuaW5pdCwgaCA9IHAuZ2V0IHx8IGQuZ2V0LCB2ID0gcC5zZXQgfHwgZC5zZXQsIGQgPSB7XG4gICAgICBnZXQ6IGgsXG4gICAgICBzZXQ6IHZcbiAgICB9KSA6IGQgPSBwLCB2b2lkIDAgIT09IGIgJiYgKHZvaWQgMCA9PT0gZiA/IGYgPSBiIDogXCJmdW5jdGlvblwiID09IHR5cGVvZiBmID8gZiA9IFtmLCBiXSA6IGYucHVzaChiKSk7XG4gIH1cbiAgaWYgKDAgPT09IGkgfHwgMSA9PT0gaSkge1xuICAgIGlmICh2b2lkIDAgPT09IGYpIGYgPSBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgcmV0dXJuIHQ7XG4gICAgfTtlbHNlIGlmIChcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIGYpIHtcbiAgICAgIHZhciBJID0gZjtcbiAgICAgIGYgPSBmdW5jdGlvbiAoZSwgdCkge1xuICAgICAgICBmb3IgKHZhciByID0gdCwgbiA9IEkubGVuZ3RoIC0gMTsgbiA+PSAwOyBuLS0pIHIgPSBJW25dLmNhbGwoZSwgcik7XG4gICAgICAgIHJldHVybiByO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHcgPSBmO1xuICAgICAgZiA9IGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgICAgIHJldHVybiB3LmNhbGwoZSwgdCk7XG4gICAgICB9O1xuICAgIH1cbiAgICBlLnB1c2goZik7XG4gIH1cbiAgMCAhPT0gaSAmJiAoMSA9PT0gaSA/ICh1LmdldCA9IGQuZ2V0LCB1LnNldCA9IGQuc2V0KSA6IDIgPT09IGkgPyB1LnZhbHVlID0gZCA6IDMgPT09IGkgPyB1LmdldCA9IGQgOiA0ID09PSBpICYmICh1LnNldCA9IGQpLCBvID8gMSA9PT0gaSA/IChlLnB1c2goZnVuY3Rpb24gKGUsIHQpIHtcbiAgICByZXR1cm4gZC5nZXQuY2FsbChlLCB0KTtcbiAgfSksIGUucHVzaChmdW5jdGlvbiAoZSwgdCkge1xuICAgIHJldHVybiBkLnNldC5jYWxsKGUsIHQpO1xuICB9KSkgOiAyID09PSBpID8gZS5wdXNoKGQpIDogZS5wdXNoKGZ1bmN0aW9uIChlLCB0KSB7XG4gICAgcmV0dXJuIGQuY2FsbChlLCB0KTtcbiAgfSkgOiBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgYSwgdSkpO1xufVxuZnVuY3Rpb24gYXBwbHlNZW1iZXJEZWNzKGUsIHQsIHIpIHtcbiAgZm9yICh2YXIgbiwgYSwgaSwgcyA9IFtdLCBvID0gbmV3IE1hcCgpLCBjID0gbmV3IE1hcCgpLCBsID0gMDsgbCA8IHQubGVuZ3RoOyBsKyspIHtcbiAgICB2YXIgdSA9IHRbbF07XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodSkpIHtcbiAgICAgIHZhciBmLFxuICAgICAgICBkLFxuICAgICAgICBwID0gdVsxXSxcbiAgICAgICAgaCA9IHVbMl0sXG4gICAgICAgIHYgPSB1Lmxlbmd0aCA+IDMsXG4gICAgICAgIHkgPSAxNiAmIHAsXG4gICAgICAgIGcgPSAhISg4ICYgcCksXG4gICAgICAgIG0gPSByO1xuICAgICAgaWYgKHAgJj0gNywgZyA/IChmID0gZSwgMCAhPT0gcCAmJiAoZCA9IGEgPSBhIHx8IFtdKSwgdiAmJiAhaSAmJiAoaSA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHJldHVybiBfY2hlY2tJblJIUyh0KSA9PT0gZTtcbiAgICAgIH0pLCBtID0gaSkgOiAoZiA9IGUucHJvdG90eXBlLCAwICE9PSBwICYmIChkID0gbiA9IG4gfHwgW10pKSwgMCAhPT0gcCAmJiAhdikge1xuICAgICAgICB2YXIgYiA9IGcgPyBjIDogbyxcbiAgICAgICAgICBJID0gYi5nZXQoaCkgfHwgMDtcbiAgICAgICAgaWYgKCEwID09PSBJIHx8IDMgPT09IEkgJiYgNCAhPT0gcCB8fCA0ID09PSBJICYmIDMgIT09IHApIHRocm93IG5ldyBFcnJvcihcIkF0dGVtcHRlZCB0byBkZWNvcmF0ZSBhIHB1YmxpYyBtZXRob2QvYWNjZXNzb3IgdGhhdCBoYXMgdGhlIHNhbWUgbmFtZSBhcyBhIHByZXZpb3VzbHkgZGVjb3JhdGVkIHB1YmxpYyBtZXRob2QvYWNjZXNzb3IuIFRoaXMgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgYnkgdGhlIGRlY29yYXRvcnMgcGx1Z2luLiBQcm9wZXJ0eSBuYW1lIHdhczogXCIgKyBoKTtcbiAgICAgICAgYi5zZXQoaCwgISghSSAmJiBwID4gMikgfHwgcCk7XG4gICAgICB9XG4gICAgICBhcHBseU1lbWJlckRlYyhzLCBmLCB1LCB5LCBoLCBwLCBnLCB2LCBkLCBtKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHB1c2hJbml0aWFsaXplcnMocywgbiksIHB1c2hJbml0aWFsaXplcnMocywgYSksIHM7XG59XG5mdW5jdGlvbiBwdXNoSW5pdGlhbGl6ZXJzKGUsIHQpIHtcbiAgdCAmJiBlLnB1c2goZnVuY3Rpb24gKGUpIHtcbiAgICBmb3IgKHZhciByID0gMDsgciA8IHQubGVuZ3RoOyByKyspIHRbcl0uY2FsbChlKTtcbiAgICByZXR1cm4gZTtcbiAgfSk7XG59XG5mdW5jdGlvbiBhcHBseUNsYXNzRGVjcyhlLCB0LCByKSB7XG4gIGlmICh0Lmxlbmd0aCkge1xuICAgIGZvciAodmFyIG4gPSBbXSwgYSA9IGUsIGkgPSBlLm5hbWUsIHMgPSByID8gMiA6IDEsIG8gPSB0Lmxlbmd0aCAtIDE7IG8gPj0gMDsgbyAtPSBzKSB7XG4gICAgICB2YXIgYyA9IHtcbiAgICAgICAgdjogITFcbiAgICAgIH07XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgbCA9IHRbb10uY2FsbChyID8gdFtvIC0gMV0gOiB2b2lkIDAsIGEsIHtcbiAgICAgICAgICBraW5kOiBcImNsYXNzXCIsXG4gICAgICAgICAgbmFtZTogaSxcbiAgICAgICAgICBhZGRJbml0aWFsaXplcjogY3JlYXRlQWRkSW5pdGlhbGl6ZXJNZXRob2QobiwgYylcbiAgICAgICAgfSk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBjLnYgPSAhMDtcbiAgICAgIH1cbiAgICAgIHZvaWQgMCAhPT0gbCAmJiAoYXNzZXJ0VmFsaWRSZXR1cm5WYWx1ZSg1LCBsKSwgYSA9IGwpO1xuICAgIH1cbiAgICByZXR1cm4gW2EsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGZvciAodmFyIGUgPSAwOyBlIDwgbi5sZW5ndGg7IGUrKykgbltlXS5jYWxsKGEpO1xuICAgIH1dO1xuICB9XG59XG5mdW5jdGlvbiBfYXBwbHlEZWNzMjMwNShlLCB0LCByLCBuLCBhKSB7XG4gIHJldHVybiB7XG4gICAgZTogYXBwbHlNZW1iZXJEZWNzKGUsIHQsIGEpLFxuICAgIGdldCBjKCkge1xuICAgICAgcmV0dXJuIGFwcGx5Q2xhc3NEZWNzKGUsIHIsIG4pO1xuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIF9hc3luY0dlbmVyYXRvckRlbGVnYXRlKHQpIHtcbiAgdmFyIGUgPSB7fSxcbiAgICBuID0gITE7XG4gIGZ1bmN0aW9uIHB1bXAoZSwgcikge1xuICAgIHJldHVybiBuID0gITAsIHIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAobikge1xuICAgICAgbih0W2VdKHIpKTtcbiAgICB9KSwge1xuICAgICAgZG9uZTogITEsXG4gICAgICB2YWx1ZTogbmV3IF9PdmVybG9hZFlpZWxkKHIsIDEpXG4gICAgfTtcbiAgfVxuICByZXR1cm4gZVtcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBTeW1ib2wgJiYgU3ltYm9sLml0ZXJhdG9yIHx8IFwiQEBpdGVyYXRvclwiXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSwgZS5uZXh0ID0gZnVuY3Rpb24gKHQpIHtcbiAgICByZXR1cm4gbiA/IChuID0gITEsIHQpIDogcHVtcChcIm5leHRcIiwgdCk7XG4gIH0sIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdC50aHJvdyAmJiAoZS50aHJvdyA9IGZ1bmN0aW9uICh0KSB7XG4gICAgaWYgKG4pIHRocm93IG4gPSAhMSwgdDtcbiAgICByZXR1cm4gcHVtcChcInRocm93XCIsIHQpO1xuICB9KSwgXCJmdW5jdGlvblwiID09IHR5cGVvZiB0LnJldHVybiAmJiAoZS5yZXR1cm4gPSBmdW5jdGlvbiAodCkge1xuICAgIHJldHVybiBuID8gKG4gPSAhMSwgdCkgOiBwdW1wKFwicmV0dXJuXCIsIHQpO1xuICB9KSwgZTtcbn1cbmZ1bmN0aW9uIF9hc3luY0l0ZXJhdG9yKHIpIHtcbiAgdmFyIG4sXG4gICAgdCxcbiAgICBvLFxuICAgIGUgPSAyO1xuICBmb3IgKFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIFN5bWJvbCAmJiAodCA9IFN5bWJvbC5hc3luY0l0ZXJhdG9yLCBvID0gU3ltYm9sLml0ZXJhdG9yKTsgZS0tOykge1xuICAgIGlmICh0ICYmIG51bGwgIT0gKG4gPSByW3RdKSkgcmV0dXJuIG4uY2FsbChyKTtcbiAgICBpZiAobyAmJiBudWxsICE9IChuID0gcltvXSkpIHJldHVybiBuZXcgQXN5bmNGcm9tU3luY0l0ZXJhdG9yKG4uY2FsbChyKSk7XG4gICAgdCA9IFwiQEBhc3luY0l0ZXJhdG9yXCIsIG8gPSBcIkBAaXRlcmF0b3JcIjtcbiAgfVxuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IGlzIG5vdCBhc3luYyBpdGVyYWJsZVwiKTtcbn1cbmZ1bmN0aW9uIEFzeW5jRnJvbVN5bmNJdGVyYXRvcihyKSB7XG4gIGZ1bmN0aW9uIEFzeW5jRnJvbVN5bmNJdGVyYXRvckNvbnRpbnVhdGlvbihyKSB7XG4gICAgaWYgKE9iamVjdChyKSAhPT0gcikgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IociArIFwiIGlzIG5vdCBhbiBvYmplY3QuXCIpKTtcbiAgICB2YXIgbiA9IHIuZG9uZTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUpLnRoZW4oZnVuY3Rpb24gKHIpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiByLFxuICAgICAgICBkb25lOiBuXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBBc3luY0Zyb21TeW5jSXRlcmF0b3IgPSBmdW5jdGlvbiAocikge1xuICAgIHRoaXMucyA9IHIsIHRoaXMubiA9IHIubmV4dDtcbiAgfSwgQXN5bmNGcm9tU3luY0l0ZXJhdG9yLnByb3RvdHlwZSA9IHtcbiAgICBzOiBudWxsLFxuICAgIG46IG51bGwsXG4gICAgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIEFzeW5jRnJvbVN5bmNJdGVyYXRvckNvbnRpbnVhdGlvbih0aGlzLm4uYXBwbHkodGhpcy5zLCBhcmd1bWVudHMpKTtcbiAgICB9LFxuICAgIHJldHVybjogZnVuY3Rpb24gKHIpIHtcbiAgICAgIHZhciBuID0gdGhpcy5zLnJldHVybjtcbiAgICAgIHJldHVybiB2b2lkIDAgPT09IG4gPyBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICB2YWx1ZTogcixcbiAgICAgICAgZG9uZTogITBcbiAgICAgIH0pIDogQXN5bmNGcm9tU3luY0l0ZXJhdG9yQ29udGludWF0aW9uKG4uYXBwbHkodGhpcy5zLCBhcmd1bWVudHMpKTtcbiAgICB9LFxuICAgIHRocm93OiBmdW5jdGlvbiAocikge1xuICAgICAgdmFyIG4gPSB0aGlzLnMucmV0dXJuO1xuICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gbiA/IFByb21pc2UucmVqZWN0KHIpIDogQXN5bmNGcm9tU3luY0l0ZXJhdG9yQ29udGludWF0aW9uKG4uYXBwbHkodGhpcy5zLCBhcmd1bWVudHMpKTtcbiAgICB9XG4gIH0sIG5ldyBBc3luY0Zyb21TeW5jSXRlcmF0b3Iocik7XG59XG5mdW5jdGlvbiBfYXdhaXRBc3luY0dlbmVyYXRvcihlKSB7XG4gIHJldHVybiBuZXcgX092ZXJsb2FkWWllbGQoZSwgMCk7XG59XG5mdW5jdGlvbiBfY2hlY2tJblJIUyhlKSB7XG4gIGlmIChPYmplY3QoZSkgIT09IGUpIHRocm93IFR5cGVFcnJvcihcInJpZ2h0LWhhbmQgc2lkZSBvZiAnaW4nIHNob3VsZCBiZSBhbiBvYmplY3QsIGdvdCBcIiArIChudWxsICE9PSBlID8gdHlwZW9mIGUgOiBcIm51bGxcIikpO1xuICByZXR1cm4gZTtcbn1cbmZ1bmN0aW9uIF9kZWZpbmVBY2Nlc3NvcihlLCByLCBuLCB0KSB7XG4gIHZhciBjID0ge1xuICAgIGNvbmZpZ3VyYWJsZTogITAsXG4gICAgZW51bWVyYWJsZTogITBcbiAgfTtcbiAgcmV0dXJuIGNbZV0gPSB0LCBPYmplY3QuZGVmaW5lUHJvcGVydHkociwgbiwgYyk7XG59XG5mdW5jdGlvbiBkaXNwb3NlX1N1cHByZXNzZWRFcnJvcihyLCBlKSB7XG4gIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBTdXBwcmVzc2VkRXJyb3IgPyBkaXNwb3NlX1N1cHByZXNzZWRFcnJvciA9IFN1cHByZXNzZWRFcnJvciA6IChkaXNwb3NlX1N1cHByZXNzZWRFcnJvciA9IGZ1bmN0aW9uIChyLCBlKSB7XG4gICAgdGhpcy5zdXBwcmVzc2VkID0gciwgdGhpcy5lcnJvciA9IGUsIHRoaXMuc3RhY2sgPSBuZXcgRXJyb3IoKS5zdGFjaztcbiAgfSwgZGlzcG9zZV9TdXBwcmVzc2VkRXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUsIHtcbiAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgdmFsdWU6IGRpc3Bvc2VfU3VwcHJlc3NlZEVycm9yLFxuICAgICAgd3JpdGFibGU6ICEwLFxuICAgICAgY29uZmlndXJhYmxlOiAhMFxuICAgIH1cbiAgfSkpLCBuZXcgZGlzcG9zZV9TdXBwcmVzc2VkRXJyb3IociwgZSk7XG59XG5mdW5jdGlvbiBfZGlzcG9zZShyLCBlLCBzKSB7XG4gIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgZm9yICg7IHIubGVuZ3RoID4gMDspIHRyeSB7XG4gICAgICB2YXIgbyA9IHIucG9wKCksXG4gICAgICAgIHAgPSBvLmQuY2FsbChvLnYpO1xuICAgICAgaWYgKG8uYSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZShwKS50aGVuKG5leHQsIGVycik7XG4gICAgfSBjYXRjaCAocikge1xuICAgICAgcmV0dXJuIGVycihyKTtcbiAgICB9XG4gICAgaWYgKHMpIHRocm93IGU7XG4gIH1cbiAgZnVuY3Rpb24gZXJyKHIpIHtcbiAgICByZXR1cm4gZSA9IHMgPyBuZXcgZGlzcG9zZV9TdXBwcmVzc2VkRXJyb3IociwgZSkgOiByLCBzID0gITAsIG5leHQoKTtcbiAgfVxuICByZXR1cm4gbmV4dCgpO1xufVxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KHIsIGwpIHtcbiAgdmFyIHQgPSBudWxsID09IHIgPyBudWxsIDogXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgU3ltYm9sICYmIHJbU3ltYm9sLml0ZXJhdG9yXSB8fCByW1wiQEBpdGVyYXRvclwiXTtcbiAgaWYgKG51bGwgIT0gdCkge1xuICAgIHZhciBlLFxuICAgICAgbixcbiAgICAgIGksXG4gICAgICB1LFxuICAgICAgYSA9IFtdLFxuICAgICAgZiA9ICEwLFxuICAgICAgbyA9ICExO1xuICAgIHRyeSB7XG4gICAgICBpZiAoaSA9ICh0ID0gdC5jYWxsKHIpKS5uZXh0LCAwID09PSBsKSB7XG4gICAgICAgIGlmIChPYmplY3QodCkgIT09IHQpIHJldHVybjtcbiAgICAgICAgZiA9ICExO1xuICAgICAgfSBlbHNlIGZvciAoOyAhKGYgPSAoZSA9IGkuY2FsbCh0KSkuZG9uZSkgJiYgKGEucHVzaChlLnZhbHVlKSwgYS5sZW5ndGggIT09IGwpOyBmID0gITApO1xuICAgIH0gY2F0Y2ggKHIpIHtcbiAgICAgIG8gPSAhMCwgbiA9IHI7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICghZiAmJiBudWxsICE9IHQucmV0dXJuICYmICh1ID0gdC5yZXR1cm4oKSwgT2JqZWN0KHUpICE9PSB1KSkgcmV0dXJuO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgaWYgKG8pIHRocm93IG47XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhO1xuICB9XG59XG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXRMb29zZShlLCByKSB7XG4gIHZhciB0ID0gZSAmJiAoXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgU3ltYm9sICYmIGVbU3ltYm9sLml0ZXJhdG9yXSB8fCBlW1wiQEBpdGVyYXRvclwiXSk7XG4gIGlmIChudWxsICE9IHQpIHtcbiAgICB2YXIgbyxcbiAgICAgIGwgPSBbXTtcbiAgICBmb3IgKHQgPSB0LmNhbGwoZSk7IGUubGVuZ3RoIDwgciAmJiAhKG8gPSB0Lm5leHQoKSkuZG9uZTspIGwucHVzaChvLnZhbHVlKTtcbiAgICByZXR1cm4gbDtcbiAgfVxufVxudmFyIFJFQUNUX0VMRU1FTlRfVFlQRTtcbmZ1bmN0aW9uIF9qc3goZSwgciwgRSwgbCkge1xuICBSRUFDVF9FTEVNRU5UX1RZUEUgfHwgKFJFQUNUX0VMRU1FTlRfVFlQRSA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFN5bWJvbC5mb3IgJiYgU3ltYm9sLmZvcihcInJlYWN0LmVsZW1lbnRcIikgfHwgNjAxMDMpO1xuICB2YXIgbyA9IGUgJiYgZS5kZWZhdWx0UHJvcHMsXG4gICAgbiA9IGFyZ3VtZW50cy5sZW5ndGggLSAzO1xuICBpZiAociB8fCAwID09PSBuIHx8IChyID0ge1xuICAgIGNoaWxkcmVuOiB2b2lkIDBcbiAgfSksIDEgPT09IG4pIHIuY2hpbGRyZW4gPSBsO2Vsc2UgaWYgKG4gPiAxKSB7XG4gICAgZm9yICh2YXIgdCA9IG5ldyBBcnJheShuKSwgZiA9IDA7IGYgPCBuOyBmKyspIHRbZl0gPSBhcmd1bWVudHNbZiArIDNdO1xuICAgIHIuY2hpbGRyZW4gPSB0O1xuICB9XG4gIGlmIChyICYmIG8pIGZvciAodmFyIGkgaW4gbykgdm9pZCAwID09PSByW2ldICYmIChyW2ldID0gb1tpXSk7ZWxzZSByIHx8IChyID0gbyB8fCB7fSk7XG4gIHJldHVybiB7XG4gICAgJCR0eXBlb2Y6IFJFQUNUX0VMRU1FTlRfVFlQRSxcbiAgICB0eXBlOiBlLFxuICAgIGtleTogdm9pZCAwID09PSBFID8gbnVsbCA6IFwiXCIgKyBFLFxuICAgIHJlZjogbnVsbCxcbiAgICBwcm9wczogcixcbiAgICBfb3duZXI6IG51bGxcbiAgfTtcbn1cbmZ1bmN0aW9uIG93bktleXMoZSwgcikge1xuICB2YXIgdCA9IE9iamVjdC5rZXlzKGUpO1xuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTtcbiAgICByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHtcbiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7XG4gICAgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7XG4gIH1cbiAgcmV0dXJuIHQ7XG59XG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkMihlKSB7XG4gIGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7XG4gICAgdmFyIHQgPSBudWxsICE9IGFyZ3VtZW50c1tyXSA/IGFyZ3VtZW50c1tyXSA6IHt9O1xuICAgIHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7XG4gICAgICBfZGVmaW5lUHJvcGVydHkoZSwgciwgdFtyXSk7XG4gICAgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCByKSk7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGU7XG59XG5mdW5jdGlvbiBfcmVnZW5lcmF0b3JSdW50aW1lKCkge1xuICBcInVzZSBzdHJpY3RcIjsgLyohIHJlZ2VuZXJhdG9yLXJ1bnRpbWUgLS0gQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuIC0tIGxpY2Vuc2UgKE1JVCk6IGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWdlbmVyYXRvci9ibG9iL21haW4vTElDRU5TRSAqL1xuICBfcmVnZW5lcmF0b3JSdW50aW1lID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBlO1xuICB9O1xuICB2YXIgdCxcbiAgICBlID0ge30sXG4gICAgciA9IE9iamVjdC5wcm90b3R5cGUsXG4gICAgbiA9IHIuaGFzT3duUHJvcGVydHksXG4gICAgbyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSB8fCBmdW5jdGlvbiAodCwgZSwgcikge1xuICAgICAgdFtlXSA9IHIudmFsdWU7XG4gICAgfSxcbiAgICBpID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgPyBTeW1ib2wgOiB7fSxcbiAgICBhID0gaS5pdGVyYXRvciB8fCBcIkBAaXRlcmF0b3JcIixcbiAgICBjID0gaS5hc3luY0l0ZXJhdG9yIHx8IFwiQEBhc3luY0l0ZXJhdG9yXCIsXG4gICAgdSA9IGkudG9TdHJpbmdUYWcgfHwgXCJAQHRvU3RyaW5nVGFnXCI7XG4gIGZ1bmN0aW9uIGRlZmluZSh0LCBlLCByKSB7XG4gICAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBlLCB7XG4gICAgICB2YWx1ZTogcixcbiAgICAgIGVudW1lcmFibGU6ICEwLFxuICAgICAgY29uZmlndXJhYmxlOiAhMCxcbiAgICAgIHdyaXRhYmxlOiAhMFxuICAgIH0pLCB0W2VdO1xuICB9XG4gIHRyeSB7XG4gICAgZGVmaW5lKHt9LCBcIlwiKTtcbiAgfSBjYXRjaCAodCkge1xuICAgIGRlZmluZSA9IGZ1bmN0aW9uICh0LCBlLCByKSB7XG4gICAgICByZXR1cm4gdFtlXSA9IHI7XG4gICAgfTtcbiAgfVxuICBmdW5jdGlvbiB3cmFwKHQsIGUsIHIsIG4pIHtcbiAgICB2YXIgaSA9IGUgJiYgZS5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IgPyBlIDogR2VuZXJhdG9yLFxuICAgICAgYSA9IE9iamVjdC5jcmVhdGUoaS5wcm90b3R5cGUpLFxuICAgICAgYyA9IG5ldyBDb250ZXh0KG4gfHwgW10pO1xuICAgIHJldHVybiBvKGEsIFwiX2ludm9rZVwiLCB7XG4gICAgICB2YWx1ZTogbWFrZUludm9rZU1ldGhvZCh0LCByLCBjKVxuICAgIH0pLCBhO1xuICB9XG4gIGZ1bmN0aW9uIHRyeUNhdGNoKHQsIGUsIHIpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJub3JtYWxcIixcbiAgICAgICAgYXJnOiB0LmNhbGwoZSwgcilcbiAgICAgIH07XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogXCJ0aHJvd1wiLFxuICAgICAgICBhcmc6IHRcbiAgICAgIH07XG4gICAgfVxuICB9XG4gIGUud3JhcCA9IHdyYXA7XG4gIHZhciBoID0gXCJzdXNwZW5kZWRTdGFydFwiLFxuICAgIGwgPSBcInN1c3BlbmRlZFlpZWxkXCIsXG4gICAgZiA9IFwiZXhlY3V0aW5nXCIsXG4gICAgcyA9IFwiY29tcGxldGVkXCIsXG4gICAgeSA9IHt9O1xuICBmdW5jdGlvbiBHZW5lcmF0b3IoKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvbigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKCkge31cbiAgdmFyIHAgPSB7fTtcbiAgZGVmaW5lKHAsIGEsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSk7XG4gIHZhciBkID0gT2JqZWN0LmdldFByb3RvdHlwZU9mLFxuICAgIHYgPSBkICYmIGQoZCh2YWx1ZXMoW10pKSk7XG4gIHYgJiYgdiAhPT0gciAmJiBuLmNhbGwodiwgYSkgJiYgKHAgPSB2KTtcbiAgdmFyIGcgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZS5wcm90b3R5cGUgPSBHZW5lcmF0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShwKTtcbiAgZnVuY3Rpb24gZGVmaW5lSXRlcmF0b3JNZXRob2RzKHQpIHtcbiAgICBbXCJuZXh0XCIsIFwidGhyb3dcIiwgXCJyZXR1cm5cIl0uZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgZGVmaW5lKHQsIGUsIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnZva2UoZSwgdCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICBmdW5jdGlvbiBBc3luY0l0ZXJhdG9yKHQsIGUpIHtcbiAgICBmdW5jdGlvbiBpbnZva2UociwgbywgaSwgYSkge1xuICAgICAgdmFyIGMgPSB0cnlDYXRjaCh0W3JdLCB0LCBvKTtcbiAgICAgIGlmIChcInRocm93XCIgIT09IGMudHlwZSkge1xuICAgICAgICB2YXIgdSA9IGMuYXJnLFxuICAgICAgICAgIGggPSB1LnZhbHVlO1xuICAgICAgICByZXR1cm4gaCAmJiBcIm9iamVjdFwiID09IHR5cGVvZiBoICYmIG4uY2FsbChoLCBcIl9fYXdhaXRcIikgPyBlLnJlc29sdmUoaC5fX2F3YWl0KS50aGVuKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgaW52b2tlKFwibmV4dFwiLCB0LCBpLCBhKTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICBpbnZva2UoXCJ0aHJvd1wiLCB0LCBpLCBhKTtcbiAgICAgICAgfSkgOiBlLnJlc29sdmUoaCkudGhlbihmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHUudmFsdWUgPSB0LCBpKHUpO1xuICAgICAgICB9LCBmdW5jdGlvbiAodCkge1xuICAgICAgICAgIHJldHVybiBpbnZva2UoXCJ0aHJvd1wiLCB0LCBpLCBhKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBhKGMuYXJnKTtcbiAgICB9XG4gICAgdmFyIHI7XG4gICAgbyh0aGlzLCBcIl9pbnZva2VcIiwge1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uICh0LCBuKSB7XG4gICAgICAgIGZ1bmN0aW9uIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCkge1xuICAgICAgICAgIHJldHVybiBuZXcgZShmdW5jdGlvbiAoZSwgcikge1xuICAgICAgICAgICAgaW52b2tlKHQsIG4sIGUsIHIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByID0gciA/IHIudGhlbihjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZywgY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcpIDogY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBmdW5jdGlvbiBtYWtlSW52b2tlTWV0aG9kKGUsIHIsIG4pIHtcbiAgICB2YXIgbyA9IGg7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChpLCBhKSB7XG4gICAgICBpZiAobyA9PT0gZikgdGhyb3cgbmV3IEVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZ1wiKTtcbiAgICAgIGlmIChvID09PSBzKSB7XG4gICAgICAgIGlmIChcInRocm93XCIgPT09IGkpIHRocm93IGE7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmFsdWU6IHQsXG4gICAgICAgICAgZG9uZTogITBcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGZvciAobi5tZXRob2QgPSBpLCBuLmFyZyA9IGE7Oykge1xuICAgICAgICB2YXIgYyA9IG4uZGVsZWdhdGU7XG4gICAgICAgIGlmIChjKSB7XG4gICAgICAgICAgdmFyIHUgPSBtYXliZUludm9rZURlbGVnYXRlKGMsIG4pO1xuICAgICAgICAgIGlmICh1KSB7XG4gICAgICAgICAgICBpZiAodSA9PT0geSkgY29udGludWU7XG4gICAgICAgICAgICByZXR1cm4gdTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFwibmV4dFwiID09PSBuLm1ldGhvZCkgbi5zZW50ID0gbi5fc2VudCA9IG4uYXJnO2Vsc2UgaWYgKFwidGhyb3dcIiA9PT0gbi5tZXRob2QpIHtcbiAgICAgICAgICBpZiAobyA9PT0gaCkgdGhyb3cgbyA9IHMsIG4uYXJnO1xuICAgICAgICAgIG4uZGlzcGF0Y2hFeGNlcHRpb24obi5hcmcpO1xuICAgICAgICB9IGVsc2UgXCJyZXR1cm5cIiA9PT0gbi5tZXRob2QgJiYgbi5hYnJ1cHQoXCJyZXR1cm5cIiwgbi5hcmcpO1xuICAgICAgICBvID0gZjtcbiAgICAgICAgdmFyIHAgPSB0cnlDYXRjaChlLCByLCBuKTtcbiAgICAgICAgaWYgKFwibm9ybWFsXCIgPT09IHAudHlwZSkge1xuICAgICAgICAgIGlmIChvID0gbi5kb25lID8gcyA6IGwsIHAuYXJnID09PSB5KSBjb250aW51ZTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsdWU6IHAuYXJnLFxuICAgICAgICAgICAgZG9uZTogbi5kb25lXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBcInRocm93XCIgPT09IHAudHlwZSAmJiAobyA9IHMsIG4ubWV0aG9kID0gXCJ0aHJvd1wiLCBuLmFyZyA9IHAuYXJnKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIG1heWJlSW52b2tlRGVsZWdhdGUoZSwgcikge1xuICAgIHZhciBuID0gci5tZXRob2QsXG4gICAgICBvID0gZS5pdGVyYXRvcltuXTtcbiAgICBpZiAobyA9PT0gdCkgcmV0dXJuIHIuZGVsZWdhdGUgPSBudWxsLCBcInRocm93XCIgPT09IG4gJiYgZS5pdGVyYXRvci5yZXR1cm4gJiYgKHIubWV0aG9kID0gXCJyZXR1cm5cIiwgci5hcmcgPSB0LCBtYXliZUludm9rZURlbGVnYXRlKGUsIHIpLCBcInRocm93XCIgPT09IHIubWV0aG9kKSB8fCBcInJldHVyblwiICE9PSBuICYmIChyLm1ldGhvZCA9IFwidGhyb3dcIiwgci5hcmcgPSBuZXcgVHlwZUVycm9yKFwiVGhlIGl0ZXJhdG9yIGRvZXMgbm90IHByb3ZpZGUgYSAnXCIgKyBuICsgXCInIG1ldGhvZFwiKSksIHk7XG4gICAgdmFyIGkgPSB0cnlDYXRjaChvLCBlLml0ZXJhdG9yLCByLmFyZyk7XG4gICAgaWYgKFwidGhyb3dcIiA9PT0gaS50eXBlKSByZXR1cm4gci5tZXRob2QgPSBcInRocm93XCIsIHIuYXJnID0gaS5hcmcsIHIuZGVsZWdhdGUgPSBudWxsLCB5O1xuICAgIHZhciBhID0gaS5hcmc7XG4gICAgcmV0dXJuIGEgPyBhLmRvbmUgPyAocltlLnJlc3VsdE5hbWVdID0gYS52YWx1ZSwgci5uZXh0ID0gZS5uZXh0TG9jLCBcInJldHVyblwiICE9PSByLm1ldGhvZCAmJiAoci5tZXRob2QgPSBcIm5leHRcIiwgci5hcmcgPSB0KSwgci5kZWxlZ2F0ZSA9IG51bGwsIHkpIDogYSA6IChyLm1ldGhvZCA9IFwidGhyb3dcIiwgci5hcmcgPSBuZXcgVHlwZUVycm9yKFwiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3RcIiksIHIuZGVsZWdhdGUgPSBudWxsLCB5KTtcbiAgfVxuICBmdW5jdGlvbiBwdXNoVHJ5RW50cnkodCkge1xuICAgIHZhciBlID0ge1xuICAgICAgdHJ5TG9jOiB0WzBdXG4gICAgfTtcbiAgICAxIGluIHQgJiYgKGUuY2F0Y2hMb2MgPSB0WzFdKSwgMiBpbiB0ICYmIChlLmZpbmFsbHlMb2MgPSB0WzJdLCBlLmFmdGVyTG9jID0gdFszXSksIHRoaXMudHJ5RW50cmllcy5wdXNoKGUpO1xuICB9XG4gIGZ1bmN0aW9uIHJlc2V0VHJ5RW50cnkodCkge1xuICAgIHZhciBlID0gdC5jb21wbGV0aW9uIHx8IHt9O1xuICAgIGUudHlwZSA9IFwibm9ybWFsXCIsIGRlbGV0ZSBlLmFyZywgdC5jb21wbGV0aW9uID0gZTtcbiAgfVxuICBmdW5jdGlvbiBDb250ZXh0KHQpIHtcbiAgICB0aGlzLnRyeUVudHJpZXMgPSBbe1xuICAgICAgdHJ5TG9jOiBcInJvb3RcIlxuICAgIH1dLCB0LmZvckVhY2gocHVzaFRyeUVudHJ5LCB0aGlzKSwgdGhpcy5yZXNldCghMCk7XG4gIH1cbiAgZnVuY3Rpb24gdmFsdWVzKGUpIHtcbiAgICBpZiAoZSB8fCBcIlwiID09PSBlKSB7XG4gICAgICB2YXIgciA9IGVbYV07XG4gICAgICBpZiAocikgcmV0dXJuIHIuY2FsbChlKTtcbiAgICAgIGlmIChcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUubmV4dCkgcmV0dXJuIGU7XG4gICAgICBpZiAoIWlzTmFOKGUubGVuZ3RoKSkge1xuICAgICAgICB2YXIgbyA9IC0xLFxuICAgICAgICAgIGkgPSBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgICAgICAgZm9yICg7ICsrbyA8IGUubGVuZ3RoOykgaWYgKG4uY2FsbChlLCBvKSkgcmV0dXJuIG5leHQudmFsdWUgPSBlW29dLCBuZXh0LmRvbmUgPSAhMSwgbmV4dDtcbiAgICAgICAgICAgIHJldHVybiBuZXh0LnZhbHVlID0gdCwgbmV4dC5kb25lID0gITAsIG5leHQ7XG4gICAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGkubmV4dCA9IGk7XG4gICAgICB9XG4gICAgfVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IodHlwZW9mIGUgKyBcIiBpcyBub3QgaXRlcmFibGVcIik7XG4gIH1cbiAgcmV0dXJuIEdlbmVyYXRvckZ1bmN0aW9uLnByb3RvdHlwZSA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLCBvKGcsIFwiY29uc3RydWN0b3JcIiwge1xuICAgIHZhbHVlOiBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSxcbiAgICBjb25maWd1cmFibGU6ICEwXG4gIH0pLCBvKEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLCBcImNvbnN0cnVjdG9yXCIsIHtcbiAgICB2YWx1ZTogR2VuZXJhdG9yRnVuY3Rpb24sXG4gICAgY29uZmlndXJhYmxlOiAhMFxuICB9KSwgR2VuZXJhdG9yRnVuY3Rpb24uZGlzcGxheU5hbWUgPSBkZWZpbmUoR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIHUsIFwiR2VuZXJhdG9yRnVuY3Rpb25cIiksIGUuaXNHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uICh0KSB7XG4gICAgdmFyIGUgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHQgJiYgdC5jb25zdHJ1Y3RvcjtcbiAgICByZXR1cm4gISFlICYmIChlID09PSBHZW5lcmF0b3JGdW5jdGlvbiB8fCBcIkdlbmVyYXRvckZ1bmN0aW9uXCIgPT09IChlLmRpc3BsYXlOYW1lIHx8IGUubmFtZSkpO1xuICB9LCBlLm1hcmsgPSBmdW5jdGlvbiAodCkge1xuICAgIHJldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2YodCwgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUpIDogKHQuX19wcm90b19fID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIGRlZmluZSh0LCB1LCBcIkdlbmVyYXRvckZ1bmN0aW9uXCIpKSwgdC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKGcpLCB0O1xuICB9LCBlLmF3cmFwID0gZnVuY3Rpb24gKHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgX19hd2FpdDogdFxuICAgIH07XG4gIH0sIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSksIGRlZmluZShBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSwgYywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9KSwgZS5Bc3luY0l0ZXJhdG9yID0gQXN5bmNJdGVyYXRvciwgZS5hc3luYyA9IGZ1bmN0aW9uICh0LCByLCBuLCBvLCBpKSB7XG4gICAgdm9pZCAwID09PSBpICYmIChpID0gUHJvbWlzZSk7XG4gICAgdmFyIGEgPSBuZXcgQXN5bmNJdGVyYXRvcih3cmFwKHQsIHIsIG4sIG8pLCBpKTtcbiAgICByZXR1cm4gZS5pc0dlbmVyYXRvckZ1bmN0aW9uKHIpID8gYSA6IGEubmV4dCgpLnRoZW4oZnVuY3Rpb24gKHQpIHtcbiAgICAgIHJldHVybiB0LmRvbmUgPyB0LnZhbHVlIDogYS5uZXh0KCk7XG4gICAgfSk7XG4gIH0sIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhnKSwgZGVmaW5lKGcsIHUsIFwiR2VuZXJhdG9yXCIpLCBkZWZpbmUoZywgYSwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9KSwgZGVmaW5lKGcsIFwidG9TdHJpbmdcIiwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBcIltvYmplY3QgR2VuZXJhdG9yXVwiO1xuICB9KSwgZS5rZXlzID0gZnVuY3Rpb24gKHQpIHtcbiAgICB2YXIgZSA9IE9iamVjdCh0KSxcbiAgICAgIHIgPSBbXTtcbiAgICBmb3IgKHZhciBuIGluIGUpIHIucHVzaChuKTtcbiAgICByZXR1cm4gci5yZXZlcnNlKCksIGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICBmb3IgKDsgci5sZW5ndGg7KSB7XG4gICAgICAgIHZhciB0ID0gci5wb3AoKTtcbiAgICAgICAgaWYgKHQgaW4gZSkgcmV0dXJuIG5leHQudmFsdWUgPSB0LCBuZXh0LmRvbmUgPSAhMSwgbmV4dDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXh0LmRvbmUgPSAhMCwgbmV4dDtcbiAgICB9O1xuICB9LCBlLnZhbHVlcyA9IHZhbHVlcywgQ29udGV4dC5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IENvbnRleHQsXG4gICAgcmVzZXQ6IGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAodGhpcy5wcmV2ID0gMCwgdGhpcy5uZXh0ID0gMCwgdGhpcy5zZW50ID0gdGhpcy5fc2VudCA9IHQsIHRoaXMuZG9uZSA9ICExLCB0aGlzLmRlbGVnYXRlID0gbnVsbCwgdGhpcy5tZXRob2QgPSBcIm5leHRcIiwgdGhpcy5hcmcgPSB0LCB0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChyZXNldFRyeUVudHJ5KSwgIWUpIGZvciAodmFyIHIgaW4gdGhpcykgXCJ0XCIgPT09IHIuY2hhckF0KDApICYmIG4uY2FsbCh0aGlzLCByKSAmJiAhaXNOYU4oK3Iuc2xpY2UoMSkpICYmICh0aGlzW3JdID0gdCk7XG4gICAgfSxcbiAgICBzdG9wOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmRvbmUgPSAhMDtcbiAgICAgIHZhciB0ID0gdGhpcy50cnlFbnRyaWVzWzBdLmNvbXBsZXRpb247XG4gICAgICBpZiAoXCJ0aHJvd1wiID09PSB0LnR5cGUpIHRocm93IHQuYXJnO1xuICAgICAgcmV0dXJuIHRoaXMucnZhbDtcbiAgICB9LFxuICAgIGRpc3BhdGNoRXhjZXB0aW9uOiBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKHRoaXMuZG9uZSkgdGhyb3cgZTtcbiAgICAgIHZhciByID0gdGhpcztcbiAgICAgIGZ1bmN0aW9uIGhhbmRsZShuLCBvKSB7XG4gICAgICAgIHJldHVybiBhLnR5cGUgPSBcInRocm93XCIsIGEuYXJnID0gZSwgci5uZXh0ID0gbiwgbyAmJiAoci5tZXRob2QgPSBcIm5leHRcIiwgci5hcmcgPSB0KSwgISFvO1xuICAgICAgfVxuICAgICAgZm9yICh2YXIgbyA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBvID49IDA7IC0tbykge1xuICAgICAgICB2YXIgaSA9IHRoaXMudHJ5RW50cmllc1tvXSxcbiAgICAgICAgICBhID0gaS5jb21wbGV0aW9uO1xuICAgICAgICBpZiAoXCJyb290XCIgPT09IGkudHJ5TG9jKSByZXR1cm4gaGFuZGxlKFwiZW5kXCIpO1xuICAgICAgICBpZiAoaS50cnlMb2MgPD0gdGhpcy5wcmV2KSB7XG4gICAgICAgICAgdmFyIGMgPSBuLmNhbGwoaSwgXCJjYXRjaExvY1wiKSxcbiAgICAgICAgICAgIHUgPSBuLmNhbGwoaSwgXCJmaW5hbGx5TG9jXCIpO1xuICAgICAgICAgIGlmIChjICYmIHUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBpLmNhdGNoTG9jKSByZXR1cm4gaGFuZGxlKGkuY2F0Y2hMb2MsICEwKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBpLmZpbmFsbHlMb2MpIHJldHVybiBoYW5kbGUoaS5maW5hbGx5TG9jKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBpLmNhdGNoTG9jKSByZXR1cm4gaGFuZGxlKGkuY2F0Y2hMb2MsICEwKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCF1KSB0aHJvdyBuZXcgRXJyb3IoXCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseVwiKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBpLmZpbmFsbHlMb2MpIHJldHVybiBoYW5kbGUoaS5maW5hbGx5TG9jKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGFicnVwdDogZnVuY3Rpb24gKHQsIGUpIHtcbiAgICAgIGZvciAodmFyIHIgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgciA+PSAwOyAtLXIpIHtcbiAgICAgICAgdmFyIG8gPSB0aGlzLnRyeUVudHJpZXNbcl07XG4gICAgICAgIGlmIChvLnRyeUxvYyA8PSB0aGlzLnByZXYgJiYgbi5jYWxsKG8sIFwiZmluYWxseUxvY1wiKSAmJiB0aGlzLnByZXYgPCBvLmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICB2YXIgaSA9IG87XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGkgJiYgKFwiYnJlYWtcIiA9PT0gdCB8fCBcImNvbnRpbnVlXCIgPT09IHQpICYmIGkudHJ5TG9jIDw9IGUgJiYgZSA8PSBpLmZpbmFsbHlMb2MgJiYgKGkgPSBudWxsKTtcbiAgICAgIHZhciBhID0gaSA/IGkuY29tcGxldGlvbiA6IHt9O1xuICAgICAgcmV0dXJuIGEudHlwZSA9IHQsIGEuYXJnID0gZSwgaSA/ICh0aGlzLm1ldGhvZCA9IFwibmV4dFwiLCB0aGlzLm5leHQgPSBpLmZpbmFsbHlMb2MsIHkpIDogdGhpcy5jb21wbGV0ZShhKTtcbiAgICB9LFxuICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAodCwgZSkge1xuICAgICAgaWYgKFwidGhyb3dcIiA9PT0gdC50eXBlKSB0aHJvdyB0LmFyZztcbiAgICAgIHJldHVybiBcImJyZWFrXCIgPT09IHQudHlwZSB8fCBcImNvbnRpbnVlXCIgPT09IHQudHlwZSA/IHRoaXMubmV4dCA9IHQuYXJnIDogXCJyZXR1cm5cIiA9PT0gdC50eXBlID8gKHRoaXMucnZhbCA9IHRoaXMuYXJnID0gdC5hcmcsIHRoaXMubWV0aG9kID0gXCJyZXR1cm5cIiwgdGhpcy5uZXh0ID0gXCJlbmRcIikgOiBcIm5vcm1hbFwiID09PSB0LnR5cGUgJiYgZSAmJiAodGhpcy5uZXh0ID0gZSksIHk7XG4gICAgfSxcbiAgICBmaW5pc2g6IGZ1bmN0aW9uICh0KSB7XG4gICAgICBmb3IgKHZhciBlID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGUgPj0gMDsgLS1lKSB7XG4gICAgICAgIHZhciByID0gdGhpcy50cnlFbnRyaWVzW2VdO1xuICAgICAgICBpZiAoci5maW5hbGx5TG9jID09PSB0KSByZXR1cm4gdGhpcy5jb21wbGV0ZShyLmNvbXBsZXRpb24sIHIuYWZ0ZXJMb2MpLCByZXNldFRyeUVudHJ5KHIpLCB5O1xuICAgICAgfVxuICAgIH0sXG4gICAgY2F0Y2g6IGZ1bmN0aW9uICh0KSB7XG4gICAgICBmb3IgKHZhciBlID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGUgPj0gMDsgLS1lKSB7XG4gICAgICAgIHZhciByID0gdGhpcy50cnlFbnRyaWVzW2VdO1xuICAgICAgICBpZiAoci50cnlMb2MgPT09IHQpIHtcbiAgICAgICAgICB2YXIgbiA9IHIuY29tcGxldGlvbjtcbiAgICAgICAgICBpZiAoXCJ0aHJvd1wiID09PSBuLnR5cGUpIHtcbiAgICAgICAgICAgIHZhciBvID0gbi5hcmc7XG4gICAgICAgICAgICByZXNldFRyeUVudHJ5KHIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaWxsZWdhbCBjYXRjaCBhdHRlbXB0XCIpO1xuICAgIH0sXG4gICAgZGVsZWdhdGVZaWVsZDogZnVuY3Rpb24gKGUsIHIsIG4pIHtcbiAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlID0ge1xuICAgICAgICBpdGVyYXRvcjogdmFsdWVzKGUpLFxuICAgICAgICByZXN1bHROYW1lOiByLFxuICAgICAgICBuZXh0TG9jOiBuXG4gICAgICB9LCBcIm5leHRcIiA9PT0gdGhpcy5tZXRob2QgJiYgKHRoaXMuYXJnID0gdCksIHk7XG4gICAgfVxuICB9LCBlO1xufVxuZnVuY3Rpb24gX3R5cGVvZihvKSB7XG4gIFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjtcblxuICByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvO1xuICB9IDogZnVuY3Rpb24gKG8pIHtcbiAgICByZXR1cm4gbyAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgbyAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2YgbztcbiAgfSwgX3R5cGVvZihvKTtcbn1cbmZ1bmN0aW9uIF91c2luZyhvLCBlLCBuKSB7XG4gIGlmIChudWxsID09IGUpIHJldHVybiBlO1xuICBpZiAoXCJvYmplY3RcIiAhPSB0eXBlb2YgZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcInVzaW5nIGRlY2xhcmF0aW9ucyBjYW4gb25seSBiZSB1c2VkIHdpdGggb2JqZWN0cywgbnVsbCwgb3IgdW5kZWZpbmVkLlwiKTtcbiAgaWYgKG4pIHZhciByID0gZVtTeW1ib2wuYXN5bmNEaXNwb3NlIHx8IFN5bWJvbC5mb3IoXCJTeW1ib2wuYXN5bmNEaXNwb3NlXCIpXTtcbiAgaWYgKG51bGwgPT0gciAmJiAociA9IGVbU3ltYm9sLmRpc3Bvc2UgfHwgU3ltYm9sLmZvcihcIlN5bWJvbC5kaXNwb3NlXCIpXSksIFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByb3BlcnR5IFtTeW1ib2wuZGlzcG9zZV0gaXMgbm90IGEgZnVuY3Rpb24uXCIpO1xuICByZXR1cm4gby5wdXNoKHtcbiAgICB2OiBlLFxuICAgIGQ6IHIsXG4gICAgYTogblxuICB9KSwgZTtcbn1cbmZ1bmN0aW9uIF93cmFwUmVnRXhwKCkge1xuICBfd3JhcFJlZ0V4cCA9IGZ1bmN0aW9uIChlLCByKSB7XG4gICAgcmV0dXJuIG5ldyBCYWJlbFJlZ0V4cChlLCB2b2lkIDAsIHIpO1xuICB9O1xuICB2YXIgZSA9IFJlZ0V4cC5wcm90b3R5cGUsXG4gICAgciA9IG5ldyBXZWFrTWFwKCk7XG4gIGZ1bmN0aW9uIEJhYmVsUmVnRXhwKGUsIHQsIHApIHtcbiAgICB2YXIgbyA9IG5ldyBSZWdFeHAoZSwgdCk7XG4gICAgcmV0dXJuIHIuc2V0KG8sIHAgfHwgci5nZXQoZSkpLCBfc2V0UHJvdG90eXBlT2YobywgQmFiZWxSZWdFeHAucHJvdG90eXBlKTtcbiAgfVxuICBmdW5jdGlvbiBidWlsZEdyb3VwcyhlLCB0KSB7XG4gICAgdmFyIHAgPSByLmdldCh0KTtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMocCkucmVkdWNlKGZ1bmN0aW9uIChyLCB0KSB7XG4gICAgICB2YXIgbyA9IHBbdF07XG4gICAgICBpZiAoXCJudW1iZXJcIiA9PSB0eXBlb2Ygbykgclt0XSA9IGVbb107ZWxzZSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyB2b2lkIDAgPT09IGVbb1tpXV0gJiYgaSArIDEgPCBvLmxlbmd0aDspIGkrKztcbiAgICAgICAgclt0XSA9IGVbb1tpXV07XG4gICAgICB9XG4gICAgICByZXR1cm4gcjtcbiAgICB9LCBPYmplY3QuY3JlYXRlKG51bGwpKTtcbiAgfVxuICByZXR1cm4gX2luaGVyaXRzKEJhYmVsUmVnRXhwLCBSZWdFeHApLCBCYWJlbFJlZ0V4cC5wcm90b3R5cGUuZXhlYyA9IGZ1bmN0aW9uIChyKSB7XG4gICAgdmFyIHQgPSBlLmV4ZWMuY2FsbCh0aGlzLCByKTtcbiAgICBpZiAodCkge1xuICAgICAgdC5ncm91cHMgPSBidWlsZEdyb3Vwcyh0LCB0aGlzKTtcbiAgICAgIHZhciBwID0gdC5pbmRpY2VzO1xuICAgICAgcCAmJiAocC5ncm91cHMgPSBidWlsZEdyb3VwcyhwLCB0aGlzKSk7XG4gICAgfVxuICAgIHJldHVybiB0O1xuICB9LCBCYWJlbFJlZ0V4cC5wcm90b3R5cGVbU3ltYm9sLnJlcGxhY2VdID0gZnVuY3Rpb24gKHQsIHApIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgcCkge1xuICAgICAgdmFyIG8gPSByLmdldCh0aGlzKTtcbiAgICAgIHJldHVybiBlW1N5bWJvbC5yZXBsYWNlXS5jYWxsKHRoaXMsIHQsIHAucmVwbGFjZSgvXFwkPChbXj5dKyk+L2csIGZ1bmN0aW9uIChlLCByKSB7XG4gICAgICAgIHZhciB0ID0gb1tyXTtcbiAgICAgICAgcmV0dXJuIFwiJFwiICsgKEFycmF5LmlzQXJyYXkodCkgPyB0LmpvaW4oXCIkXCIpIDogdCk7XG4gICAgICB9KSk7XG4gICAgfVxuICAgIGlmIChcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHApIHtcbiAgICAgIHZhciBpID0gdGhpcztcbiAgICAgIHJldHVybiBlW1N5bWJvbC5yZXBsYWNlXS5jYWxsKHRoaXMsIHQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGUgPSBhcmd1bWVudHM7XG4gICAgICAgIHJldHVybiBcIm9iamVjdFwiICE9IHR5cGVvZiBlW2UubGVuZ3RoIC0gMV0gJiYgKGUgPSBbXS5zbGljZS5jYWxsKGUpKS5wdXNoKGJ1aWxkR3JvdXBzKGUsIGkpKSwgcC5hcHBseSh0aGlzLCBlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZVtTeW1ib2wucmVwbGFjZV0uY2FsbCh0aGlzLCB0LCBwKTtcbiAgfSwgX3dyYXBSZWdFeHAuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn1cbmZ1bmN0aW9uIF9Bd2FpdFZhbHVlKHZhbHVlKSB7XG4gIHRoaXMud3JhcHBlZCA9IHZhbHVlO1xufVxuZnVuY3Rpb24gX3dyYXBBc3luY0dlbmVyYXRvcihmbikge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgX0FzeW5jR2VuZXJhdG9yKGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9O1xufVxuZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykge1xuICB0cnkge1xuICAgIHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTtcbiAgICB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJlamVjdChlcnJvcik7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChpbmZvLmRvbmUpIHtcbiAgICByZXNvbHZlKHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7XG4gIH1cbn1cbmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgICAgZnVuY3Rpb24gX25leHQodmFsdWUpIHtcbiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBcIm5leHRcIiwgdmFsdWUpO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gX3Rocm93KGVycikge1xuICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIFwidGhyb3dcIiwgZXJyKTtcbiAgICAgIH1cbiAgICAgIF9uZXh0KHVuZGVmaW5lZCk7XG4gICAgfSk7XG4gIH07XG59XG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgfVxufVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgX3RvUHJvcGVydHlLZXkoZGVzY3JpcHRvci5rZXkpLCBkZXNjcmlwdG9yKTtcbiAgfVxufVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsIFwicHJvdG90eXBlXCIsIHtcbiAgICB3cml0YWJsZTogZmFsc2VcbiAgfSk7XG4gIHJldHVybiBDb25zdHJ1Y3Rvcjtcbn1cbmZ1bmN0aW9uIF9kZWZpbmVFbnVtZXJhYmxlUHJvcGVydGllcyhvYmosIGRlc2NzKSB7XG4gIGZvciAodmFyIGtleSBpbiBkZXNjcykge1xuICAgIHZhciBkZXNjID0gZGVzY3Nba2V5XTtcbiAgICBkZXNjLmNvbmZpZ3VyYWJsZSA9IGRlc2MuZW51bWVyYWJsZSA9IHRydWU7XG4gICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjKSBkZXNjLndyaXRhYmxlID0gdHJ1ZTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIGRlc2MpO1xuICB9XG4gIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7XG4gICAgdmFyIG9iamVjdFN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGRlc2NzKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iamVjdFN5bWJvbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzeW0gPSBvYmplY3RTeW1ib2xzW2ldO1xuICAgICAgdmFyIGRlc2MgPSBkZXNjc1tzeW1dO1xuICAgICAgZGVzYy5jb25maWd1cmFibGUgPSBkZXNjLmVudW1lcmFibGUgPSB0cnVlO1xuICAgICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjKSBkZXNjLndyaXRhYmxlID0gdHJ1ZTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIHN5bSwgZGVzYyk7XG4gICAgfVxuICB9XG4gIHJldHVybiBvYmo7XG59XG5mdW5jdGlvbiBfZGVmYXVsdHMob2JqLCBkZWZhdWx0cykge1xuICB2YXIga2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGRlZmF1bHRzKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgdmFyIHZhbHVlID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihkZWZhdWx0cywga2V5KTtcbiAgICBpZiAodmFsdWUgJiYgdmFsdWUuY29uZmlndXJhYmxlICYmIG9ialtrZXldID09PSB1bmRlZmluZWQpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gb2JqO1xufVxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICBrZXkgPSBfdG9Qcm9wZXJ0eUtleShrZXkpO1xuICBpZiAoa2V5IGluIG9iaikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgfVxuICByZXR1cm4gb2JqO1xufVxuZnVuY3Rpb24gX2V4dGVuZHMoKSB7XG4gIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiA/IE9iamVjdC5hc3NpZ24uYmluZCgpIDogZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO1xuICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfTtcbiAgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IE9iamVjdChhcmd1bWVudHNbaV0pIDoge307XG4gICAgdmFyIG93bktleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuICAgIGlmICh0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgb3duS2V5cy5wdXNoLmFwcGx5KG93bktleXMsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKS5maWx0ZXIoZnVuY3Rpb24gKHN5bSkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIHN5bSkuZW51bWVyYWJsZTtcbiAgICAgIH0pKTtcbiAgICB9XG4gICAgb3duS2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59XG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcbiAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtcbiAgfVxuICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHtcbiAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgdmFsdWU6IHN1YkNsYXNzLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9XG4gIH0pO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3ViQ2xhc3MsIFwicHJvdG90eXBlXCIsIHtcbiAgICB3cml0YWJsZTogZmFsc2VcbiAgfSk7XG4gIGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpO1xufVxuZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcbiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7XG4gIHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzO1xuICBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpO1xufVxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHtcbiAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7XG4gICAgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTtcbiAgfTtcbiAgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTtcbn1cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7XG4gIF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkge1xuICAgIG8uX19wcm90b19fID0gcDtcbiAgICByZXR1cm4gbztcbiAgfTtcbiAgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTtcbn1cbmZ1bmN0aW9uIF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSB7XG4gIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTtcbiAgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTtcbiAgaWYgKHR5cGVvZiBQcm94eSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gdHJ1ZTtcbiAgdHJ5IHtcbiAgICBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbmZ1bmN0aW9uIF9jb25zdHJ1Y3QoUGFyZW50LCBhcmdzLCBDbGFzcykge1xuICBpZiAoX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpKSB7XG4gICAgX2NvbnN0cnVjdCA9IFJlZmxlY3QuY29uc3RydWN0LmJpbmQoKTtcbiAgfSBlbHNlIHtcbiAgICBfY29uc3RydWN0ID0gZnVuY3Rpb24gX2NvbnN0cnVjdChQYXJlbnQsIGFyZ3MsIENsYXNzKSB7XG4gICAgICB2YXIgYSA9IFtudWxsXTtcbiAgICAgIGEucHVzaC5hcHBseShhLCBhcmdzKTtcbiAgICAgIHZhciBDb25zdHJ1Y3RvciA9IEZ1bmN0aW9uLmJpbmQuYXBwbHkoUGFyZW50LCBhKTtcbiAgICAgIHZhciBpbnN0YW5jZSA9IG5ldyBDb25zdHJ1Y3RvcigpO1xuICAgICAgaWYgKENsYXNzKSBfc2V0UHJvdG90eXBlT2YoaW5zdGFuY2UsIENsYXNzLnByb3RvdHlwZSk7XG4gICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgfTtcbiAgfVxuICByZXR1cm4gX2NvbnN0cnVjdC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xufVxuZnVuY3Rpb24gX2lzTmF0aXZlRnVuY3Rpb24oZm4pIHtcbiAgcmV0dXJuIEZ1bmN0aW9uLnRvU3RyaW5nLmNhbGwoZm4pLmluZGV4T2YoXCJbbmF0aXZlIGNvZGVdXCIpICE9PSAtMTtcbn1cbmZ1bmN0aW9uIF93cmFwTmF0aXZlU3VwZXIoQ2xhc3MpIHtcbiAgdmFyIF9jYWNoZSA9IHR5cGVvZiBNYXAgPT09IFwiZnVuY3Rpb25cIiA/IG5ldyBNYXAoKSA6IHVuZGVmaW5lZDtcbiAgX3dyYXBOYXRpdmVTdXBlciA9IGZ1bmN0aW9uIF93cmFwTmF0aXZlU3VwZXIoQ2xhc3MpIHtcbiAgICBpZiAoQ2xhc3MgPT09IG51bGwgfHwgIV9pc05hdGl2ZUZ1bmN0aW9uKENsYXNzKSkgcmV0dXJuIENsYXNzO1xuICAgIGlmICh0eXBlb2YgQ2xhc3MgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIF9jYWNoZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgaWYgKF9jYWNoZS5oYXMoQ2xhc3MpKSByZXR1cm4gX2NhY2hlLmdldChDbGFzcyk7XG4gICAgICBfY2FjaGUuc2V0KENsYXNzLCBXcmFwcGVyKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gV3JhcHBlcigpIHtcbiAgICAgIHJldHVybiBfY29uc3RydWN0KENsYXNzLCBhcmd1bWVudHMsIF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3Rvcik7XG4gICAgfVxuICAgIFdyYXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDbGFzcy5wcm90b3R5cGUsIHtcbiAgICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgIHZhbHVlOiBXcmFwcGVyLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBfc2V0UHJvdG90eXBlT2YoV3JhcHBlciwgQ2xhc3MpO1xuICB9O1xuICByZXR1cm4gX3dyYXBOYXRpdmVTdXBlcihDbGFzcyk7XG59XG5mdW5jdGlvbiBfaW5zdGFuY2VvZihsZWZ0LCByaWdodCkge1xuICBpZiAocmlnaHQgIT0gbnVsbCAmJiB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIHJpZ2h0W1N5bWJvbC5oYXNJbnN0YW5jZV0pIHtcbiAgICByZXR1cm4gISFyaWdodFtTeW1ib2wuaGFzSW5zdGFuY2VdKGxlZnQpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBsZWZ0IGluc3RhbmNlb2YgcmlnaHQ7XG4gIH1cbn1cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7XG4gICAgZGVmYXVsdDogb2JqXG4gIH07XG59XG5mdW5jdGlvbiBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUobm9kZUludGVyb3ApIHtcbiAgaWYgKHR5cGVvZiBXZWFrTWFwICE9PSBcImZ1bmN0aW9uXCIpIHJldHVybiBudWxsO1xuICB2YXIgY2FjaGVCYWJlbEludGVyb3AgPSBuZXcgV2Vha01hcCgpO1xuICB2YXIgY2FjaGVOb2RlSW50ZXJvcCA9IG5ldyBXZWFrTWFwKCk7XG4gIHJldHVybiAoX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlID0gZnVuY3Rpb24gKG5vZGVJbnRlcm9wKSB7XG4gICAgcmV0dXJuIG5vZGVJbnRlcm9wID8gY2FjaGVOb2RlSW50ZXJvcCA6IGNhY2hlQmFiZWxJbnRlcm9wO1xuICB9KShub2RlSW50ZXJvcCk7XG59XG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmosIG5vZGVJbnRlcm9wKSB7XG4gIGlmICghbm9kZUludGVyb3AgJiYgb2JqICYmIG9iai5fX2VzTW9kdWxlKSB7XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuICBpZiAob2JqID09PSBudWxsIHx8IHR5cGVvZiBvYmogIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG9iaiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRlZmF1bHQ6IG9ialxuICAgIH07XG4gIH1cbiAgdmFyIGNhY2hlID0gX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlKG5vZGVJbnRlcm9wKTtcbiAgaWYgKGNhY2hlICYmIGNhY2hlLmhhcyhvYmopKSB7XG4gICAgcmV0dXJuIGNhY2hlLmdldChvYmopO1xuICB9XG4gIHZhciBuZXdPYmogPSB7fTtcbiAgdmFyIGhhc1Byb3BlcnR5RGVzY3JpcHRvciA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKGtleSAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgdmFyIGRlc2MgPSBoYXNQcm9wZXJ0eURlc2NyaXB0b3IgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSA6IG51bGw7XG4gICAgICBpZiAoZGVzYyAmJiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXdPYmpba2V5XSA9IG9ialtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBuZXdPYmouZGVmYXVsdCA9IG9iajtcbiAgaWYgKGNhY2hlKSB7XG4gICAgY2FjaGUuc2V0KG9iaiwgbmV3T2JqKTtcbiAgfVxuICByZXR1cm4gbmV3T2JqO1xufVxuZnVuY3Rpb24gX25ld0Fycm93Q2hlY2soaW5uZXJUaGlzLCBib3VuZFRoaXMpIHtcbiAgaWYgKGlubmVyVGhpcyAhPT0gYm91bmRUaGlzKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBpbnN0YW50aWF0ZSBhbiBhcnJvdyBmdW5jdGlvblwiKTtcbiAgfVxufVxuZnVuY3Rpb24gX29iamVjdERlc3RydWN0dXJpbmdFbXB0eShvYmopIHtcbiAgaWYgKG9iaiA9PSBudWxsKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGRlc3RydWN0dXJlIFwiICsgb2JqKTtcbn1cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHtcbiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307XG4gIHZhciB0YXJnZXQgPSB7fTtcbiAgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuICB2YXIga2V5LCBpO1xuICBmb3IgKGkgPSAwOyBpIDwgc291cmNlS2V5cy5sZW5ndGg7IGkrKykge1xuICAgIGtleSA9IHNvdXJjZUtleXNbaV07XG4gICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTtcbiAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59XG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoc291cmNlLCBleGNsdWRlZCkge1xuICBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTtcbiAgdmFyIHRhcmdldCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpO1xuICB2YXIga2V5LCBpO1xuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIHZhciBzb3VyY2VTeW1ib2xLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VTeW1ib2xLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBrZXkgPSBzb3VyY2VTeW1ib2xLZXlzW2ldO1xuICAgICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTtcbiAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHNvdXJjZSwga2V5KSkgY29udGludWU7XG4gICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGFyZ2V0O1xufVxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7XG4gIGlmIChzZWxmID09PSB2b2lkIDApIHtcbiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG4gIH1cbiAgcmV0dXJuIHNlbGY7XG59XG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7XG4gIGlmIChjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSkge1xuICAgIHJldHVybiBjYWxsO1xuICB9IGVsc2UgaWYgKGNhbGwgIT09IHZvaWQgMCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiKTtcbiAgfVxuICByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTtcbn1cbmZ1bmN0aW9uIF9jcmVhdGVTdXBlcihEZXJpdmVkKSB7XG4gIHZhciBoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0ID0gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpO1xuICByZXR1cm4gZnVuY3Rpb24gX2NyZWF0ZVN1cGVySW50ZXJuYWwoKSB7XG4gICAgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLFxuICAgICAgcmVzdWx0O1xuICAgIGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7XG4gICAgICB2YXIgTmV3VGFyZ2V0ID0gX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yO1xuICAgICAgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7XG4gIH07XG59XG5mdW5jdGlvbiBfc3VwZXJQcm9wQmFzZShvYmplY3QsIHByb3BlcnR5KSB7XG4gIHdoaWxlICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpKSB7XG4gICAgb2JqZWN0ID0gX2dldFByb3RvdHlwZU9mKG9iamVjdCk7XG4gICAgaWYgKG9iamVjdCA9PT0gbnVsbCkgYnJlYWs7XG4gIH1cbiAgcmV0dXJuIG9iamVjdDtcbn1cbmZ1bmN0aW9uIF9nZXQoKSB7XG4gIGlmICh0eXBlb2YgUmVmbGVjdCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBSZWZsZWN0LmdldCkge1xuICAgIF9nZXQgPSBSZWZsZWN0LmdldC5iaW5kKCk7XG4gIH0gZWxzZSB7XG4gICAgX2dldCA9IGZ1bmN0aW9uIF9nZXQodGFyZ2V0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHtcbiAgICAgIHZhciBiYXNlID0gX3N1cGVyUHJvcEJhc2UodGFyZ2V0LCBwcm9wZXJ0eSk7XG4gICAgICBpZiAoIWJhc2UpIHJldHVybjtcbiAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihiYXNlLCBwcm9wZXJ0eSk7XG4gICAgICBpZiAoZGVzYy5nZXQpIHtcbiAgICAgICAgcmV0dXJuIGRlc2MuZ2V0LmNhbGwoYXJndW1lbnRzLmxlbmd0aCA8IDMgPyB0YXJnZXQgOiByZWNlaXZlcik7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGVzYy52YWx1ZTtcbiAgICB9O1xuICB9XG4gIHJldHVybiBfZ2V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5mdW5jdGlvbiBzZXQodGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWUsIHJlY2VpdmVyKSB7XG4gIGlmICh0eXBlb2YgUmVmbGVjdCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBSZWZsZWN0LnNldCkge1xuICAgIHNldCA9IFJlZmxlY3Quc2V0O1xuICB9IGVsc2Uge1xuICAgIHNldCA9IGZ1bmN0aW9uIHNldCh0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSwgcmVjZWl2ZXIpIHtcbiAgICAgIHZhciBiYXNlID0gX3N1cGVyUHJvcEJhc2UodGFyZ2V0LCBwcm9wZXJ0eSk7XG4gICAgICB2YXIgZGVzYztcbiAgICAgIGlmIChiYXNlKSB7XG4gICAgICAgIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGJhc2UsIHByb3BlcnR5KTtcbiAgICAgICAgaWYgKGRlc2Muc2V0KSB7XG4gICAgICAgICAgZGVzYy5zZXQuY2FsbChyZWNlaXZlciwgdmFsdWUpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKCFkZXNjLndyaXRhYmxlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihyZWNlaXZlciwgcHJvcGVydHkpO1xuICAgICAgaWYgKGRlc2MpIHtcbiAgICAgICAgaWYgKCFkZXNjLndyaXRhYmxlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGRlc2MudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlY2VpdmVyLCBwcm9wZXJ0eSwgZGVzYyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfZGVmaW5lUHJvcGVydHkocmVjZWl2ZXIsIHByb3BlcnR5LCB2YWx1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICB9XG4gIHJldHVybiBzZXQodGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWUsIHJlY2VpdmVyKTtcbn1cbmZ1bmN0aW9uIF9zZXQodGFyZ2V0LCBwcm9wZXJ0eSwgdmFsdWUsIHJlY2VpdmVyLCBpc1N0cmljdCkge1xuICB2YXIgcyA9IHNldCh0YXJnZXQsIHByb3BlcnR5LCB2YWx1ZSwgcmVjZWl2ZXIgfHwgdGFyZ2V0KTtcbiAgaWYgKCFzICYmIGlzU3RyaWN0KSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZmFpbGVkIHRvIHNldCBwcm9wZXJ0eScpO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoc3RyaW5ncywgcmF3KSB7XG4gIGlmICghcmF3KSB7XG4gICAgcmF3ID0gc3RyaW5ncy5zbGljZSgwKTtcbiAgfVxuICByZXR1cm4gT2JqZWN0LmZyZWV6ZShPYmplY3QuZGVmaW5lUHJvcGVydGllcyhzdHJpbmdzLCB7XG4gICAgcmF3OiB7XG4gICAgICB2YWx1ZTogT2JqZWN0LmZyZWV6ZShyYXcpXG4gICAgfVxuICB9KSk7XG59XG5mdW5jdGlvbiBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsTG9vc2Uoc3RyaW5ncywgcmF3KSB7XG4gIGlmICghcmF3KSB7XG4gICAgcmF3ID0gc3RyaW5ncy5zbGljZSgwKTtcbiAgfVxuICBzdHJpbmdzLnJhdyA9IHJhdztcbiAgcmV0dXJuIHN0cmluZ3M7XG59XG5mdW5jdGlvbiBfcmVhZE9ubHlFcnJvcihuYW1lKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJcXFwiXCIgKyBuYW1lICsgXCJcXFwiIGlzIHJlYWQtb25seVwiKTtcbn1cbmZ1bmN0aW9uIF93cml0ZU9ubHlFcnJvcihuYW1lKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJcXFwiXCIgKyBuYW1lICsgXCJcXFwiIGlzIHdyaXRlLW9ubHlcIik7XG59XG5mdW5jdGlvbiBfY2xhc3NOYW1lVERaRXJyb3IobmFtZSkge1xuICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJDbGFzcyBcXFwiXCIgKyBuYW1lICsgXCJcXFwiIGNhbm5vdCBiZSByZWZlcmVuY2VkIGluIGNvbXB1dGVkIHByb3BlcnR5IGtleXMuXCIpO1xufVxuZnVuY3Rpb24gX3RlbXBvcmFsVW5kZWZpbmVkKCkge31cbmZ1bmN0aW9uIF90ZHoobmFtZSkge1xuICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IobmFtZSArIFwiIGlzIG5vdCBkZWZpbmVkIC0gdGVtcG9yYWwgZGVhZCB6b25lXCIpO1xufVxuZnVuY3Rpb24gX3RlbXBvcmFsUmVmKHZhbCwgbmFtZSkge1xuICByZXR1cm4gdmFsID09PSBfdGVtcG9yYWxVbmRlZmluZWQgPyBfdGR6KG5hbWUpIDogdmFsO1xufVxuZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7XG4gIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7XG59XG5mdW5jdGlvbiBfc2xpY2VkVG9BcnJheUxvb3NlKGFyciwgaSkge1xuICByZXR1cm4gX2FycmF5V2l0aEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheUxpbWl0TG9vc2UoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7XG59XG5mdW5jdGlvbiBfdG9BcnJheShhcnIpIHtcbiAgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7XG59XG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7XG4gIHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7XG59XG5mdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpO1xufVxuZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyO1xufVxuZnVuY3Rpb24gX21heWJlQXJyYXlMaWtlKG5leHQsIGFyciwgaSkge1xuICBpZiAoYXJyICYmICFBcnJheS5pc0FycmF5KGFycikgJiYgdHlwZW9mIGFyci5sZW5ndGggPT09IFwibnVtYmVyXCIpIHtcbiAgICB2YXIgbGVuID0gYXJyLmxlbmd0aDtcbiAgICByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBpICE9PSB2b2lkIDAgJiYgaSA8IGxlbiA/IGkgOiBsZW4pO1xuICB9XG4gIHJldHVybiBuZXh0KGFyciwgaSk7XG59XG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHtcbiAgaWYgKHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgaXRlcltTeW1ib2wuaXRlcmF0b3JdICE9IG51bGwgfHwgaXRlcltcIkBAaXRlcmF0b3JcIl0gIT0gbnVsbCkgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7XG59XG5mdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7XG4gIGlmICghbykgcmV0dXJuO1xuICBpZiAodHlwZW9mIG8gPT09IFwic3RyaW5nXCIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pO1xuICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7XG4gIGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7XG4gIGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pO1xuICBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XG59XG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikge1xuICBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSBhcnIyW2ldID0gYXJyW2ldO1xuICByZXR1cm4gYXJyMjtcbn1cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7XG59XG5mdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpO1xufVxuZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobywgYWxsb3dBcnJheUxpa2UpIHtcbiAgdmFyIGl0ID0gdHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0gfHwgb1tcIkBAaXRlcmF0b3JcIl07XG4gIGlmICghaXQpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7XG4gICAgICBpZiAoaXQpIG8gPSBpdDtcbiAgICAgIHZhciBpID0gMDtcbiAgICAgIHZhciBGID0gZnVuY3Rpb24gKCkge307XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzOiBGLFxuICAgICAgICBuOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7XG4gICAgICAgICAgICBkb25lOiB0cnVlXG4gICAgICAgICAgfTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZG9uZTogZmFsc2UsXG4gICAgICAgICAgICB2YWx1ZTogb1tpKytdXG4gICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9LFxuICAgICAgICBmOiBGXG4gICAgICB9O1xuICAgIH1cbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7XG4gIH1cbiAgdmFyIG5vcm1hbENvbXBsZXRpb24gPSB0cnVlLFxuICAgIGRpZEVyciA9IGZhbHNlLFxuICAgIGVycjtcbiAgcmV0dXJuIHtcbiAgICBzOiBmdW5jdGlvbiAoKSB7XG4gICAgICBpdCA9IGl0LmNhbGwobyk7XG4gICAgfSxcbiAgICBuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgc3RlcCA9IGl0Lm5leHQoKTtcbiAgICAgIG5vcm1hbENvbXBsZXRpb24gPSBzdGVwLmRvbmU7XG4gICAgICByZXR1cm4gc3RlcDtcbiAgICB9LFxuICAgIGU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICBkaWRFcnIgPSB0cnVlO1xuICAgICAgZXJyID0gZTtcbiAgICB9LFxuICAgIGY6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICghbm9ybWFsQ29tcGxldGlvbiAmJiBpdC5yZXR1cm4gIT0gbnVsbCkgaXQucmV0dXJuKCk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAoZGlkRXJyKSB0aHJvdyBlcnI7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXJMb29zZShvLCBhbGxvd0FycmF5TGlrZSkge1xuICB2YXIgaXQgPSB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSB8fCBvW1wiQEBpdGVyYXRvclwiXTtcbiAgaWYgKGl0KSByZXR1cm4gKGl0ID0gaXQuY2FsbChvKSkubmV4dC5iaW5kKGl0KTtcbiAgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikge1xuICAgIGlmIChpdCkgbyA9IGl0O1xuICAgIHZhciBpID0gMDtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7XG4gICAgICAgIGRvbmU6IHRydWVcbiAgICAgIH07XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkb25lOiBmYWxzZSxcbiAgICAgICAgdmFsdWU6IG9baSsrXVxuICAgICAgfTtcbiAgICB9O1xuICB9XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcbn1cbmZ1bmN0aW9uIF9za2lwRmlyc3RHZW5lcmF0b3JOZXh0KGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGl0ID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpdC5uZXh0KCk7XG4gICAgcmV0dXJuIGl0O1xuICB9O1xufVxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKGlucHV0LCBoaW50KSB7XG4gIGlmICh0eXBlb2YgaW5wdXQgIT09IFwib2JqZWN0XCIgfHwgaW5wdXQgPT09IG51bGwpIHJldHVybiBpbnB1dDtcbiAgdmFyIHByaW0gPSBpbnB1dFtTeW1ib2wudG9QcmltaXRpdmVdO1xuICBpZiAocHJpbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIHJlcyA9IHByaW0uY2FsbChpbnB1dCwgaGludCB8fCBcImRlZmF1bHRcIik7XG4gICAgaWYgKHR5cGVvZiByZXMgIT09IFwib2JqZWN0XCIpIHJldHVybiByZXM7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpO1xuICB9XG4gIHJldHVybiAoaGludCA9PT0gXCJzdHJpbmdcIiA/IFN0cmluZyA6IE51bWJlcikoaW5wdXQpO1xufVxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkoYXJnKSB7XG4gIHZhciBrZXkgPSBfdG9QcmltaXRpdmUoYXJnLCBcInN0cmluZ1wiKTtcbiAgcmV0dXJuIHR5cGVvZiBrZXkgPT09IFwic3ltYm9sXCIgPyBrZXkgOiBTdHJpbmcoa2V5KTtcbn1cbmZ1bmN0aW9uIF9pbml0aWFsaXplcldhcm5pbmdIZWxwZXIoZGVzY3JpcHRvciwgY29udGV4dCkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ0RlY29yYXRpbmcgY2xhc3MgcHJvcGVydHkgZmFpbGVkLiBQbGVhc2UgZW5zdXJlIHRoYXQgJyArICd0cmFuc2Zvcm0tY2xhc3MtcHJvcGVydGllcyBpcyBlbmFibGVkIGFuZCBydW5zIGFmdGVyIHRoZSBkZWNvcmF0b3JzIHRyYW5zZm9ybS4nKTtcbn1cbmZ1bmN0aW9uIF9pbml0aWFsaXplckRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcGVydHksIGRlc2NyaXB0b3IsIGNvbnRleHQpIHtcbiAgaWYgKCFkZXNjcmlwdG9yKSByZXR1cm47XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5LCB7XG4gICAgZW51bWVyYWJsZTogZGVzY3JpcHRvci5lbnVtZXJhYmxlLFxuICAgIGNvbmZpZ3VyYWJsZTogZGVzY3JpcHRvci5jb25maWd1cmFibGUsXG4gICAgd3JpdGFibGU6IGRlc2NyaXB0b3Iud3JpdGFibGUsXG4gICAgdmFsdWU6IGRlc2NyaXB0b3IuaW5pdGlhbGl6ZXIgPyBkZXNjcmlwdG9yLmluaXRpYWxpemVyLmNhbGwoY29udGV4dCkgOiB2b2lkIDBcbiAgfSk7XG59XG5mdW5jdGlvbiBfYXBwbHlEZWNvcmF0ZWREZXNjcmlwdG9yKHRhcmdldCwgcHJvcGVydHksIGRlY29yYXRvcnMsIGRlc2NyaXB0b3IsIGNvbnRleHQpIHtcbiAgdmFyIGRlc2MgPSB7fTtcbiAgT2JqZWN0LmtleXMoZGVzY3JpcHRvcikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgZGVzY1trZXldID0gZGVzY3JpcHRvcltrZXldO1xuICB9KTtcbiAgZGVzYy5lbnVtZXJhYmxlID0gISFkZXNjLmVudW1lcmFibGU7XG4gIGRlc2MuY29uZmlndXJhYmxlID0gISFkZXNjLmNvbmZpZ3VyYWJsZTtcbiAgaWYgKCd2YWx1ZScgaW4gZGVzYyB8fCBkZXNjLmluaXRpYWxpemVyKSB7XG4gICAgZGVzYy53cml0YWJsZSA9IHRydWU7XG4gIH1cbiAgZGVzYyA9IGRlY29yYXRvcnMuc2xpY2UoKS5yZXZlcnNlKCkucmVkdWNlKGZ1bmN0aW9uIChkZXNjLCBkZWNvcmF0b3IpIHtcbiAgICByZXR1cm4gZGVjb3JhdG9yKHRhcmdldCwgcHJvcGVydHksIGRlc2MpIHx8IGRlc2M7XG4gIH0sIGRlc2MpO1xuICBpZiAoY29udGV4dCAmJiBkZXNjLmluaXRpYWxpemVyICE9PSB2b2lkIDApIHtcbiAgICBkZXNjLnZhbHVlID0gZGVzYy5pbml0aWFsaXplciA/IGRlc2MuaW5pdGlhbGl6ZXIuY2FsbChjb250ZXh0KSA6IHZvaWQgMDtcbiAgICBkZXNjLmluaXRpYWxpemVyID0gdW5kZWZpbmVkO1xuICB9XG4gIGlmIChkZXNjLmluaXRpYWxpemVyID09PSB2b2lkIDApIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eSwgZGVzYyk7XG4gICAgZGVzYyA9IG51bGw7XG4gIH1cbiAgcmV0dXJuIGRlc2M7XG59XG52YXIgaWQgPSAwO1xuZnVuY3Rpb24gX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkobmFtZSkge1xuICByZXR1cm4gXCJfX3ByaXZhdGVfXCIgKyBpZCsrICsgXCJfXCIgKyBuYW1lO1xufVxuZnVuY3Rpb24gX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlKHJlY2VpdmVyLCBwcml2YXRlS2V5KSB7XG4gIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHJlY2VpdmVyLCBwcml2YXRlS2V5KSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gdXNlIHByaXZhdGUgZmllbGQgb24gbm9uLWluc3RhbmNlXCIpO1xuICB9XG4gIHJldHVybiByZWNlaXZlcjtcbn1cbmZ1bmN0aW9uIF9jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgcHJpdmF0ZU1hcCkge1xuICB2YXIgZGVzY3JpcHRvciA9IF9jbGFzc0V4dHJhY3RGaWVsZERlc2NyaXB0b3IocmVjZWl2ZXIsIHByaXZhdGVNYXAsIFwiZ2V0XCIpO1xuICByZXR1cm4gX2NsYXNzQXBwbHlEZXNjcmlwdG9yR2V0KHJlY2VpdmVyLCBkZXNjcmlwdG9yKTtcbn1cbmZ1bmN0aW9uIF9jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgcHJpdmF0ZU1hcCwgdmFsdWUpIHtcbiAgdmFyIGRlc2NyaXB0b3IgPSBfY2xhc3NFeHRyYWN0RmllbGREZXNjcmlwdG9yKHJlY2VpdmVyLCBwcml2YXRlTWFwLCBcInNldFwiKTtcbiAgX2NsYXNzQXBwbHlEZXNjcmlwdG9yU2V0KHJlY2VpdmVyLCBkZXNjcmlwdG9yLCB2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIF9jbGFzc1ByaXZhdGVGaWVsZERlc3RydWN0dXJlU2V0KHJlY2VpdmVyLCBwcml2YXRlTWFwKSB7XG4gIHZhciBkZXNjcmlwdG9yID0gX2NsYXNzRXh0cmFjdEZpZWxkRGVzY3JpcHRvcihyZWNlaXZlciwgcHJpdmF0ZU1hcCwgXCJzZXRcIik7XG4gIHJldHVybiBfY2xhc3NBcHBseURlc2NyaXB0b3JEZXN0cnVjdHVyZVNldChyZWNlaXZlciwgZGVzY3JpcHRvcik7XG59XG5mdW5jdGlvbiBfY2xhc3NFeHRyYWN0RmllbGREZXNjcmlwdG9yKHJlY2VpdmVyLCBwcml2YXRlTWFwLCBhY3Rpb24pIHtcbiAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIFwiICsgYWN0aW9uICsgXCIgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7XG4gIH1cbiAgcmV0dXJuIHByaXZhdGVNYXAuZ2V0KHJlY2VpdmVyKTtcbn1cbmZ1bmN0aW9uIF9jbGFzc1N0YXRpY1ByaXZhdGVGaWVsZFNwZWNHZXQocmVjZWl2ZXIsIGNsYXNzQ29uc3RydWN0b3IsIGRlc2NyaXB0b3IpIHtcbiAgX2NsYXNzQ2hlY2tQcml2YXRlU3RhdGljQWNjZXNzKHJlY2VpdmVyLCBjbGFzc0NvbnN0cnVjdG9yKTtcbiAgX2NsYXNzQ2hlY2tQcml2YXRlU3RhdGljRmllbGREZXNjcmlwdG9yKGRlc2NyaXB0b3IsIFwiZ2V0XCIpO1xuICByZXR1cm4gX2NsYXNzQXBwbHlEZXNjcmlwdG9yR2V0KHJlY2VpdmVyLCBkZXNjcmlwdG9yKTtcbn1cbmZ1bmN0aW9uIF9jbGFzc1N0YXRpY1ByaXZhdGVGaWVsZFNwZWNTZXQocmVjZWl2ZXIsIGNsYXNzQ29uc3RydWN0b3IsIGRlc2NyaXB0b3IsIHZhbHVlKSB7XG4gIF9jbGFzc0NoZWNrUHJpdmF0ZVN0YXRpY0FjY2VzcyhyZWNlaXZlciwgY2xhc3NDb25zdHJ1Y3Rvcik7XG4gIF9jbGFzc0NoZWNrUHJpdmF0ZVN0YXRpY0ZpZWxkRGVzY3JpcHRvcihkZXNjcmlwdG9yLCBcInNldFwiKTtcbiAgX2NsYXNzQXBwbHlEZXNjcmlwdG9yU2V0KHJlY2VpdmVyLCBkZXNjcmlwdG9yLCB2YWx1ZSk7XG4gIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIF9jbGFzc1N0YXRpY1ByaXZhdGVNZXRob2RHZXQocmVjZWl2ZXIsIGNsYXNzQ29uc3RydWN0b3IsIG1ldGhvZCkge1xuICBfY2xhc3NDaGVja1ByaXZhdGVTdGF0aWNBY2Nlc3MocmVjZWl2ZXIsIGNsYXNzQ29uc3RydWN0b3IpO1xuICByZXR1cm4gbWV0aG9kO1xufVxuZnVuY3Rpb24gX2NsYXNzU3RhdGljUHJpdmF0ZU1ldGhvZFNldCgpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBzZXQgcmVhZCBvbmx5IHN0YXRpYyBwcml2YXRlIGZpZWxkXCIpO1xufVxuZnVuY3Rpb24gX2NsYXNzQXBwbHlEZXNjcmlwdG9yR2V0KHJlY2VpdmVyLCBkZXNjcmlwdG9yKSB7XG4gIGlmIChkZXNjcmlwdG9yLmdldCkge1xuICAgIHJldHVybiBkZXNjcmlwdG9yLmdldC5jYWxsKHJlY2VpdmVyKTtcbiAgfVxuICByZXR1cm4gZGVzY3JpcHRvci52YWx1ZTtcbn1cbmZ1bmN0aW9uIF9jbGFzc0FwcGx5RGVzY3JpcHRvclNldChyZWNlaXZlciwgZGVzY3JpcHRvciwgdmFsdWUpIHtcbiAgaWYgKGRlc2NyaXB0b3Iuc2V0KSB7XG4gICAgZGVzY3JpcHRvci5zZXQuY2FsbChyZWNlaXZlciwgdmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIGlmICghZGVzY3JpcHRvci53cml0YWJsZSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBzZXQgcmVhZCBvbmx5IHByaXZhdGUgZmllbGRcIik7XG4gICAgfVxuICAgIGRlc2NyaXB0b3IudmFsdWUgPSB2YWx1ZTtcbiAgfVxufVxuZnVuY3Rpb24gX2NsYXNzQXBwbHlEZXNjcmlwdG9yRGVzdHJ1Y3R1cmVTZXQocmVjZWl2ZXIsIGRlc2NyaXB0b3IpIHtcbiAgaWYgKGRlc2NyaXB0b3Iuc2V0KSB7XG4gICAgaWYgKCEoXCJfX2Rlc3RyT2JqXCIgaW4gZGVzY3JpcHRvcikpIHtcbiAgICAgIGRlc2NyaXB0b3IuX19kZXN0ck9iaiA9IHtcbiAgICAgICAgc2V0IHZhbHVlKHYpIHtcbiAgICAgICAgICBkZXNjcmlwdG9yLnNldC5jYWxsKHJlY2VpdmVyLCB2KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGRlc2NyaXB0b3IuX19kZXN0ck9iajtcbiAgfSBlbHNlIHtcbiAgICBpZiAoIWRlc2NyaXB0b3Iud3JpdGFibGUpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJhdHRlbXB0ZWQgdG8gc2V0IHJlYWQgb25seSBwcml2YXRlIGZpZWxkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gZGVzY3JpcHRvcjtcbiAgfVxufVxuZnVuY3Rpb24gX2NsYXNzU3RhdGljUHJpdmF0ZUZpZWxkRGVzdHJ1Y3R1cmVTZXQocmVjZWl2ZXIsIGNsYXNzQ29uc3RydWN0b3IsIGRlc2NyaXB0b3IpIHtcbiAgX2NsYXNzQ2hlY2tQcml2YXRlU3RhdGljQWNjZXNzKHJlY2VpdmVyLCBjbGFzc0NvbnN0cnVjdG9yKTtcbiAgX2NsYXNzQ2hlY2tQcml2YXRlU3RhdGljRmllbGREZXNjcmlwdG9yKGRlc2NyaXB0b3IsIFwic2V0XCIpO1xuICByZXR1cm4gX2NsYXNzQXBwbHlEZXNjcmlwdG9yRGVzdHJ1Y3R1cmVTZXQocmVjZWl2ZXIsIGRlc2NyaXB0b3IpO1xufVxuZnVuY3Rpb24gX2NsYXNzQ2hlY2tQcml2YXRlU3RhdGljQWNjZXNzKHJlY2VpdmVyLCBjbGFzc0NvbnN0cnVjdG9yKSB7XG4gIGlmIChyZWNlaXZlciAhPT0gY2xhc3NDb25zdHJ1Y3Rvcikge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIHN0YXRpYyBhY2Nlc3Mgb2Ygd3JvbmcgcHJvdmVuYW5jZVwiKTtcbiAgfVxufVxuZnVuY3Rpb24gX2NsYXNzQ2hlY2tQcml2YXRlU3RhdGljRmllbGREZXNjcmlwdG9yKGRlc2NyaXB0b3IsIGFjdGlvbikge1xuICBpZiAoZGVzY3JpcHRvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBcIiArIGFjdGlvbiArIFwiIHByaXZhdGUgc3RhdGljIGZpZWxkIGJlZm9yZSBpdHMgZGVjbGFyYXRpb25cIik7XG4gIH1cbn1cbmZ1bmN0aW9uIF9kZWNvcmF0ZShkZWNvcmF0b3JzLCBmYWN0b3J5LCBzdXBlckNsYXNzLCBtaXhpbnMpIHtcbiAgdmFyIGFwaSA9IF9nZXREZWNvcmF0b3JzQXBpKCk7XG4gIGlmIChtaXhpbnMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1peGlucy5sZW5ndGg7IGkrKykge1xuICAgICAgYXBpID0gbWl4aW5zW2ldKGFwaSk7XG4gICAgfVxuICB9XG4gIHZhciByID0gZmFjdG9yeShmdW5jdGlvbiBpbml0aWFsaXplKE8pIHtcbiAgICBhcGkuaW5pdGlhbGl6ZUluc3RhbmNlRWxlbWVudHMoTywgZGVjb3JhdGVkLmVsZW1lbnRzKTtcbiAgfSwgc3VwZXJDbGFzcyk7XG4gIHZhciBkZWNvcmF0ZWQgPSBhcGkuZGVjb3JhdGVDbGFzcyhfY29hbGVzY2VDbGFzc0VsZW1lbnRzKHIuZC5tYXAoX2NyZWF0ZUVsZW1lbnREZXNjcmlwdG9yKSksIGRlY29yYXRvcnMpO1xuICBhcGkuaW5pdGlhbGl6ZUNsYXNzRWxlbWVudHMoci5GLCBkZWNvcmF0ZWQuZWxlbWVudHMpO1xuICByZXR1cm4gYXBpLnJ1bkNsYXNzRmluaXNoZXJzKHIuRiwgZGVjb3JhdGVkLmZpbmlzaGVycyk7XG59XG5mdW5jdGlvbiBfZ2V0RGVjb3JhdG9yc0FwaSgpIHtcbiAgX2dldERlY29yYXRvcnNBcGkgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGFwaTtcbiAgfTtcbiAgdmFyIGFwaSA9IHtcbiAgICBlbGVtZW50c0RlZmluaXRpb25PcmRlcjogW1tcIm1ldGhvZFwiXSwgW1wiZmllbGRcIl1dLFxuICAgIGluaXRpYWxpemVJbnN0YW5jZUVsZW1lbnRzOiBmdW5jdGlvbiAoTywgZWxlbWVudHMpIHtcbiAgICAgIFtcIm1ldGhvZFwiLCBcImZpZWxkXCJdLmZvckVhY2goZnVuY3Rpb24gKGtpbmQpIHtcbiAgICAgICAgZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgIGlmIChlbGVtZW50LmtpbmQgPT09IGtpbmQgJiYgZWxlbWVudC5wbGFjZW1lbnQgPT09IFwib3duXCIpIHtcbiAgICAgICAgICAgIHRoaXMuZGVmaW5lQ2xhc3NFbGVtZW50KE8sIGVsZW1lbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgdGhpcyk7XG4gICAgICB9LCB0aGlzKTtcbiAgICB9LFxuICAgIGluaXRpYWxpemVDbGFzc0VsZW1lbnRzOiBmdW5jdGlvbiAoRiwgZWxlbWVudHMpIHtcbiAgICAgIHZhciBwcm90byA9IEYucHJvdG90eXBlO1xuICAgICAgW1wibWV0aG9kXCIsIFwiZmllbGRcIl0uZm9yRWFjaChmdW5jdGlvbiAoa2luZCkge1xuICAgICAgICBlbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgdmFyIHBsYWNlbWVudCA9IGVsZW1lbnQucGxhY2VtZW50O1xuICAgICAgICAgIGlmIChlbGVtZW50LmtpbmQgPT09IGtpbmQgJiYgKHBsYWNlbWVudCA9PT0gXCJzdGF0aWNcIiB8fCBwbGFjZW1lbnQgPT09IFwicHJvdG90eXBlXCIpKSB7XG4gICAgICAgICAgICB2YXIgcmVjZWl2ZXIgPSBwbGFjZW1lbnQgPT09IFwic3RhdGljXCIgPyBGIDogcHJvdG87XG4gICAgICAgICAgICB0aGlzLmRlZmluZUNsYXNzRWxlbWVudChyZWNlaXZlciwgZWxlbWVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzKTtcbiAgICAgIH0sIHRoaXMpO1xuICAgIH0sXG4gICAgZGVmaW5lQ2xhc3NFbGVtZW50OiBmdW5jdGlvbiAocmVjZWl2ZXIsIGVsZW1lbnQpIHtcbiAgICAgIHZhciBkZXNjcmlwdG9yID0gZWxlbWVudC5kZXNjcmlwdG9yO1xuICAgICAgaWYgKGVsZW1lbnQua2luZCA9PT0gXCJmaWVsZFwiKSB7XG4gICAgICAgIHZhciBpbml0aWFsaXplciA9IGVsZW1lbnQuaW5pdGlhbGl6ZXI7XG4gICAgICAgIGRlc2NyaXB0b3IgPSB7XG4gICAgICAgICAgZW51bWVyYWJsZTogZGVzY3JpcHRvci5lbnVtZXJhYmxlLFxuICAgICAgICAgIHdyaXRhYmxlOiBkZXNjcmlwdG9yLndyaXRhYmxlLFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZGVzY3JpcHRvci5jb25maWd1cmFibGUsXG4gICAgICAgICAgdmFsdWU6IGluaXRpYWxpemVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpbml0aWFsaXplci5jYWxsKHJlY2VpdmVyKVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlY2VpdmVyLCBlbGVtZW50LmtleSwgZGVzY3JpcHRvcik7XG4gICAgfSxcbiAgICBkZWNvcmF0ZUNsYXNzOiBmdW5jdGlvbiAoZWxlbWVudHMsIGRlY29yYXRvcnMpIHtcbiAgICAgIHZhciBuZXdFbGVtZW50cyA9IFtdO1xuICAgICAgdmFyIGZpbmlzaGVycyA9IFtdO1xuICAgICAgdmFyIHBsYWNlbWVudHMgPSB7XG4gICAgICAgIHN0YXRpYzogW10sXG4gICAgICAgIHByb3RvdHlwZTogW10sXG4gICAgICAgIG93bjogW11cbiAgICAgIH07XG4gICAgICBlbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuYWRkRWxlbWVudFBsYWNlbWVudChlbGVtZW50LCBwbGFjZW1lbnRzKTtcbiAgICAgIH0sIHRoaXMpO1xuICAgICAgZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICBpZiAoIV9oYXNEZWNvcmF0b3JzKGVsZW1lbnQpKSByZXR1cm4gbmV3RWxlbWVudHMucHVzaChlbGVtZW50KTtcbiAgICAgICAgdmFyIGVsZW1lbnRGaW5pc2hlcnNFeHRyYXMgPSB0aGlzLmRlY29yYXRlRWxlbWVudChlbGVtZW50LCBwbGFjZW1lbnRzKTtcbiAgICAgICAgbmV3RWxlbWVudHMucHVzaChlbGVtZW50RmluaXNoZXJzRXh0cmFzLmVsZW1lbnQpO1xuICAgICAgICBuZXdFbGVtZW50cy5wdXNoLmFwcGx5KG5ld0VsZW1lbnRzLCBlbGVtZW50RmluaXNoZXJzRXh0cmFzLmV4dHJhcyk7XG4gICAgICAgIGZpbmlzaGVycy5wdXNoLmFwcGx5KGZpbmlzaGVycywgZWxlbWVudEZpbmlzaGVyc0V4dHJhcy5maW5pc2hlcnMpO1xuICAgICAgfSwgdGhpcyk7XG4gICAgICBpZiAoIWRlY29yYXRvcnMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBlbGVtZW50czogbmV3RWxlbWVudHMsXG4gICAgICAgICAgZmluaXNoZXJzOiBmaW5pc2hlcnNcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29yYXRlQ29uc3RydWN0b3IobmV3RWxlbWVudHMsIGRlY29yYXRvcnMpO1xuICAgICAgZmluaXNoZXJzLnB1c2guYXBwbHkoZmluaXNoZXJzLCByZXN1bHQuZmluaXNoZXJzKTtcbiAgICAgIHJlc3VsdC5maW5pc2hlcnMgPSBmaW5pc2hlcnM7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG4gICAgYWRkRWxlbWVudFBsYWNlbWVudDogZnVuY3Rpb24gKGVsZW1lbnQsIHBsYWNlbWVudHMsIHNpbGVudCkge1xuICAgICAgdmFyIGtleXMgPSBwbGFjZW1lbnRzW2VsZW1lbnQucGxhY2VtZW50XTtcbiAgICAgIGlmICghc2lsZW50ICYmIGtleXMuaW5kZXhPZihlbGVtZW50LmtleSkgIT09IC0xKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJEdXBsaWNhdGVkIGVsZW1lbnQgKFwiICsgZWxlbWVudC5rZXkgKyBcIilcIik7XG4gICAgICB9XG4gICAgICBrZXlzLnB1c2goZWxlbWVudC5rZXkpO1xuICAgIH0sXG4gICAgZGVjb3JhdGVFbGVtZW50OiBmdW5jdGlvbiAoZWxlbWVudCwgcGxhY2VtZW50cykge1xuICAgICAgdmFyIGV4dHJhcyA9IFtdO1xuICAgICAgdmFyIGZpbmlzaGVycyA9IFtdO1xuICAgICAgZm9yICh2YXIgZGVjb3JhdG9ycyA9IGVsZW1lbnQuZGVjb3JhdG9ycywgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgdmFyIGtleXMgPSBwbGFjZW1lbnRzW2VsZW1lbnQucGxhY2VtZW50XTtcbiAgICAgICAga2V5cy5zcGxpY2Uoa2V5cy5pbmRleE9mKGVsZW1lbnQua2V5KSwgMSk7XG4gICAgICAgIHZhciBlbGVtZW50T2JqZWN0ID0gdGhpcy5mcm9tRWxlbWVudERlc2NyaXB0b3IoZWxlbWVudCk7XG4gICAgICAgIHZhciBlbGVtZW50RmluaXNoZXJFeHRyYXMgPSB0aGlzLnRvRWxlbWVudEZpbmlzaGVyRXh0cmFzKCgwLCBkZWNvcmF0b3JzW2ldKShlbGVtZW50T2JqZWN0KSB8fCBlbGVtZW50T2JqZWN0KTtcbiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnRGaW5pc2hlckV4dHJhcy5lbGVtZW50O1xuICAgICAgICB0aGlzLmFkZEVsZW1lbnRQbGFjZW1lbnQoZWxlbWVudCwgcGxhY2VtZW50cyk7XG4gICAgICAgIGlmIChlbGVtZW50RmluaXNoZXJFeHRyYXMuZmluaXNoZXIpIHtcbiAgICAgICAgICBmaW5pc2hlcnMucHVzaChlbGVtZW50RmluaXNoZXJFeHRyYXMuZmluaXNoZXIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuZXdFeHRyYXMgPSBlbGVtZW50RmluaXNoZXJFeHRyYXMuZXh0cmFzO1xuICAgICAgICBpZiAobmV3RXh0cmFzKSB7XG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBuZXdFeHRyYXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIHRoaXMuYWRkRWxlbWVudFBsYWNlbWVudChuZXdFeHRyYXNbal0sIHBsYWNlbWVudHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBleHRyYXMucHVzaC5hcHBseShleHRyYXMsIG5ld0V4dHJhcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsXG4gICAgICAgIGZpbmlzaGVyczogZmluaXNoZXJzLFxuICAgICAgICBleHRyYXM6IGV4dHJhc1xuICAgICAgfTtcbiAgICB9LFxuICAgIGRlY29yYXRlQ29uc3RydWN0b3I6IGZ1bmN0aW9uIChlbGVtZW50cywgZGVjb3JhdG9ycykge1xuICAgICAgdmFyIGZpbmlzaGVycyA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgdmFyIG9iaiA9IHRoaXMuZnJvbUNsYXNzRGVzY3JpcHRvcihlbGVtZW50cyk7XG4gICAgICAgIHZhciBlbGVtZW50c0FuZEZpbmlzaGVyID0gdGhpcy50b0NsYXNzRGVzY3JpcHRvcigoMCwgZGVjb3JhdG9yc1tpXSkob2JqKSB8fCBvYmopO1xuICAgICAgICBpZiAoZWxlbWVudHNBbmRGaW5pc2hlci5maW5pc2hlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgZmluaXNoZXJzLnB1c2goZWxlbWVudHNBbmRGaW5pc2hlci5maW5pc2hlcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVsZW1lbnRzQW5kRmluaXNoZXIuZWxlbWVudHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGVsZW1lbnRzID0gZWxlbWVudHNBbmRGaW5pc2hlci5lbGVtZW50cztcbiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGVsZW1lbnRzLmxlbmd0aCAtIDE7IGorKykge1xuICAgICAgICAgICAgZm9yICh2YXIgayA9IGogKyAxOyBrIDwgZWxlbWVudHMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgICAgaWYgKGVsZW1lbnRzW2pdLmtleSA9PT0gZWxlbWVudHNba10ua2V5ICYmIGVsZW1lbnRzW2pdLnBsYWNlbWVudCA9PT0gZWxlbWVudHNba10ucGxhY2VtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkR1cGxpY2F0ZWQgZWxlbWVudCAoXCIgKyBlbGVtZW50c1tqXS5rZXkgKyBcIilcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVsZW1lbnRzOiBlbGVtZW50cyxcbiAgICAgICAgZmluaXNoZXJzOiBmaW5pc2hlcnNcbiAgICAgIH07XG4gICAgfSxcbiAgICBmcm9tRWxlbWVudERlc2NyaXB0b3I6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICB2YXIgb2JqID0ge1xuICAgICAgICBraW5kOiBlbGVtZW50LmtpbmQsXG4gICAgICAgIGtleTogZWxlbWVudC5rZXksXG4gICAgICAgIHBsYWNlbWVudDogZWxlbWVudC5wbGFjZW1lbnQsXG4gICAgICAgIGRlc2NyaXB0b3I6IGVsZW1lbnQuZGVzY3JpcHRvclxuICAgICAgfTtcbiAgICAgIHZhciBkZXNjID0ge1xuICAgICAgICB2YWx1ZTogXCJEZXNjcmlwdG9yXCIsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIFN5bWJvbC50b1N0cmluZ1RhZywgZGVzYyk7XG4gICAgICBpZiAoZWxlbWVudC5raW5kID09PSBcImZpZWxkXCIpIG9iai5pbml0aWFsaXplciA9IGVsZW1lbnQuaW5pdGlhbGl6ZXI7XG4gICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG4gICAgdG9FbGVtZW50RGVzY3JpcHRvcnM6IGZ1bmN0aW9uIChlbGVtZW50T2JqZWN0cykge1xuICAgICAgaWYgKGVsZW1lbnRPYmplY3RzID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICAgIHJldHVybiBfdG9BcnJheShlbGVtZW50T2JqZWN0cykubWFwKGZ1bmN0aW9uIChlbGVtZW50T2JqZWN0KSB7XG4gICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy50b0VsZW1lbnREZXNjcmlwdG9yKGVsZW1lbnRPYmplY3QpO1xuICAgICAgICB0aGlzLmRpc2FsbG93UHJvcGVydHkoZWxlbWVudE9iamVjdCwgXCJmaW5pc2hlclwiLCBcIkFuIGVsZW1lbnQgZGVzY3JpcHRvclwiKTtcbiAgICAgICAgdGhpcy5kaXNhbGxvd1Byb3BlcnR5KGVsZW1lbnRPYmplY3QsIFwiZXh0cmFzXCIsIFwiQW4gZWxlbWVudCBkZXNjcmlwdG9yXCIpO1xuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgIH0sIHRoaXMpO1xuICAgIH0sXG4gICAgdG9FbGVtZW50RGVzY3JpcHRvcjogZnVuY3Rpb24gKGVsZW1lbnRPYmplY3QpIHtcbiAgICAgIHZhciBraW5kID0gU3RyaW5nKGVsZW1lbnRPYmplY3Qua2luZCk7XG4gICAgICBpZiAoa2luZCAhPT0gXCJtZXRob2RcIiAmJiBraW5kICE9PSBcImZpZWxkXCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQW4gZWxlbWVudCBkZXNjcmlwdG9yXFwncyAua2luZCBwcm9wZXJ0eSBtdXN0IGJlIGVpdGhlciBcIm1ldGhvZFwiIG9yJyArICcgXCJmaWVsZFwiLCBidXQgYSBkZWNvcmF0b3IgY3JlYXRlZCBhbiBlbGVtZW50IGRlc2NyaXB0b3Igd2l0aCcgKyAnIC5raW5kIFwiJyArIGtpbmQgKyAnXCInKTtcbiAgICAgIH1cbiAgICAgIHZhciBrZXkgPSBfdG9Qcm9wZXJ0eUtleShlbGVtZW50T2JqZWN0LmtleSk7XG4gICAgICB2YXIgcGxhY2VtZW50ID0gU3RyaW5nKGVsZW1lbnRPYmplY3QucGxhY2VtZW50KTtcbiAgICAgIGlmIChwbGFjZW1lbnQgIT09IFwic3RhdGljXCIgJiYgcGxhY2VtZW50ICE9PSBcInByb3RvdHlwZVwiICYmIHBsYWNlbWVudCAhPT0gXCJvd25cIikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBbiBlbGVtZW50IGRlc2NyaXB0b3JcXCdzIC5wbGFjZW1lbnQgcHJvcGVydHkgbXVzdCBiZSBvbmUgb2YgXCJzdGF0aWNcIiwnICsgJyBcInByb3RvdHlwZVwiIG9yIFwib3duXCIsIGJ1dCBhIGRlY29yYXRvciBjcmVhdGVkIGFuIGVsZW1lbnQgZGVzY3JpcHRvcicgKyAnIHdpdGggLnBsYWNlbWVudCBcIicgKyBwbGFjZW1lbnQgKyAnXCInKTtcbiAgICAgIH1cbiAgICAgIHZhciBkZXNjcmlwdG9yID0gZWxlbWVudE9iamVjdC5kZXNjcmlwdG9yO1xuICAgICAgdGhpcy5kaXNhbGxvd1Byb3BlcnR5KGVsZW1lbnRPYmplY3QsIFwiZWxlbWVudHNcIiwgXCJBbiBlbGVtZW50IGRlc2NyaXB0b3JcIik7XG4gICAgICB2YXIgZWxlbWVudCA9IHtcbiAgICAgICAga2luZDoga2luZCxcbiAgICAgICAga2V5OiBrZXksXG4gICAgICAgIHBsYWNlbWVudDogcGxhY2VtZW50LFxuICAgICAgICBkZXNjcmlwdG9yOiBPYmplY3QuYXNzaWduKHt9LCBkZXNjcmlwdG9yKVxuICAgICAgfTtcbiAgICAgIGlmIChraW5kICE9PSBcImZpZWxkXCIpIHtcbiAgICAgICAgdGhpcy5kaXNhbGxvd1Byb3BlcnR5KGVsZW1lbnRPYmplY3QsIFwiaW5pdGlhbGl6ZXJcIiwgXCJBIG1ldGhvZCBkZXNjcmlwdG9yXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kaXNhbGxvd1Byb3BlcnR5KGRlc2NyaXB0b3IsIFwiZ2V0XCIsIFwiVGhlIHByb3BlcnR5IGRlc2NyaXB0b3Igb2YgYSBmaWVsZCBkZXNjcmlwdG9yXCIpO1xuICAgICAgICB0aGlzLmRpc2FsbG93UHJvcGVydHkoZGVzY3JpcHRvciwgXCJzZXRcIiwgXCJUaGUgcHJvcGVydHkgZGVzY3JpcHRvciBvZiBhIGZpZWxkIGRlc2NyaXB0b3JcIik7XG4gICAgICAgIHRoaXMuZGlzYWxsb3dQcm9wZXJ0eShkZXNjcmlwdG9yLCBcInZhbHVlXCIsIFwiVGhlIHByb3BlcnR5IGRlc2NyaXB0b3Igb2YgYSBmaWVsZCBkZXNjcmlwdG9yXCIpO1xuICAgICAgICBlbGVtZW50LmluaXRpYWxpemVyID0gZWxlbWVudE9iamVjdC5pbml0aWFsaXplcjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH0sXG4gICAgdG9FbGVtZW50RmluaXNoZXJFeHRyYXM6IGZ1bmN0aW9uIChlbGVtZW50T2JqZWN0KSB7XG4gICAgICB2YXIgZWxlbWVudCA9IHRoaXMudG9FbGVtZW50RGVzY3JpcHRvcihlbGVtZW50T2JqZWN0KTtcbiAgICAgIHZhciBmaW5pc2hlciA9IF9vcHRpb25hbENhbGxhYmxlUHJvcGVydHkoZWxlbWVudE9iamVjdCwgXCJmaW5pc2hlclwiKTtcbiAgICAgIHZhciBleHRyYXMgPSB0aGlzLnRvRWxlbWVudERlc2NyaXB0b3JzKGVsZW1lbnRPYmplY3QuZXh0cmFzKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsXG4gICAgICAgIGZpbmlzaGVyOiBmaW5pc2hlcixcbiAgICAgICAgZXh0cmFzOiBleHRyYXNcbiAgICAgIH07XG4gICAgfSxcbiAgICBmcm9tQ2xhc3NEZXNjcmlwdG9yOiBmdW5jdGlvbiAoZWxlbWVudHMpIHtcbiAgICAgIHZhciBvYmogPSB7XG4gICAgICAgIGtpbmQ6IFwiY2xhc3NcIixcbiAgICAgICAgZWxlbWVudHM6IGVsZW1lbnRzLm1hcCh0aGlzLmZyb21FbGVtZW50RGVzY3JpcHRvciwgdGhpcylcbiAgICAgIH07XG4gICAgICB2YXIgZGVzYyA9IHtcbiAgICAgICAgdmFsdWU6IFwiRGVzY3JpcHRvclwiLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH07XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBTeW1ib2wudG9TdHJpbmdUYWcsIGRlc2MpO1xuICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuICAgIHRvQ2xhc3NEZXNjcmlwdG9yOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICB2YXIga2luZCA9IFN0cmluZyhvYmoua2luZCk7XG4gICAgICBpZiAoa2luZCAhPT0gXCJjbGFzc1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0EgY2xhc3MgZGVzY3JpcHRvclxcJ3MgLmtpbmQgcHJvcGVydHkgbXVzdCBiZSBcImNsYXNzXCIsIGJ1dCBhIGRlY29yYXRvcicgKyAnIGNyZWF0ZWQgYSBjbGFzcyBkZXNjcmlwdG9yIHdpdGggLmtpbmQgXCInICsga2luZCArICdcIicpO1xuICAgICAgfVxuICAgICAgdGhpcy5kaXNhbGxvd1Byb3BlcnR5KG9iaiwgXCJrZXlcIiwgXCJBIGNsYXNzIGRlc2NyaXB0b3JcIik7XG4gICAgICB0aGlzLmRpc2FsbG93UHJvcGVydHkob2JqLCBcInBsYWNlbWVudFwiLCBcIkEgY2xhc3MgZGVzY3JpcHRvclwiKTtcbiAgICAgIHRoaXMuZGlzYWxsb3dQcm9wZXJ0eShvYmosIFwiZGVzY3JpcHRvclwiLCBcIkEgY2xhc3MgZGVzY3JpcHRvclwiKTtcbiAgICAgIHRoaXMuZGlzYWxsb3dQcm9wZXJ0eShvYmosIFwiaW5pdGlhbGl6ZXJcIiwgXCJBIGNsYXNzIGRlc2NyaXB0b3JcIik7XG4gICAgICB0aGlzLmRpc2FsbG93UHJvcGVydHkob2JqLCBcImV4dHJhc1wiLCBcIkEgY2xhc3MgZGVzY3JpcHRvclwiKTtcbiAgICAgIHZhciBmaW5pc2hlciA9IF9vcHRpb25hbENhbGxhYmxlUHJvcGVydHkob2JqLCBcImZpbmlzaGVyXCIpO1xuICAgICAgdmFyIGVsZW1lbnRzID0gdGhpcy50b0VsZW1lbnREZXNjcmlwdG9ycyhvYmouZWxlbWVudHMpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZWxlbWVudHM6IGVsZW1lbnRzLFxuICAgICAgICBmaW5pc2hlcjogZmluaXNoZXJcbiAgICAgIH07XG4gICAgfSxcbiAgICBydW5DbGFzc0ZpbmlzaGVyczogZnVuY3Rpb24gKGNvbnN0cnVjdG9yLCBmaW5pc2hlcnMpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmluaXNoZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBuZXdDb25zdHJ1Y3RvciA9ICgwLCBmaW5pc2hlcnNbaV0pKGNvbnN0cnVjdG9yKTtcbiAgICAgICAgaWYgKG5ld0NvbnN0cnVjdG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIG5ld0NvbnN0cnVjdG9yICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGaW5pc2hlcnMgbXVzdCByZXR1cm4gYSBjb25zdHJ1Y3Rvci5cIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0cnVjdG9yID0gbmV3Q29uc3RydWN0b3I7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBjb25zdHJ1Y3RvcjtcbiAgICB9LFxuICAgIGRpc2FsbG93UHJvcGVydHk6IGZ1bmN0aW9uIChvYmosIG5hbWUsIG9iamVjdFR5cGUpIHtcbiAgICAgIGlmIChvYmpbbmFtZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKG9iamVjdFR5cGUgKyBcIiBjYW4ndCBoYXZlIGEgLlwiICsgbmFtZSArIFwiIHByb3BlcnR5LlwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIHJldHVybiBhcGk7XG59XG5mdW5jdGlvbiBfY3JlYXRlRWxlbWVudERlc2NyaXB0b3IoZGVmKSB7XG4gIHZhciBrZXkgPSBfdG9Qcm9wZXJ0eUtleShkZWYua2V5KTtcbiAgdmFyIGRlc2NyaXB0b3I7XG4gIGlmIChkZWYua2luZCA9PT0gXCJtZXRob2RcIikge1xuICAgIGRlc2NyaXB0b3IgPSB7XG4gICAgICB2YWx1ZTogZGVmLnZhbHVlLFxuICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZVxuICAgIH07XG4gIH0gZWxzZSBpZiAoZGVmLmtpbmQgPT09IFwiZ2V0XCIpIHtcbiAgICBkZXNjcmlwdG9yID0ge1xuICAgICAgZ2V0OiBkZWYudmFsdWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZVxuICAgIH07XG4gIH0gZWxzZSBpZiAoZGVmLmtpbmQgPT09IFwic2V0XCIpIHtcbiAgICBkZXNjcmlwdG9yID0ge1xuICAgICAgc2V0OiBkZWYudmFsdWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZVxuICAgIH07XG4gIH0gZWxzZSBpZiAoZGVmLmtpbmQgPT09IFwiZmllbGRcIikge1xuICAgIGRlc2NyaXB0b3IgPSB7XG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWVcbiAgICB9O1xuICB9XG4gIHZhciBlbGVtZW50ID0ge1xuICAgIGtpbmQ6IGRlZi5raW5kID09PSBcImZpZWxkXCIgPyBcImZpZWxkXCIgOiBcIm1ldGhvZFwiLFxuICAgIGtleToga2V5LFxuICAgIHBsYWNlbWVudDogZGVmLnN0YXRpYyA/IFwic3RhdGljXCIgOiBkZWYua2luZCA9PT0gXCJmaWVsZFwiID8gXCJvd25cIiA6IFwicHJvdG90eXBlXCIsXG4gICAgZGVzY3JpcHRvcjogZGVzY3JpcHRvclxuICB9O1xuICBpZiAoZGVmLmRlY29yYXRvcnMpIGVsZW1lbnQuZGVjb3JhdG9ycyA9IGRlZi5kZWNvcmF0b3JzO1xuICBpZiAoZGVmLmtpbmQgPT09IFwiZmllbGRcIikgZWxlbWVudC5pbml0aWFsaXplciA9IGRlZi52YWx1ZTtcbiAgcmV0dXJuIGVsZW1lbnQ7XG59XG5mdW5jdGlvbiBfY29hbGVzY2VHZXR0ZXJTZXR0ZXIoZWxlbWVudCwgb3RoZXIpIHtcbiAgaWYgKGVsZW1lbnQuZGVzY3JpcHRvci5nZXQgIT09IHVuZGVmaW5lZCkge1xuICAgIG90aGVyLmRlc2NyaXB0b3IuZ2V0ID0gZWxlbWVudC5kZXNjcmlwdG9yLmdldDtcbiAgfSBlbHNlIHtcbiAgICBvdGhlci5kZXNjcmlwdG9yLnNldCA9IGVsZW1lbnQuZGVzY3JpcHRvci5zZXQ7XG4gIH1cbn1cbmZ1bmN0aW9uIF9jb2FsZXNjZUNsYXNzRWxlbWVudHMoZWxlbWVudHMpIHtcbiAgdmFyIG5ld0VsZW1lbnRzID0gW107XG4gIHZhciBpc1NhbWVFbGVtZW50ID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gICAgcmV0dXJuIG90aGVyLmtpbmQgPT09IFwibWV0aG9kXCIgJiYgb3RoZXIua2V5ID09PSBlbGVtZW50LmtleSAmJiBvdGhlci5wbGFjZW1lbnQgPT09IGVsZW1lbnQucGxhY2VtZW50O1xuICB9O1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBlbGVtZW50c1tpXTtcbiAgICB2YXIgb3RoZXI7XG4gICAgaWYgKGVsZW1lbnQua2luZCA9PT0gXCJtZXRob2RcIiAmJiAob3RoZXIgPSBuZXdFbGVtZW50cy5maW5kKGlzU2FtZUVsZW1lbnQpKSkge1xuICAgICAgaWYgKF9pc0RhdGFEZXNjcmlwdG9yKGVsZW1lbnQuZGVzY3JpcHRvcikgfHwgX2lzRGF0YURlc2NyaXB0b3Iob3RoZXIuZGVzY3JpcHRvcikpIHtcbiAgICAgICAgaWYgKF9oYXNEZWNvcmF0b3JzKGVsZW1lbnQpIHx8IF9oYXNEZWNvcmF0b3JzKG90aGVyKSkge1xuICAgICAgICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcIkR1cGxpY2F0ZWQgbWV0aG9kcyAoXCIgKyBlbGVtZW50LmtleSArIFwiKSBjYW4ndCBiZSBkZWNvcmF0ZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIG90aGVyLmRlc2NyaXB0b3IgPSBlbGVtZW50LmRlc2NyaXB0b3I7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoX2hhc0RlY29yYXRvcnMoZWxlbWVudCkpIHtcbiAgICAgICAgICBpZiAoX2hhc0RlY29yYXRvcnMob3RoZXIpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJEZWNvcmF0b3JzIGNhbid0IGJlIHBsYWNlZCBvbiBkaWZmZXJlbnQgYWNjZXNzb3JzIHdpdGggZm9yIFwiICsgXCJ0aGUgc2FtZSBwcm9wZXJ0eSAoXCIgKyBlbGVtZW50LmtleSArIFwiKS5cIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIG90aGVyLmRlY29yYXRvcnMgPSBlbGVtZW50LmRlY29yYXRvcnM7XG4gICAgICAgIH1cbiAgICAgICAgX2NvYWxlc2NlR2V0dGVyU2V0dGVyKGVsZW1lbnQsIG90aGVyKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbmV3RWxlbWVudHMucHVzaChlbGVtZW50KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5ld0VsZW1lbnRzO1xufVxuZnVuY3Rpb24gX2hhc0RlY29yYXRvcnMoZWxlbWVudCkge1xuICByZXR1cm4gZWxlbWVudC5kZWNvcmF0b3JzICYmIGVsZW1lbnQuZGVjb3JhdG9ycy5sZW5ndGg7XG59XG5mdW5jdGlvbiBfaXNEYXRhRGVzY3JpcHRvcihkZXNjKSB7XG4gIHJldHVybiBkZXNjICE9PSB1bmRlZmluZWQgJiYgIShkZXNjLnZhbHVlID09PSB1bmRlZmluZWQgJiYgZGVzYy53cml0YWJsZSA9PT0gdW5kZWZpbmVkKTtcbn1cbmZ1bmN0aW9uIF9vcHRpb25hbENhbGxhYmxlUHJvcGVydHkob2JqLCBuYW1lKSB7XG4gIHZhciB2YWx1ZSA9IG9ialtuYW1lXTtcbiAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRXhwZWN0ZWQgJ1wiICsgbmFtZSArIFwiJyB0byBiZSBhIGZ1bmN0aW9uXCIpO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIF9jbGFzc1ByaXZhdGVNZXRob2RHZXQocmVjZWl2ZXIsIHByaXZhdGVTZXQsIGZuKSB7XG4gIGlmICghcHJpdmF0ZVNldC5oYXMocmVjZWl2ZXIpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7XG4gIH1cbiAgcmV0dXJuIGZuO1xufVxuZnVuY3Rpb24gX2NoZWNrUHJpdmF0ZVJlZGVjbGFyYXRpb24ob2JqLCBwcml2YXRlQ29sbGVjdGlvbikge1xuICBpZiAocHJpdmF0ZUNvbGxlY3Rpb24uaGFzKG9iaikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGluaXRpYWxpemUgdGhlIHNhbWUgcHJpdmF0ZSBlbGVtZW50cyB0d2ljZSBvbiBhbiBvYmplY3RcIik7XG4gIH1cbn1cbmZ1bmN0aW9uIF9jbGFzc1ByaXZhdGVGaWVsZEluaXRTcGVjKG9iaiwgcHJpdmF0ZU1hcCwgdmFsdWUpIHtcbiAgX2NoZWNrUHJpdmF0ZVJlZGVjbGFyYXRpb24ob2JqLCBwcml2YXRlTWFwKTtcbiAgcHJpdmF0ZU1hcC5zZXQob2JqLCB2YWx1ZSk7XG59XG5mdW5jdGlvbiBfY2xhc3NQcml2YXRlTWV0aG9kSW5pdFNwZWMob2JqLCBwcml2YXRlU2V0KSB7XG4gIF9jaGVja1ByaXZhdGVSZWRlY2xhcmF0aW9uKG9iaiwgcHJpdmF0ZVNldCk7XG4gIHByaXZhdGVTZXQuYWRkKG9iaik7XG59XG5mdW5jdGlvbiBfY2xhc3NQcml2YXRlTWV0aG9kU2V0KCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHJlYXNzaWduIHByaXZhdGUgbWV0aG9kXCIpO1xufVxuZnVuY3Rpb24gX2lkZW50aXR5KHgpIHtcbiAgcmV0dXJuIHg7XG59IiwiaW1wb3J0IF9janNMb2FkZXIgZnJvbSAnY2NlOi9pbnRlcm5hbC9tbC9janMtbG9hZGVyLm1qcyc7XG5sZXQgX2Nqc0V4cG9ydHM7XG5sZXQgX19fZXNNb2R1bGU7XG5sZXQgX1N5c3RlbTtcbmNvbnN0IF9fY2pzTWV0YVVSTCA9IGltcG9ydC5tZXRhLnVybDtcbl9janNMb2FkZXIuZGVmaW5lKF9fY2pzTWV0YVVSTCwgZnVuY3Rpb24gKGV4cG9ydHMsIHJlcXVpcmUsIG1vZHVsZSwgX19maWxlbmFtZSwgX19kaXJuYW1lKSB7XG4vLyAjcmVnaW9uIE9SSUdJTkFMIENPREVcblxuXG4gXCJ1c2Ugc3RyaWN0XCI7XHJcbiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbiB2YXIgU3lzdGVtID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICBmdW5jdGlvbiBTeXN0ZW0oKSB7XHJcbiAgICAgICAgIHRoaXMuX3ByaW9yaXR5ID0gMDtcclxuICAgICAgICAgdGhpcy5fZW5naW5lcyA9IFtdO1xyXG4gICAgIH1cclxuICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3lzdGVtLnByb3RvdHlwZSwgXCJwcmlvcml0eVwiLCB7XHJcbiAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ByaW9yaXR5O1xyXG4gICAgICAgICB9LFxyXG4gICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgdGhpcy5fcHJpb3JpdHkgPSB2YWx1ZTtcclxuICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLl9lbmdpbmVzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgIHZhciBlbmdpbmUgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICAgZW5naW5lLm5vdGlmeVByaW9yaXR5Q2hhbmdlKHRoaXMpO1xyXG4gICAgICAgICAgICAgfVxyXG4gICAgICAgICB9LFxyXG4gICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgICB9KTtcclxuICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3lzdGVtLnByb3RvdHlwZSwgXCJlbmdpbmVzXCIsIHtcclxuICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmZyZWV6ZSh0aGlzLl9lbmdpbmVzLnNsaWNlKDApKTtcclxuICAgICAgICAgfSxcclxuICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgfSk7XHJcbiAgICAgU3lzdGVtLnByb3RvdHlwZS5vbkF0dGFjaCA9IGZ1bmN0aW9uIChlbmdpbmUpIHtcclxuICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5fZW5naW5lcy5pbmRleE9mKGVuZ2luZSk7XHJcbiAgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgIHRoaXMuX2VuZ2luZXMucHVzaChlbmdpbmUpO1xyXG4gICAgICAgICB9XHJcbiAgICAgfTtcclxuICAgICBTeXN0ZW0ucHJvdG90eXBlLm9uRGV0YWNoID0gZnVuY3Rpb24gKGVuZ2luZSkge1xyXG4gICAgICAgICB2YXIgaW5kZXggPSB0aGlzLl9lbmdpbmVzLmluZGV4T2YoZW5naW5lKTtcclxuICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgdGhpcy5fZW5naW5lcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICB9XHJcbiAgICAgfTtcclxuICAgICByZXR1cm4gU3lzdGVtO1xyXG4gfSgpKTtcclxuIGV4cG9ydHMuU3lzdGVtID0gU3lzdGVtO1xyXG4gLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3lzdGVtLmpzLm1hcFxuXG4vLyAjZW5kcmVnaW9uIE9SSUdJTkFMIENPREVcblxuX2Nqc0V4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cztcbl9fX2VzTW9kdWxlID0gbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZTtcbl9TeXN0ZW0gPSBtb2R1bGUuZXhwb3J0cy5TeXN0ZW07XG5cbn0sIHt9KTtcbmV4cG9ydCB7IF9janNFeHBvcnRzIGFzIGRlZmF1bHQgfTtcbmV4cG9ydCB7IF9fY2pzTWV0YVVSTCB9XG4iXX0=